function has3d(){var a,b=document.createElement("p"),c={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(b,null);for(var d in c)void 0!==b.style[d]&&(b.style[d]="translate3d(1px,1px,1px)",a=window.getComputedStyle(b).getPropertyValue(c[d]));document.body.removeChild(b),a=void 0!==a&&a.length>0&&"none"!==a,document.documentElement.className=document.documentElement.className.replace(/(no-)?csstransforms3d/g,""),document.documentElement.className+=" "+(a?"":"no-")+"csstransforms3d"}function clearObservables(a){if(!(a instanceof Array))return ko.isObservable(a)&&(a=ko.unwrap(a)),a;for(var b=0;b<a.length;b++)ko.isObservable(a[b])&&(a[b]=ko.unwrap(a[b]));return a}function cleanTags(a){return null==a&&(a=""),a.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function findLinks(a){return null==a&&(a=""),a.match(/(((https?:\/\/(www\.)?)|(www\.))[A-Za-z0-9-._~:/%?#\[\]@!\$&'\(\)\*\+,;=]+)/gi)}function parseLinks(a,b){null==b&&(b=""),null==a&&(a=[]);for(var c={},d=0;d<a.length;d++)if(!(a[d]in c)){c[a[d]]=!0;var e=!1;"http"!=a[d].substr(0,4)&&(e=!0),b=b.replace(new RegExp(a[d].replace(new RegExp("[.*+?|()\\[\\]{}\\\\]","g"),"\\$&"),"g"),'<a href="'+(e?"http://":"")+'$&" target="_blank">$&</a>')}return b}!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=ea.type(a);return"function"===c||ea.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(ea.isFunction(b))return ea.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return ea.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ma.test(b))return ea.filter(b,a,c);b=ea.filter(b,a)}return ea.grep(a,function(a){return ea.inArray(a,b)>=0!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(a){var b=ua[a]={};return ea.each(a.match(ta)||[],function(a,c){b[c]=!0}),b}function g(){oa.addEventListener?(oa.removeEventListener("DOMContentLoaded",h,!1),a.removeEventListener("load",h,!1)):(oa.detachEvent("onreadystatechange",h),a.detachEvent("onload",h))}function h(){(oa.addEventListener||"load"===event.type||"complete"===oa.readyState)&&(g(),ea.ready())}function i(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(za,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ya.test(c)?ea.parseJSON(c):c}catch(e){}ea.data(a,b,c)}else c=void 0}return c}function j(a){var b;for(b in a)if(("data"!==b||!ea.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function k(a,b,c,d){if(ea.acceptData(a)){var e,f,g=ea.expando,h=a.nodeType,i=h?ea.cache:a,j=h?a[g]:a[g]&&g;if(j&&i[j]&&(d||i[j].data)||void 0!==c||"string"!=typeof b)return j||(j=h?a[g]=W.pop()||ea.guid++:g),i[j]||(i[j]=h?{}:{toJSON:ea.noop}),("object"==typeof b||"function"==typeof b)&&(d?i[j]=ea.extend(i[j],b):i[j].data=ea.extend(i[j].data,b)),f=i[j],d||(f.data||(f.data={}),f=f.data),void 0!==c&&(f[ea.camelCase(b)]=c),"string"==typeof b?(e=f[b],null==e&&(e=f[ea.camelCase(b)])):e=f,e}}function l(a,b,c){if(ea.acceptData(a)){var d,e,f=a.nodeType,g=f?ea.cache:a,h=f?a[ea.expando]:ea.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){ea.isArray(b)?b=b.concat(ea.map(b,ea.camelCase)):b in d?b=[b]:(b=ea.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;for(;e--;)delete d[b[e]];if(c?!j(d):!ea.isEmptyObject(d))return}(c||(delete g[h].data,j(g[h])))&&(f?ea.cleanData([a],!0):ca.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}function m(){return!0}function n(){return!1}function o(){try{return oa.activeElement}catch(a){}}function p(a){var b=Ka.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function q(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==xa?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==xa?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||ea.nodeName(d,b)?f.push(d):ea.merge(f,q(d,b));return void 0===b||b&&ea.nodeName(a,b)?ea.merge([a],f):f}function r(a){Ea.test(a.type)&&(a.defaultChecked=a.checked)}function s(a,b){return ea.nodeName(a,"table")&&ea.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function t(a){return a.type=(null!==ea.find.attr(a,"type"))+"/"+a.type,a}function u(a){var b=Va.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function v(a,b){for(var c,d=0;null!=(c=a[d]);d++)ea._data(c,"globalEval",!b||ea._data(b[d],"globalEval"))}function w(a,b){if(1===b.nodeType&&ea.hasData(a)){var c,d,e,f=ea._data(a),g=ea._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)ea.event.add(b,c,h[c][d])}g.data&&(g.data=ea.extend({},g.data))}}function x(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!ca.noCloneEvent&&b[ea.expando]){e=ea._data(b);for(d in e.events)ea.removeEvent(b,d,e.handle);b.removeAttribute(ea.expando)}"script"===c&&b.text!==a.text?(t(b).text=a.text,u(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),ca.html5Clone&&a.innerHTML&&!ea.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&Ea.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}function y(b,c){var d,e=ea(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:ea.css(e[0],"display");return e.detach(),f}function z(a){var b=oa,c=_a[a];return c||(c=y(a,b),"none"!==c&&c||($a=($a||ea("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=($a[0].contentWindow||$a[0].contentDocument).document,b.write(),b.close(),c=y(a,b),$a.detach()),_a[a]=c),c}function A(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}function B(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=mb.length;e--;)if(b=mb[e]+c,b in a)return b;return d}function C(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ea._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&Ca(d)&&(f[g]=ea._data(d,"olddisplay",z(d.nodeName)))):(e=Ca(d),(c&&"none"!==c||!e)&&ea._data(d,"olddisplay",e?c:ea.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function D(a,b,c){var d=ib.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function E(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=ea.css(a,c+Ba[f],!0,e)),d?("content"===c&&(g-=ea.css(a,"padding"+Ba[f],!0,e)),"margin"!==c&&(g-=ea.css(a,"border"+Ba[f]+"Width",!0,e))):(g+=ea.css(a,"padding"+Ba[f],!0,e),"padding"!==c&&(g+=ea.css(a,"border"+Ba[f]+"Width",!0,e)));return g}function F(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=ab(a),g=ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=bb(a,b,f),(0>e||null==e)&&(e=a.style[b]),db.test(e))return e;d=g&&(ca.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+E(a,b,c||(g?"border":"content"),d,f)+"px"}function G(a,b,c,d,e){return new G.prototype.init(a,b,c,d,e)}function H(){return setTimeout(function(){nb=void 0}),nb=ea.now()}function I(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Ba[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function J(a,b,c){for(var d,e=(tb[b]||[]).concat(tb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&Ca(a),p=ea._data(a,"fxshow");c.queue||(h=ea._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,ea.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=ea.css(a,"display"),k="none"===j?ea._data(a,"olddisplay")||z(a.nodeName):j,"inline"===k&&"none"===ea.css(a,"float")&&(ca.inlineBlockNeedsLayout&&"inline"!==z(a.nodeName)?n.zoom=1:n.display="inline-block")),c.overflow&&(n.overflow="hidden",ca.shrinkWrapBlocks()||l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],pb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||ea.style(a,d)}else j=void 0;if(ea.isEmptyObject(m))"inline"===("none"===j?z(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ea._data(a,"fxshow",{}),f&&(p.hidden=!o),o?ea(a).show():l.done(function(){ea(a).hide()}),l.done(function(){var b;ea._removeData(a,"fxshow");for(b in m)ea.style(a,b,m[b])});for(d in m)g=J(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function L(a,b){var c,d,e,f,g;for(c in a)if(d=ea.camelCase(c),e=b[d],f=a[c],ea.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=ea.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function M(a,b,c){var d,e,f=0,g=sb.length,h=ea.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=nb||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:ea.extend({},b),opts:ea.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:nb||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=ea.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(L(k,j.opts.specialEasing);g>f;f++)if(d=sb[f].call(j,a,k,j.opts))return d;return ea.map(k,J,j),ea.isFunction(j.opts.start)&&j.opts.start.call(a,j),ea.fx.timer(ea.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function N(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(ta)||[];if(ea.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function O(a,b,c,d){function e(h){var i;return f[h]=!0,ea.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===Rb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function P(a,b){var c,d,e=ea.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&ea.extend(!0,a,c),a}function Q(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function R(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function S(a,b,c,d){var e;if(ea.isArray(b))ea.each(b,function(b,e){c||Vb.test(a)?d(a,e):S(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==ea.type(b))d(a,b);else for(e in b)S(a+"["+e+"]",b[e],c,d)}function T(){try{return new a.XMLHttpRequest}catch(b){}}function U(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function V(a){return ea.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var W=[],X=W.slice,Y=W.concat,Z=W.push,$=W.indexOf,_={},aa=_.toString,ba=_.hasOwnProperty,ca={},da="1.11.3",ea=function(a,b){return new ea.fn.init(a,b)},fa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ga=/^-ms-/,ha=/-([\da-z])/gi,ia=function(a,b){return b.toUpperCase()};ea.fn=ea.prototype={jquery:da,constructor:ea,selector:"",length:0,toArray:function(){return X.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:X.call(this)},pushStack:function(a){var b=ea.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return ea.each(this,a,b)},map:function(a){return this.pushStack(ea.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(X.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:W.sort,splice:W.splice},ea.extend=ea.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||ea.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(ea.isPlainObject(c)||(b=ea.isArray(c)))?(b?(b=!1,f=a&&ea.isArray(a)?a:[]):f=a&&ea.isPlainObject(a)?a:{},g[d]=ea.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},ea.extend({expando:"jQuery"+(da+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===ea.type(a)},isArray:Array.isArray||function(a){return"array"===ea.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!ea.isArray(a)&&a-parseFloat(a)+1>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==ea.type(a)||a.nodeType||ea.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(ca.ownLast)for(b in a)return ba.call(a,b);for(b in a);return void 0===b||ba.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?_[aa.call(a)]||"object":typeof a},globalEval:function(b){b&&ea.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(ga,"ms-").replace(ha,ia)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(fa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?ea.merge(d,"string"==typeof a?[a]:a):Z.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if($)return $.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return Y.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),ea.isFunction(a)?(c=X.call(arguments,2),d=function(){return a.apply(b||this,c.concat(X.call(arguments)))},d.guid=a.guid=a.guid||ea.guid++,d):void 0},now:function(){return+new Date},support:ca}),ea.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){_["[object "+b+"]"]=b.toLowerCase()});var ja=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;
return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);ea.find=ja,ea.expr=ja.selectors,ea.expr[":"]=ea.expr.pseudos,ea.unique=ja.uniqueSort,ea.text=ja.getText,ea.isXMLDoc=ja.isXML,ea.contains=ja.contains;var ka=ea.expr.match.needsContext,la=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ma=/^.[^:#\[\.,]*$/;ea.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?ea.find.matchesSelector(d,a)?[d]:[]:ea.find.matches(a,ea.grep(b,function(a){return 1===a.nodeType}))},ea.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(ea(a).filter(function(){for(b=0;e>b;b++)if(ea.contains(d[b],this))return!0}));for(b=0;e>b;b++)ea.find(a,d[b],c);return c=this.pushStack(e>1?ea.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&ka.test(a)?ea(a):a||[],!1).length}});var na,oa=a.document,pa=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,qa=ea.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:pa.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||na).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof ea?b[0]:b,ea.merge(this,ea.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:oa,!0)),la.test(c[1])&&ea.isPlainObject(b))for(c in b)ea.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=oa.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return na.find(a);this.length=1,this[0]=d}return this.context=oa,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):ea.isFunction(a)?"undefined"!=typeof na.ready?na.ready(a):a(ea):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),ea.makeArray(a,this))};qa.prototype=ea.fn,na=ea(oa);var ra=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};ea.extend({dir:function(a,b,c){for(var d=[],e=a[b];e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!ea(e).is(c));)1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),ea.fn.extend({has:function(a){var b,c=ea(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(ea.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=ka.test(a)||"string"!=typeof a?ea(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&ea.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?ea.unique(f):f)},index:function(a){return a?"string"==typeof a?ea.inArray(this[0],ea(a)):ea.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(ea.unique(ea.merge(this.get(),ea(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),ea.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return ea.dir(a,"parentNode")},parentsUntil:function(a,b,c){return ea.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return ea.dir(a,"nextSibling")},prevAll:function(a){return ea.dir(a,"previousSibling")},nextUntil:function(a,b,c){return ea.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return ea.dir(a,"previousSibling",c)},siblings:function(a){return ea.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return ea.sibling(a.firstChild)},contents:function(a){return ea.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:ea.merge([],a.childNodes)}},function(a,b){ea.fn[a]=function(c,d){var e=ea.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=ea.filter(d,e)),this.length>1&&(sa[a]||(e=ea.unique(e)),ra.test(a)&&(e=e.reverse())),this.pushStack(e)}});var ta=/\S+/g,ua={};ea.Callbacks=function(a){a="string"==typeof a?ua[a]||f(a):ea.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(c=a.memory&&f,d=!0,g=h||0,h=0,e=i.length,b=!0;i&&e>g;g++)if(i[g].apply(f[0],f[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var d=i.length;!function f(b){ea.each(b,function(b,c){var d=ea.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=i.length:c&&(h=d,k(c))}return this},remove:function(){return i&&ea.each(arguments,function(a,c){for(var d;(d=ea.inArray(c,i,d))>-1;)i.splice(d,1),b&&(e>=d&&e--,g>=d&&g--)}),this},has:function(a){return a?ea.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],e=0,this},disable:function(){return i=j=c=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,c){return!i||d&&!j||(c=c||[],c=[a,c.slice?c.slice():c],b?j.push(c):k(c)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},ea.extend({Deferred:function(a){var b=[["resolve","done",ea.Callbacks("once memory"),"resolved"],["reject","fail",ea.Callbacks("once memory"),"rejected"],["notify","progress",ea.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return ea.Deferred(function(c){ea.each(b,function(b,f){var g=ea.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&ea.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?ea.extend(a,d):d}},e={};return d.pipe=d.then,ea.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=X.call(arguments),g=f.length,h=1!==g||a&&ea.isFunction(a.promise)?g:0,i=1===h?a:ea.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?X.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&ea.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var va;ea.fn.ready=function(a){return ea.ready.promise().done(a),this},ea.extend({isReady:!1,readyWait:1,holdReady:function(a){a?ea.readyWait++:ea.ready(!0)},ready:function(a){if(a===!0?!--ea.readyWait:!ea.isReady){if(!oa.body)return setTimeout(ea.ready);ea.isReady=!0,a!==!0&&--ea.readyWait>0||(va.resolveWith(oa,[ea]),ea.fn.triggerHandler&&(ea(oa).triggerHandler("ready"),ea(oa).off("ready")))}}}),ea.ready.promise=function(b){if(!va)if(va=ea.Deferred(),"complete"===oa.readyState)setTimeout(ea.ready);else if(oa.addEventListener)oa.addEventListener("DOMContentLoaded",h,!1),a.addEventListener("load",h,!1);else{oa.attachEvent("onreadystatechange",h),a.attachEvent("onload",h);var c=!1;try{c=null==a.frameElement&&oa.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!ea.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}g(),ea.ready()}}()}return va.promise(b)};var wa,xa="undefined";for(wa in ea(ca))break;ca.ownLast="0"!==wa,ca.inlineBlockNeedsLayout=!1,ea(function(){var a,b,c,d;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ca.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=oa.createElement("div");if(null==ca.deleteExpando){ca.deleteExpando=!0;try{delete a.test}catch(b){ca.deleteExpando=!1}}a=null}(),ea.acceptData=function(a){var b=ea.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var ya=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,za=/([A-Z])/g;ea.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?ea.cache[a[ea.expando]]:a[ea.expando],!!a&&!j(a)},data:function(a,b,c){return k(a,b,c)},removeData:function(a,b){return l(a,b)},_data:function(a,b,c){return k(a,b,c,!0)},_removeData:function(a,b){return l(a,b,!0)}}),ea.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=ea.data(f),1===f.nodeType&&!ea._data(f,"parsedAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=ea.camelCase(d.slice(5)),i(f,d,e[d])));ea._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){ea.data(this,a)}):arguments.length>1?this.each(function(){ea.data(this,a,b)}):f?i(f,a,ea.data(f,a)):void 0},removeData:function(a){return this.each(function(){ea.removeData(this,a)})}}),ea.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ea._data(a,b),c&&(!d||ea.isArray(c)?d=ea._data(a,b,ea.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=ea.queue(a,b),d=c.length,e=c.shift(),f=ea._queueHooks(a,b),g=function(){ea.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ea._data(a,c)||ea._data(a,c,{empty:ea.Callbacks("once memory").add(function(){ea._removeData(a,b+"queue"),ea._removeData(a,c)})})}}),ea.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?ea.queue(this[0],a):void 0===b?this:this.each(function(){var c=ea.queue(this,a,b);ea._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&ea.dequeue(this,a)})},dequeue:function(a){return this.each(function(){ea.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=ea.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ea._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Aa=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ba=["Top","Right","Bottom","Left"],Ca=function(a,b){return a=b||a,"none"===ea.css(a,"display")||!ea.contains(a.ownerDocument,a)},Da=ea.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===ea.type(c)){e=!0;for(h in c)ea.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,ea.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(ea(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Ea=/^(?:checkbox|radio)$/i;!function(){var a=oa.createElement("input"),b=oa.createElement("div"),c=oa.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ca.leadingWhitespace=3===b.firstChild.nodeType,ca.tbody=!b.getElementsByTagName("tbody").length,ca.htmlSerialize=!!b.getElementsByTagName("link").length,ca.html5Clone="<:nav></:nav>"!==oa.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),ca.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",ca.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",ca.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,ca.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){ca.noCloneEvent=!1}),b.cloneNode(!0).click()),null==ca.deleteExpando){ca.deleteExpando=!0;try{delete b.test}catch(d){ca.deleteExpando=!1}}}(),function(){var b,c,d=oa.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(ca[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),ca[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var Fa=/^(?:input|select|textarea)$/i,Ga=/^key/,Ha=/^(?:mouse|pointer|contextmenu)|click/,Ia=/^(?:focusinfocus|focusoutblur)$/,Ja=/^([^.]*)(?:\.(.+)|)$/;ea.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea._data(a);if(q){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=ea.guid++),(g=q.events)||(g=q.events={}),(k=q.handle)||(k=q.handle=function(a){return typeof ea===xa||a&&ea.event.triggered===a.type?void 0:ea.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(ta)||[""],h=b.length;h--;)f=Ja.exec(b[h])||[],n=p=f[1],o=(f[2]||"").split(".").sort(),n&&(j=ea.event.special[n]||{},n=(e?j.delegateType:j.bindType)||n,j=ea.event.special[n]||{},l=ea.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&ea.expr.match.needsContext.test(e),namespace:o.join(".")},i),(m=g[n])||(m=g[n]=[],m.delegateCount=0,j.setup&&j.setup.call(a,d,o,k)!==!1||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,l):m.push(l),ea.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ea.hasData(a)&&ea._data(a);if(q&&(k=q.events)){for(b=(b||"").match(ta)||[""],j=b.length;j--;)if(h=Ja.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=ea.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||ea.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)ea.event.remove(a,n+b[j],c,d,!0);ea.isEmptyObject(k)&&(delete q.handle,ea._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||oa],n=ba.call(b,"type")?b.type:b,o=ba.call(b,"namespace")?b.namespace.split("."):[];if(h=k=d=d||oa,3!==d.nodeType&&8!==d.nodeType&&!Ia.test(n+ea.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),g=n.indexOf(":")<0&&"on"+n,b=b[ea.expando]?b:new ea.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:ea.makeArray(c,[b]),j=ea.event.special[n]||{},e||!j.trigger||j.trigger.apply(d,c)!==!1)){if(!e&&!j.noBubble&&!ea.isWindow(d)){for(i=j.delegateType||n,Ia.test(i+n)||(h=h.parentNode);h;h=h.parentNode)m.push(h),k=h;k===(d.ownerDocument||oa)&&m.push(k.defaultView||k.parentWindow||a)}for(l=0;(h=m[l++])&&!b.isPropagationStopped();)b.type=l>1?i:j.bindType||n,f=(ea._data(h,"events")||{})[b.type]&&ea._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&ea.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=n,!e&&!b.isDefaultPrevented()&&(!j._default||j._default.apply(m.pop(),c)===!1)&&ea.acceptData(d)&&g&&d[n]&&!ea.isWindow(d)){k=d[g],k&&(d[g]=null),ea.event.triggered=n;try{d[n]()}catch(p){}ea.event.triggered=void 0,k&&(d[g]=k)}return b.result}},dispatch:function(a){a=ea.event.fix(a);var b,c,d,e,f,g=[],h=X.call(arguments),i=(ea._data(this,"events")||{})[a.type]||[],j=ea.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=ea.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(d.namespace))&&(a.handleObj=d,a.data=d.data,c=((ea.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?ea(c,this).index(i)>=0:ea.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[ea.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ha.test(e)?this.mouseHooks:Ga.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new ea.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||oa),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||oa,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==o()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===o()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ea.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return ea.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=ea.extend(new ea.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?ea.event.trigger(e,null,b):ea.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},ea.removeEvent=oa.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===xa&&(a[d]=null),a.detachEvent(d,c))},ea.Event=function(a,b){return this instanceof ea.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?m:n):this.type=a,b&&ea.extend(this,b),this.timeStamp=a&&a.timeStamp||ea.now(),void(this[ea.expando]=!0)):new ea.Event(a,b)},ea.Event.prototype={isDefaultPrevented:n,isPropagationStopped:n,isImmediatePropagationStopped:n,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=m,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=m,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=m,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},ea.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){ea.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!ea.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),ca.submitBubbles||(ea.event.special.submit={setup:function(){return ea.nodeName(this,"form")?!1:void ea.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=ea.nodeName(b,"input")||ea.nodeName(b,"button")?b.form:void 0;c&&!ea._data(c,"submitBubbles")&&(ea.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),ea._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&ea.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return ea.nodeName(this,"form")?!1:void ea.event.remove(this,"._submit")}}),ca.changeBubbles||(ea.event.special.change={setup:function(){return Fa.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ea.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),ea.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),ea.event.simulate("change",this,a,!0)})),!1):void ea.event.add(this,"beforeactivate._change",function(a){var b=a.target;Fa.test(b.nodeName)&&!ea._data(b,"changeBubbles")&&(ea.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||ea.event.simulate("change",this.parentNode,a,!0)}),ea._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ea.event.remove(this,"._change"),!Fa.test(this.nodeName)}}),ca.focusinBubbles||ea.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){ea.event.simulate(b,a.target,ea.event.fix(a),!0)};ea.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ea._data(d,b);e||d.addEventListener(a,c,!0),ea._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ea._data(d,b)-1;e?ea._data(d,b,e):(d.removeEventListener(a,c,!0),ea._removeData(d,b))}}}),ea.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=n;else if(!d)return this;return 1===e&&(g=d,d=function(a){return ea().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=ea.guid++)),this.each(function(){ea.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,ea(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=n),this.each(function(){ea.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){ea.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?ea.event.trigger(a,b,c,!0):void 0}});var Ka="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",La=/ jQuery\d+="(?:null|\d+)"/g,Ma=new RegExp("<(?:"+Ka+")[\\s/>]","i"),Na=/^\s+/,Oa=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Pa=/<([\w:]+)/,Qa=/<tbody/i,Ra=/<|&#?\w+;/,Sa=/<(?:script|style|link)/i,Ta=/checked\s*(?:[^=]|=\s*.checked.)/i,Ua=/^$|\/(?:java|ecma)script/i,Va=/^true\/(.*)/,Wa=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Xa={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ca.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ya=p(oa),Za=Ya.appendChild(oa.createElement("div"));Xa.optgroup=Xa.option,Xa.tbody=Xa.tfoot=Xa.colgroup=Xa.caption=Xa.thead,Xa.th=Xa.td,ea.extend({clone:function(a,b,c){var d,e,f,g,h,i=ea.contains(a.ownerDocument,a);if(ca.html5Clone||ea.isXMLDoc(a)||!Ma.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Za.innerHTML=a.outerHTML,Za.removeChild(f=Za.firstChild)),!(ca.noCloneEvent&&ca.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||ea.isXMLDoc(a)))for(d=q(f),h=q(a),g=0;null!=(e=h[g]);++g)d[g]&&x(e,d[g]);if(b)if(c)for(h=h||q(a),d=d||q(f),g=0;null!=(e=h[g]);g++)w(e,d[g]);else w(a,f);return d=q(f,"script"),d.length>0&&v(d,!i&&q(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k,l=a.length,m=p(b),n=[],o=0;l>o;o++)if(f=a[o],f||0===f)if("object"===ea.type(f))ea.merge(n,f.nodeType?[f]:f);else if(Ra.test(f)){for(h=h||m.appendChild(b.createElement("div")),i=(Pa.exec(f)||["",""])[1].toLowerCase(),k=Xa[i]||Xa._default,h.innerHTML=k[1]+f.replace(Oa,"<$1></$2>")+k[2],e=k[0];e--;)h=h.lastChild;if(!ca.leadingWhitespace&&Na.test(f)&&n.push(b.createTextNode(Na.exec(f)[0])),!ca.tbody)for(f="table"!==i||Qa.test(f)?"<table>"!==k[1]||Qa.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;e--;)ea.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j);for(ea.merge(n,h.childNodes),h.textContent="";h.firstChild;)h.removeChild(h.firstChild);h=m.lastChild}else n.push(b.createTextNode(f));for(h&&m.removeChild(h),ca.appendChecked||ea.grep(q(n,"input"),r),o=0;f=n[o++];)if((!d||-1===ea.inArray(f,d))&&(g=ea.contains(f.ownerDocument,f),h=q(m.appendChild(f),"script"),g&&v(h),c))for(e=0;f=h[e++];)Ua.test(f.type||"")&&c.push(f);return h=null,m},cleanData:function(a,b){for(var c,d,e,f,g=0,h=ea.expando,i=ea.cache,j=ca.deleteExpando,k=ea.event.special;null!=(c=a[g]);g++)if((b||ea.acceptData(c))&&(e=c[h],f=e&&i[e])){if(f.events)for(d in f.events)k[d]?ea.event.remove(c,d):ea.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==xa?c.removeAttribute(h):c[h]=null,W.push(e))}}}),ea.fn.extend({text:function(a){return Da(this,function(a){return void 0===a?ea.text(this):this.empty().append((this[0]&&this[0].ownerDocument||oa).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=s(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?ea.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||ea.cleanData(q(c)),c.parentNode&&(b&&ea.contains(c.ownerDocument,c)&&v(q(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&ea.cleanData(q(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&ea.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return ea.clone(this,a,b)})},html:function(a){return Da(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(La,""):void 0;if(!("string"!=typeof a||Sa.test(a)||!ca.htmlSerialize&&Ma.test(a)||!ca.leadingWhitespace&&Na.test(a)||Xa[(Pa.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(Oa,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(ea.cleanData(q(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,ea.cleanData(q(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=Y.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],n=ea.isFunction(m);if(n||j>1&&"string"==typeof m&&!ca.checkClone&&Ta.test(m))return this.each(function(c){var d=k.eq(c);n&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(h=ea.buildFragment(a,this[0].ownerDocument,!1,this),c=h.firstChild,1===h.childNodes.length&&(h=c),c)){for(f=ea.map(q(h,"script"),t),e=f.length;j>i;i++)d=h,i!==l&&(d=ea.clone(d,!0,!0),e&&ea.merge(f,q(d,"script"))),b.call(this[i],d,i);if(e)for(g=f[f.length-1].ownerDocument,ea.map(f,u),i=0;e>i;i++)d=f[i],Ua.test(d.type||"")&&!ea._data(d,"globalEval")&&ea.contains(g,d)&&(d.src?ea._evalUrl&&ea._evalUrl(d.src):ea.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Wa,"")));h=c=null}return this}}),ea.each({appendTo:"append",prependTo:"prepend",
insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){ea.fn[a]=function(a){for(var c,d=0,e=[],f=ea(a),g=f.length-1;g>=d;d++)c=d===g?this:this.clone(!0),ea(f[d])[b](c),Z.apply(e,c.get());return this.pushStack(e)}});var $a,_a={};!function(){var a;ca.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=oa.getElementsByTagName("body")[0],c&&c.style?(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==xa&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(oa.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var ab,bb,cb=/^margin/,db=new RegExp("^("+Aa+")(?!px)[a-z%]+$","i"),eb=/^(top|right|bottom|left)$/;a.getComputedStyle?(ab=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||ea.contains(a.ownerDocument,a)||(g=ea.style(a,b)),db.test(g)&&cb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):oa.documentElement.currentStyle&&(ab=function(a){return a.currentStyle},bb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||ab(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),db.test(g)&&!eb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"}),function(){function b(){var b,c,d,e;c=oa.getElementsByTagName("body")[0],c&&c.style&&(b=oa.createElement("div"),d=oa.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f=g=!1,i=!0,a.getComputedStyle&&(f="1%"!==(a.getComputedStyle(b,null)||{}).top,g="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,e=b.appendChild(oa.createElement("div")),e.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",e.style.marginRight=e.style.width="0",b.style.width="1px",i=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(e)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=b.getElementsByTagName("td"),e[0].style.cssText="margin:0;border:0;padding:0;display:none",h=0===e[0].offsetHeight,h&&(e[0].style.display="",e[1].style.display="none",h=0===e[0].offsetHeight),c.removeChild(d))}var c,d,e,f,g,h,i;c=oa.createElement("div"),c.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=c.getElementsByTagName("a")[0],d=e&&e.style,d&&(d.cssText="float:left;opacity:.5",ca.opacity="0.5"===d.opacity,ca.cssFloat=!!d.cssFloat,c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",ca.clearCloneStyle="content-box"===c.style.backgroundClip,ca.boxSizing=""===d.boxSizing||""===d.MozBoxSizing||""===d.WebkitBoxSizing,ea.extend(ca,{reliableHiddenOffsets:function(){return null==h&&b(),h},boxSizingReliable:function(){return null==g&&b(),g},pixelPosition:function(){return null==f&&b(),f},reliableMarginRight:function(){return null==i&&b(),i}}))}(),ea.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var fb=/alpha\([^)]*\)/i,gb=/opacity\s*=\s*([^)]*)/,hb=/^(none|table(?!-c[ea]).+)/,ib=new RegExp("^("+Aa+")(.*)$","i"),jb=new RegExp("^([+-])=("+Aa+")","i"),kb={position:"absolute",visibility:"hidden",display:"block"},lb={letterSpacing:"0",fontWeight:"400"},mb=["Webkit","O","Moz","ms"];ea.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ca.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=ea.camelCase(b),i=a.style;if(b=ea.cssProps[h]||(ea.cssProps[h]=B(i,h)),g=ea.cssHooks[b]||ea.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=jb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(ea.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||ea.cssNumber[h]||(c+="px"),ca.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=ea.camelCase(b);return b=ea.cssProps[h]||(ea.cssProps[h]=B(a.style,h)),g=ea.cssHooks[b]||ea.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=bb(a,b,d)),"normal"===f&&b in lb&&(f=lb[b]),""===c||c?(e=parseFloat(f),c===!0||ea.isNumeric(e)?e||0:f):f}}),ea.each(["height","width"],function(a,b){ea.cssHooks[b]={get:function(a,c,d){return c?hb.test(ea.css(a,"display"))&&0===a.offsetWidth?ea.swap(a,kb,function(){return F(a,b,d)}):F(a,b,d):void 0},set:function(a,c,d){var e=d&&ab(a);return D(a,c,d?E(a,b,d,ca.boxSizing&&"border-box"===ea.css(a,"boxSizing",!1,e),e):0)}}}),ca.opacity||(ea.cssHooks.opacity={get:function(a,b){return gb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=ea.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===ea.trim(f.replace(fb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=fb.test(f)?f.replace(fb,e):f+" "+e)}}),ea.cssHooks.marginRight=A(ca.reliableMarginRight,function(a,b){return b?ea.swap(a,{display:"inline-block"},bb,[a,"marginRight"]):void 0}),ea.each({margin:"",padding:"",border:"Width"},function(a,b){ea.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Ba[d]+b]=f[d]||f[d-2]||f[0];return e}},cb.test(a)||(ea.cssHooks[a+b].set=D)}),ea.fn.extend({css:function(a,b){return Da(this,function(a,b,c){var d,e,f={},g=0;if(ea.isArray(b)){for(d=ab(a),e=b.length;e>g;g++)f[b[g]]=ea.css(a,b[g],!1,d);return f}return void 0!==c?ea.style(a,b,c):ea.css(a,b)},a,b,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ca(this)?ea(this).show():ea(this).hide()})}}),ea.Tween=G,G.prototype={constructor:G,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(ea.cssNumber[c]?"":"px")},cur:function(){var a=G.propHooks[this.prop];return a&&a.get?a.get(this):G.propHooks._default.get(this)},run:function(a){var b,c=G.propHooks[this.prop];return this.options.duration?this.pos=b=ea.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):G.propHooks._default.set(this),this}},G.prototype.init.prototype=G.prototype,G.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=ea.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){ea.fx.step[a.prop]?ea.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[ea.cssProps[a.prop]]||ea.cssHooks[a.prop])?ea.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},ea.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},ea.fx=G.prototype.init,ea.fx.step={};var nb,ob,pb=/^(?:toggle|show|hide)$/,qb=new RegExp("^(?:([+-])=|)("+Aa+")([a-z%]*)$","i"),rb=/queueHooks$/,sb=[K],tb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=qb.exec(b),f=e&&e[3]||(ea.cssNumber[a]?"":"px"),g=(ea.cssNumber[a]||"px"!==f&&+d)&&qb.exec(ea.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,ea.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};ea.Animation=ea.extend(M,{tweener:function(a,b){ea.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],tb[c]=tb[c]||[],tb[c].unshift(b)},prefilter:function(a,b){b?sb.unshift(a):sb.push(a)}}),ea.speed=function(a,b,c){var d=a&&"object"==typeof a?ea.extend({},a):{complete:c||!c&&b||ea.isFunction(a)&&a,duration:a,easing:c&&b||b&&!ea.isFunction(b)&&b};return d.duration=ea.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in ea.fx.speeds?ea.fx.speeds[d.duration]:ea.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){ea.isFunction(d.old)&&d.old.call(this),d.queue&&ea.dequeue(this,d.queue)},d},ea.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ca).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=ea.isEmptyObject(a),f=ea.speed(b,c,d),g=function(){var b=M(this,ea.extend({},a),f);(e||ea._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=ea.timers,g=ea._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&rb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&ea.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ea._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=ea.timers,g=d?d.length:0;for(c.finish=!0,ea.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),ea.each(["toggle","show","hide"],function(a,b){var c=ea.fn[b];ea.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(I(b,!0),a,d,e)}}),ea.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){ea.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),ea.timers=[],ea.fx.tick=function(){var a,b=ea.timers,c=0;for(nb=ea.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||ea.fx.stop(),nb=void 0},ea.fx.timer=function(a){ea.timers.push(a),a()?ea.fx.start():ea.timers.pop()},ea.fx.interval=13,ea.fx.start=function(){ob||(ob=setInterval(ea.fx.tick,ea.fx.interval))},ea.fx.stop=function(){clearInterval(ob),ob=null},ea.fx.speeds={slow:600,fast:200,_default:400},ea.fn.delay=function(a,b){return a=ea.fx?ea.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=oa.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=oa.createElement("select"),e=c.appendChild(oa.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",ca.getSetAttribute="t"!==b.className,ca.style=/top/.test(d.getAttribute("style")),ca.hrefNormalized="/a"===d.getAttribute("href"),ca.checkOn=!!a.value,ca.optSelected=e.selected,ca.enctype=!!oa.createElement("form").enctype,c.disabled=!0,ca.optDisabled=!e.disabled,a=oa.createElement("input"),a.setAttribute("value",""),ca.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),ca.radioValue="t"===a.value}();var ub=/\r/g;ea.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=ea.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,ea(this).val()):a,null==e?e="":"number"==typeof e?e+="":ea.isArray(e)&&(e=ea.map(e,function(a){return null==a?"":a+""})),b=ea.valHooks[this.type]||ea.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=ea.valHooks[e.type]||ea.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ub,""):null==c?"":c)}}}),ea.extend({valHooks:{option:{get:function(a){var b=ea.find.attr(a,"value");return null!=b?b:ea.trim(ea.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(ca.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&ea.nodeName(c.parentNode,"optgroup"))){if(b=ea(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=ea.makeArray(b),g=e.length;g--;)if(d=e[g],ea.inArray(ea.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),ea.each(["radio","checkbox"],function(){ea.valHooks[this]={set:function(a,b){return ea.isArray(b)?a.checked=ea.inArray(ea(a).val(),b)>=0:void 0}},ca.checkOn||(ea.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var vb,wb,xb=ea.expr.attrHandle,yb=/^(?:checked|selected)$/i,zb=ca.getSetAttribute,Ab=ca.input;ea.fn.extend({attr:function(a,b){return Da(this,ea.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){ea.removeAttr(this,a)})}}),ea.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===xa?ea.prop(a,b,c):(1===f&&ea.isXMLDoc(a)||(b=b.toLowerCase(),d=ea.attrHooks[b]||(ea.expr.match.bool.test(b)?wb:vb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=ea.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void ea.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(ta);if(f&&1===a.nodeType)for(;c=f[e++];)d=ea.propFix[c]||c,ea.expr.match.bool.test(c)?Ab&&zb||!yb.test(c)?a[d]=!1:a[ea.camelCase("default-"+c)]=a[d]=!1:ea.attr(a,c,""),a.removeAttribute(zb?c:d)},attrHooks:{type:{set:function(a,b){if(!ca.radioValue&&"radio"===b&&ea.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),wb={set:function(a,b,c){return b===!1?ea.removeAttr(a,c):Ab&&zb||!yb.test(c)?a.setAttribute(!zb&&ea.propFix[c]||c,c):a[ea.camelCase("default-"+c)]=a[c]=!0,c}},ea.each(ea.expr.match.bool.source.match(/\w+/g),function(a,b){var c=xb[b]||ea.find.attr;xb[b]=Ab&&zb||!yb.test(b)?function(a,b,d){var e,f;return d||(f=xb[b],xb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,xb[b]=f),e}:function(a,b,c){return c?void 0:a[ea.camelCase("default-"+b)]?b.toLowerCase():null}}),Ab&&zb||(ea.attrHooks.value={set:function(a,b,c){return ea.nodeName(a,"input")?void(a.defaultValue=b):vb&&vb.set(a,b,c)}}),zb||(vb={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},xb.id=xb.name=xb.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},ea.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:vb.set},ea.attrHooks.contenteditable={set:function(a,b,c){vb.set(a,""===b?!1:b,c)}},ea.each(["width","height"],function(a,b){ea.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),ca.style||(ea.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var Bb=/^(?:input|select|textarea|button|object)$/i,Cb=/^(?:a|area)$/i;ea.fn.extend({prop:function(a,b){return Da(this,ea.prop,a,b,arguments.length>1)},removeProp:function(a){return a=ea.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),ea.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!ea.isXMLDoc(a),f&&(b=ea.propFix[b]||b,e=ea.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=ea.find.attr(a,"tabindex");return b?parseInt(b,10):Bb.test(a.nodeName)||Cb.test(a.nodeName)&&a.href?0:-1}}}}),ca.hrefNormalized||ea.each(["href","src"],function(a,b){ea.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),ca.optSelected||(ea.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),ea.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ea.propFix[this.toLowerCase()]=this}),ca.enctype||(ea.propFix.enctype="encoding");var Db=/[\t\r\n\f]/g;ea.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=ea.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(ea.isFunction(a))return this.each(function(b){ea(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(ta)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(Db," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?ea.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):ea.isFunction(a)?this.each(function(c){ea(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=ea(this),f=a.match(ta)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===xa||"boolean"===c)&&(this.className&&ea._data(this,"__className__",this.className),this.className=this.className||a===!1?"":ea._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(Db," ").indexOf(b)>=0)return!0;return!1}}),ea.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){ea.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),ea.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var Eb=ea.now(),Fb=/\?/,Gb=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ea.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=ea.trim(b+"");return e&&!ea.trim(e.replace(Gb,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():ea.error("Invalid JSON: "+b)},ea.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||ea.error("Invalid XML: "+b),c};var Hb,Ib,Jb=/#.*$/,Kb=/([?&])_=[^&]*/,Lb=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mb=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Nb=/^(?:GET|HEAD)$/,Ob=/^\/\//,Pb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Qb={},Rb={},Sb="*/".concat("*");try{Ib=location.href}catch(Tb){Ib=oa.createElement("a"),Ib.href="",Ib=Ib.href}Hb=Pb.exec(Ib.toLowerCase())||[],ea.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ib,type:"GET",isLocal:Mb.test(Hb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Sb,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ea.parseJSON,"text xml":ea.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?P(P(a,ea.ajaxSettings),b):P(ea.ajaxSettings,a)},ajaxPrefilter:N(Qb),ajaxTransport:N(Rb),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,e=a>=200&&300>a||304===a,c&&(s=Q(l,v,c)),s=R(l,s,v,e),e?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(ea.lastModified[f]=u),u=v.getResponseHeader("etag"),u&&(ea.etag[f]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,e=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",e?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,i&&n.trigger(e?"ajaxSuccess":"ajaxError",[v,l,e?k:r]),p.fireWith(m,[v,w]),i&&(n.trigger("ajaxComplete",[v,l]),--ea.active||ea.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=ea.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?ea(m):ea.event,o=ea.Deferred(),p=ea.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=Lb.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return j&&j.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||Ib)+"").replace(Jb,"").replace(Ob,Hb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=ea.trim(l.dataType||"*").toLowerCase().match(ta)||[""],null==l.crossDomain&&(d=Pb.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===Hb[1]&&d[2]===Hb[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(Hb[3]||("http:"===Hb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=ea.param(l.data,l.traditional)),O(Qb,l,b,v),2===t)return v;i=ea.event&&l.global,i&&0===ea.active++&&ea.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!Nb.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(Fb.test(f)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=Kb.test(f)?f.replace(Kb,"$1_="+Eb++):f+(Fb.test(f)?"&":"?")+"_="+Eb++)),l.ifModified&&(ea.lastModified[f]&&v.setRequestHeader("If-Modified-Since",ea.lastModified[f]),ea.etag[f]&&v.setRequestHeader("If-None-Match",ea.etag[f])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+Sb+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=O(Rb,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return ea.get(a,b,c,"json")},getScript:function(a,b){return ea.get(a,void 0,b,"script")}}),ea.each(["get","post"],function(a,b){ea[b]=function(a,c,d,e){return ea.isFunction(c)&&(e=e||d,d=c,c=void 0),ea.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),ea._evalUrl=function(a){return ea.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ea.fn.extend({wrapAll:function(a){if(ea.isFunction(a))return this.each(function(b){ea(this).wrapAll(a.call(this,b))});if(this[0]){var b=ea(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return ea.isFunction(a)?this.each(function(b){ea(this).wrapInner(a.call(this,b))}):this.each(function(){var b=ea(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=ea.isFunction(a);return this.each(function(c){ea(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){ea.nodeName(this,"body")||ea(this).replaceWith(this.childNodes)}).end()}}),ea.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!ca.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||ea.css(a,"display"))},ea.expr.filters.visible=function(a){return!ea.expr.filters.hidden(a)};var Ub=/%20/g,Vb=/\[\]$/,Wb=/\r?\n/g,Xb=/^(?:submit|button|image|reset|file)$/i,Yb=/^(?:input|select|textarea|keygen)/i;ea.param=function(a,b){var c,d=[],e=function(a,b){b=ea.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=ea.ajaxSettings&&ea.ajaxSettings.traditional),ea.isArray(a)||a.jquery&&!ea.isPlainObject(a))ea.each(a,function(){e(this.name,this.value)});else for(c in a)S(c,a[c],b,e);return d.join("&").replace(Ub,"+")},ea.fn.extend({serialize:function(){return ea.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=ea.prop(this,"elements");return a?ea.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!ea(this).is(":disabled")&&Yb.test(this.nodeName)&&!Xb.test(a)&&(this.checked||!Ea.test(a))}).map(function(a,b){var c=ea(this).val();return null==c?null:ea.isArray(c)?ea.map(c,function(a){return{name:b.name,value:a.replace(Wb,"\r\n")}}):{name:b.name,value:c.replace(Wb,"\r\n")}}).get()}}),ea.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&T()||U()}:T;var Zb=0,$b={},_b=ea.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in $b)$b[a](void 0,!0)}),ca.cors=!!_b&&"withCredentials"in _b,_b=ca.ajax=!!_b,_b&&ea.ajaxTransport(function(a){if(!a.crossDomain||ca.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Zb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete $b[g],b=void 0,f.onreadystatechange=ea.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=$b[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),ea.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return ea.globalEval(a),a}}}),ea.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),ea.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=oa.head||ea("head")[0]||oa.documentElement;return{send:function(d,e){b=oa.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var ac=[],bc=/(=)\?(?=&|$)|\?\?/;ea.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=ac.pop()||ea.expando+"_"+Eb++;return this[a]=!0,a}}),ea.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(bc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&bc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=ea.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(bc,"$1"+e):b.jsonp!==!1&&(b.url+=(Fb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||ea.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,ac.push(e)),g&&ea.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),ea.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||oa;var d=la.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=ea.buildFragment([a],b,e),e&&e.length&&ea(e).remove(),ea.merge([],d.childNodes))};var cc=ea.fn.load;ea.fn.load=function(a,b,c){if("string"!=typeof a&&cc)return cc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=ea.trim(a.slice(h,a.length)),a=a.slice(0,h)),ea.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&ea.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?ea("<div>").append(ea.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},ea.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){ea.fn[b]=function(a){return this.on(b,a)}}),ea.expr.filters.animated=function(a){return ea.grep(ea.timers,function(b){return a===b.elem}).length};var dc=a.document.documentElement;ea.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=ea.css(a,"position"),l=ea(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=ea.css(a,"top"),i=ea.css(a,"left"),j=("absolute"===k||"fixed"===k)&&ea.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),ea.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},ea.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){ea.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,ea.contains(b,e)?(typeof e.getBoundingClientRect!==xa&&(d=e.getBoundingClientRect()),c=V(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)
}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===ea.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),ea.nodeName(a[0],"html")||(c=a.offset()),c.top+=ea.css(a[0],"borderTopWidth",!0),c.left+=ea.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-ea.css(d,"marginTop",!0),left:b.left-c.left-ea.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||dc;a&&!ea.nodeName(a,"html")&&"static"===ea.css(a,"position");)a=a.offsetParent;return a||dc})}}),ea.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);ea.fn[a]=function(d){return Da(this,function(a,d,e){var f=V(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?ea(f).scrollLeft():e,c?e:ea(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),ea.each(["top","left"],function(a,b){ea.cssHooks[b]=A(ca.pixelPosition,function(a,c){return c?(c=bb(a,b),db.test(c)?ea(a).position()[b]+"px":c):void 0})}),ea.each({Height:"height",Width:"width"},function(a,b){ea.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){ea.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return Da(this,function(b,c,d){var e;return ea.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?ea.css(b,c,g):ea.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),ea.fn.size=function(){return this.length},ea.fn.andSelf=ea.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ea});var ec=a.jQuery,fc=a.$;return ea.noConflict=function(b){return a.$===ea&&(a.$=fc),b&&a.jQuery===ea&&(a.jQuery=ec),ea},typeof b===xa&&(a.jQuery=a.$=ea),ea}),function(a){function b(){}function c(a){function c(b){b.prototype.option||(b.prototype.option=function(b){a.isPlainObject(b)&&(this.options=a.extend(!0,this.options,b))})}function e(b,c){a.fn[b]=function(e){if("string"==typeof e){for(var g=d.call(arguments,1),h=0,i=this.length;i>h;h++){var j=this[h],k=a.data(j,b);if(k)if(a.isFunction(k[e])&&"_"!==e.charAt(0)){var l=k[e].apply(k,g);if(void 0!==l)return l}else f("no such method '"+e+"' for "+b+" instance");else f("cannot call methods on "+b+" prior to initialization; attempted to call '"+e+"'")}return this}return this.each(function(){var d=a.data(this,b);d?(d.option(e),d._init()):(d=new c(this,e),a.data(this,b,d))})}}if(a){var f="undefined"==typeof console?b:function(a){console.error(a)};return a.bridget=function(a,b){c(b),e(a,b)},a.bridget}}var d=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],c):c("object"==typeof exports?require("jquery"):a.jQuery)}(window),function(a){function b(b){var c=a.event;return c.target=c.target||c.srcElement||b,c}var c=document.documentElement,d=function(){};c.addEventListener?d=function(a,b,c){a.addEventListener(b,c,!1)}:c.attachEvent&&(d=function(a,c,d){a[c+d]=d.handleEvent?function(){var c=b(a);d.handleEvent.call(d,c)}:function(){var c=b(a);d.call(a,c)},a.attachEvent("on"+c,a[c+d])});var e=function(){};c.removeEventListener?e=function(a,b,c){a.removeEventListener(b,c,!1)}:c.detachEvent&&(e=function(a,b,c){a.detachEvent("on"+b,a[b+c]);try{delete a[b+c]}catch(d){a[b+c]=void 0}});var f={bind:d,unbind:e};"function"==typeof define&&define.amd?define("eventie/eventie",f):"object"==typeof exports?module.exports=f:a.eventie=f}(window),function(){function a(){}function b(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}function c(a){return function(){return this[a].apply(this,arguments)}}var d=a.prototype,e=this,f=e.EventEmitter;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b+=1)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(a,c){var d,e=this.getListenersAsObject(a),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===b(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=c("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.once=c("addOnceListener"),d.defineEvent=function(a){return this.getListeners(a),this},d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this},d.removeListener=function(a,c){var d,e,f=this.getListenersAsObject(a);for(e in f)f.hasOwnProperty(e)&&(d=b(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=c("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=c("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=c("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return e.EventEmitter=f,a},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return a}):"object"==typeof module&&module.exports?module.exports=a:e.EventEmitter=a}.call(this),function(a){function b(a){if(a){if("string"==typeof d[a])return a;a=a.charAt(0).toUpperCase()+a.slice(1);for(var b,e=0,f=c.length;f>e;e++)if(b=c[e]+a,"string"==typeof d[b])return b}}var c="Webkit Moz ms Ms O".split(" "),d=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return b}):"object"==typeof exports?module.exports=b:a.getStyleProperty=b}(window),function(a,b){function c(a){var b=parseFloat(a),c=-1===a.indexOf("%")&&!isNaN(b);return c&&b}function d(){}function e(){for(var a={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},b=0,c=h.length;c>b;b++){var d=h[b];a[d]=0}return a}function f(b){function d(){if(!m){m=!0;var d=a.getComputedStyle;if(j=function(){var a=d?function(a){return d(a,null)}:function(a){return a.currentStyle};return function(b){var c=a(b);return c||g("Style returned "+c+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),c}}(),k=b("boxSizing")){var e=document.createElement("div");e.style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style[k]="border-box";var f=document.body||document.documentElement;f.appendChild(e);var h=j(e);l=200===c(h.width),f.removeChild(e)}}}function f(a){if(d(),"string"==typeof a&&(a=document.querySelector(a)),a&&"object"==typeof a&&a.nodeType){var b=j(a);if("none"===b.display)return e();var f={};f.width=a.offsetWidth,f.height=a.offsetHeight;for(var g=f.isBorderBox=!(!k||!b[k]||"border-box"!==b[k]),m=0,n=h.length;n>m;m++){var o=h[m],p=b[o];p=i(a,p);var q=parseFloat(p);f[o]=isNaN(q)?0:q}var r=f.paddingLeft+f.paddingRight,s=f.paddingTop+f.paddingBottom,t=f.marginLeft+f.marginRight,u=f.marginTop+f.marginBottom,v=f.borderLeftWidth+f.borderRightWidth,w=f.borderTopWidth+f.borderBottomWidth,x=g&&l,y=c(b.width);y!==!1&&(f.width=y+(x?0:r+v));var z=c(b.height);return z!==!1&&(f.height=z+(x?0:s+w)),f.innerWidth=f.width-(r+v),f.innerHeight=f.height-(s+w),f.outerWidth=f.width+t,f.outerHeight=f.height+u,f}}function i(b,c){if(a.getComputedStyle||-1===c.indexOf("%"))return c;var d=b.style,e=d.left,f=b.runtimeStyle,g=f&&f.left;return g&&(f.left=b.currentStyle.left),d.left=c,c=d.pixelLeft,d.left=e,g&&(f.left=g),c}var j,k,l,m=!1;return f}var g="undefined"==typeof console?d:function(a){console.error(a)},h=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],f):"object"==typeof exports?module.exports=f(require("desandro-get-style-property")):a.getSize=f(a.getStyleProperty)}(window),function(a){function b(a){"function"==typeof a&&(b.isReady?a():g.push(a))}function c(a){var c="readystatechange"===a.type&&"complete"!==f.readyState;b.isReady||c||d()}function d(){b.isReady=!0;for(var a=0,c=g.length;c>a;a++){var d=g[a];d()}}function e(e){return"complete"===f.readyState?d():(e.bind(f,"DOMContentLoaded",c),e.bind(f,"readystatechange",c),e.bind(a,"load",c)),b}var f=a.document,g=[];b.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],e):"object"==typeof exports?module.exports=e(require("eventie")):a.docReady=e(a.eventie)}(window),function(a){function b(a,b){return a[g](b)}function c(a){if(!a.parentNode){var b=document.createDocumentFragment();b.appendChild(a)}}function d(a,b){c(a);for(var d=a.parentNode.querySelectorAll(b),e=0,f=d.length;f>e;e++)if(d[e]===a)return!0;return!1}function e(a,d){return c(a),b(a,d)}var f,g=function(){if(a.matches)return"matches";if(a.matchesSelector)return"matchesSelector";for(var b=["webkit","moz","ms","o"],c=0,d=b.length;d>c;c++){var e=b[c],f=e+"MatchesSelector";if(a[f])return f}}();if(g){var h=document.createElement("div"),i=b(h,"div");f=i?b:e}else f=d;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return f}):"object"==typeof exports?module.exports=f:window.matchesSelector=f}(Element.prototype),function(a,b){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["doc-ready/doc-ready","matches-selector/matches-selector"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("doc-ready"),require("desandro-matches-selector")):a.fizzyUIUtils=b(a,a.docReady,a.matchesSelector)}(window,function(a,b,c){var d={};d.extend=function(a,b){for(var c in b)a[c]=b[c];return a},d.modulo=function(a,b){return(a%b+b)%b};var e=Object.prototype.toString;d.isArray=function(a){return"[object Array]"==e.call(a)},d.makeArray=function(a){var b=[];if(d.isArray(a))b=a;else if(a&&"number"==typeof a.length)for(var c=0,e=a.length;e>c;c++)b.push(a[c]);else b.push(a);return b},d.indexOf=Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},d.removeFrom=function(a,b){var c=d.indexOf(a,b);-1!=c&&a.splice(c,1)},d.isElement="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(a){return a instanceof HTMLElement}:function(a){return a&&"object"==typeof a&&1==a.nodeType&&"string"==typeof a.nodeName},d.setText=function(){function a(a,c){b=b||(void 0!==document.documentElement.textContent?"textContent":"innerText"),a[b]=c}var b;return a}(),d.getParent=function(a,b){for(;a!=document.body;)if(a=a.parentNode,c(a,b))return a},d.getQueryElement=function(a){return"string"==typeof a?document.querySelector(a):a},d.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},d.filterFindElements=function(a,b){a=d.makeArray(a);for(var e=[],f=0,g=a.length;g>f;f++){var h=a[f];if(d.isElement(h))if(b){c(h,b)&&e.push(h);for(var i=h.querySelectorAll(b),j=0,k=i.length;k>j;j++)e.push(i[j])}else e.push(h)}return e},d.debounceMethod=function(a,b,c){var d=a.prototype[b],e=b+"Timeout";a.prototype[b]=function(){var a=this[e];a&&clearTimeout(a);var b=arguments,f=this;this[e]=setTimeout(function(){d.apply(f,b),delete f[e]},c||100)}},d.toDashed=function(a){return a.replace(/(.)([A-Z])/g,function(a,b,c){return b+"-"+c}).toLowerCase()};var f=a.console;return d.htmlInit=function(c,e){b(function(){for(var b=d.toDashed(e),g=document.querySelectorAll(".js-"+b),h="data-"+b+"-options",i=0,j=g.length;j>i;i++){var k,l=g[i],m=l.getAttribute(h);try{k=m&&JSON.parse(m)}catch(n){f&&f.error("Error parsing "+h+" on "+l.nodeName.toLowerCase()+(l.id?"#"+l.id:"")+": "+n);continue}var o=new c(l,k),p=a.jQuery;p&&p.data(l,e,o)}})},d}),function(a,b){"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property","fizzy-ui-utils/utils"],function(c,d,e,f){return b(a,c,d,e,f)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property"),require("fizzy-ui-utils")):(a.Outlayer={},a.Outlayer.Item=b(a,a.EventEmitter,a.getSize,a.getStyleProperty,a.fizzyUIUtils))}(window,function(a,b,c,d,e){function f(a){for(var b in a)return!1;return b=null,!0}function g(a,b){a&&(this.element=a,this.layout=b,this.position={x:0,y:0},this._create())}var h=a.getComputedStyle,i=h?function(a){return h(a,null)}:function(a){return a.currentStyle},j=d("transition"),k=d("transform"),l=j&&k,m=!!d("perspective"),n={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[j],o=["transform","transition","transitionDuration","transitionProperty"],p=function(){for(var a={},b=0,c=o.length;c>b;b++){var e=o[b],f=d(e);f&&f!==e&&(a[e]=f)}return a}();e.extend(g.prototype,b.prototype),g.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.getSize=function(){this.size=c(this.element)},g.prototype.css=function(a){var b=this.element.style;for(var c in a){var d=p[c]||c;b[d]=a[c]}},g.prototype.getPosition=function(){var a=i(this.element),b=this.layout.options,c=b.isOriginLeft,d=b.isOriginTop,e=parseInt(a[c?"left":"right"],10),f=parseInt(a[d?"top":"bottom"],10);e=isNaN(e)?0:e,f=isNaN(f)?0:f;var g=this.layout.size;e-=c?g.paddingLeft:g.paddingRight,f-=d?g.paddingTop:g.paddingBottom,this.position.x=e,this.position.y=f},g.prototype.layoutPosition=function(){var a=this.layout.size,b=this.layout.options,c={},d=b.isOriginLeft?"paddingLeft":"paddingRight",e=b.isOriginLeft?"left":"right",f=b.isOriginLeft?"right":"left",g=this.position.x+a[d];g=b.percentPosition&&!b.isHorizontal?g/a.width*100+"%":g+"px",c[e]=g,c[f]="";var h=b.isOriginTop?"paddingTop":"paddingBottom",i=b.isOriginTop?"top":"bottom",j=b.isOriginTop?"bottom":"top",k=this.position.y+a[h];k=b.percentPosition&&b.isHorizontal?k/a.height*100+"%":k+"px",c[i]=k,c[j]="",this.css(c),this.emitEvent("layout",[this])};var q=m?function(a,b){return"translate3d("+a+"px, "+b+"px, 0)"}:function(a,b){return"translate("+a+"px, "+b+"px)"};g.prototype._transitionTo=function(a,b){this.getPosition();var c=this.position.x,d=this.position.y,e=parseInt(a,10),f=parseInt(b,10),g=e===this.position.x&&f===this.position.y;if(this.setPosition(a,b),g&&!this.isTransitioning)return void this.layoutPosition();var h=a-c,i=b-d,j={},k=this.layout.options;h=k.isOriginLeft?h:-h,i=k.isOriginTop?i:-i,j.transform=q(h,i),this.transition({to:j,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},g.prototype.goTo=function(a,b){this.setPosition(a,b),this.layoutPosition()},g.prototype.moveTo=l?g.prototype._transitionTo:g.prototype.goTo,g.prototype.setPosition=function(a,b){this.position.x=parseInt(a,10),this.position.y=parseInt(b,10)},g.prototype._nonTransition=function(a){this.css(a.to),a.isCleaning&&this._removeStyles(a.to);for(var b in a.onTransitionEnd)a.onTransitionEnd[b].call(this)},g.prototype._transition=function(a){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(a);var b=this._transn;for(var c in a.onTransitionEnd)b.onEnd[c]=a.onTransitionEnd[c];for(c in a.to)b.ingProperties[c]=!0,a.isCleaning&&(b.clean[c]=!0);if(a.from){this.css(a.from);var d=this.element.offsetHeight;d=null}this.enableTransition(a.to),this.css(a.to),this.isTransitioning=!0};var r=k&&e.toDashed(k)+",opacity";g.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:r,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(n,this,!1))},g.prototype.transition=g.prototype[j?"_transition":"_nonTransition"],g.prototype.onwebkitTransitionEnd=function(a){this.ontransitionend(a)},g.prototype.onotransitionend=function(a){this.ontransitionend(a)};var s={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};g.prototype.ontransitionend=function(a){if(a.target===this.element){var b=this._transn,c=s[a.propertyName]||a.propertyName;if(delete b.ingProperties[c],f(b.ingProperties)&&this.disableTransition(),c in b.clean&&(this.element.style[a.propertyName]="",delete b.clean[c]),c in b.onEnd){var d=b.onEnd[c];d.call(this),delete b.onEnd[c]}this.emitEvent("transitionEnd",[this])}},g.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(n,this,!1),this.isTransitioning=!1},g.prototype._removeStyles=function(a){var b={};for(var c in a)b[c]="";this.css(b)};var t={transitionProperty:"",transitionDuration:""};return g.prototype.removeTransitionStyles=function(){this.css(t)},g.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},g.prototype.remove=function(){if(!j||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var a=this;this.once("transitionEnd",function(){a.removeElem()}),this.hide()},g.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("visibleStyle");b[c]=this.onRevealTransitionEnd,this.transition({from:a.hiddenStyle,to:a.visibleStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},g.prototype.getHideRevealTransitionEndProperty=function(a){var b=this.layout.options[a];if(b.opacity)return"opacity";for(var c in b)return c},g.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var a=this.layout.options,b={},c=this.getHideRevealTransitionEndProperty("hiddenStyle");b[c]=this.onHideTransitionEnd,this.transition({from:a.visibleStyle,to:a.hiddenStyle,isCleaning:!0,onTransitionEnd:b})},g.prototype.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},g.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},g}),function(a,b){"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","eventEmitter/EventEmitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(c,d,e,f,g){return b(a,c,d,e,f,g)}):"object"==typeof exports?module.exports=b(a,require("eventie"),require("wolfy87-eventemitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):a.Outlayer=b(a,a.eventie,a.EventEmitter,a.getSize,a.fizzyUIUtils,a.Outlayer.Item)}(window,function(a,b,c,d,e,f){function g(a,b){var c=e.getQueryElement(a);if(!c)return void(h&&h.error("Bad element for "+this.constructor.namespace+": "+(c||a)));this.element=c,i&&(this.$element=i(this.element)),this.options=e.extend({},this.constructor.defaults),this.option(b);var d=++k;this.element.outlayerGUID=d,l[d]=this,this._create(),this.options.isInitLayout&&this.layout()}var h=a.console,i=a.jQuery,j=function(){},k=0,l={};return g.namespace="outlayer",g.Item=f,g.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},e.extend(g.prototype,c.prototype),g.prototype.option=function(a){e.extend(this.options,a)},g.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),e.extend(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},g.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},g.prototype._itemize=function(a){for(var b=this._filterFindItemElements(a),c=this.constructor.Item,d=[],e=0,f=b.length;f>e;e++){var g=b[e],h=new c(g,this);d.push(h)}return d},g.prototype._filterFindItemElements=function(a){return e.filterFindElements(a,this.options.itemSelector)},g.prototype.getItemElements=function(){for(var a=[],b=0,c=this.items.length;c>b;b++)a.push(this.items[b].element);return a},g.prototype.layout=function(){this._resetLayout(),this._manageStamps();var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,a),this._isLayoutInited=!0},g.prototype._init=g.prototype.layout,g.prototype._resetLayout=function(){this.getSize()},g.prototype.getSize=function(){this.size=d(this.element)},g.prototype._getMeasurement=function(a,b){var c,f=this.options[a];f?("string"==typeof f?c=this.element.querySelector(f):e.isElement(f)&&(c=f),this[a]=c?d(c)[b]:f):this[a]=0},g.prototype.layoutItems=function(a,b){a=this._getItemsForLayout(a),this._layoutItems(a,b),this._postLayout()},g.prototype._getItemsForLayout=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];e.isIgnored||b.push(e)}return b},g.prototype._layoutItems=function(a,b){if(this._emitCompleteOnItems("layout",a),a&&a.length){for(var c=[],d=0,e=a.length;e>d;d++){var f=a[d],g=this._getItemLayoutPosition(f);g.item=f,g.isInstant=b||f.isLayoutInstant,c.push(g)}this._processLayoutQueue(c)}},g.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},g.prototype._processLayoutQueue=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];this._positionItem(d.item,d.x,d.y,d.isInstant)}},g.prototype._positionItem=function(a,b,c,d){d?a.goTo(b,c):a.moveTo(b,c)},g.prototype._postLayout=function(){this.resizeContainer()},g.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var a=this._getContainerSize();a&&(this._setContainerMeasure(a.width,!0),this._setContainerMeasure(a.height,!1))}},g.prototype._getContainerSize=j,g.prototype._setContainerMeasure=function(a,b){if(void 0!==a){var c=this.size;c.isBorderBox&&(a+=b?c.paddingLeft+c.paddingRight+c.borderLeftWidth+c.borderRightWidth:c.paddingBottom+c.paddingTop+c.borderTopWidth+c.borderBottomWidth),a=Math.max(a,0),this.element.style[b?"width":"height"]=a+"px"}},g.prototype._emitCompleteOnItems=function(a,b){function c(){e.emitEvent(a+"Complete",[b])}function d(){g++,g===f&&c()}var e=this,f=b.length;if(!b||!f)return void c();for(var g=0,h=0,i=b.length;i>h;h++){var j=b[h];j.once(a,d)}},g.prototype.ignore=function(a){var b=this.getItem(a);b&&(b.isIgnored=!0)},g.prototype.unignore=function(a){var b=this.getItem(a);b&&delete b.isIgnored},g.prototype.stamp=function(a){if(a=this._find(a)){this.stamps=this.stamps.concat(a);for(var b=0,c=a.length;c>b;b++){var d=a[b];this.ignore(d)}}},g.prototype.unstamp=function(a){if(a=this._find(a))for(var b=0,c=a.length;c>b;b++){var d=a[b];e.removeFrom(this.stamps,d),this.unignore(d)}},g.prototype._find=function(a){return a?("string"==typeof a&&(a=this.element.querySelectorAll(a)),a=e.makeArray(a)):void 0},g.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var a=0,b=this.stamps.length;b>a;a++){var c=this.stamps[a];this._manageStamp(c)}}},g.prototype._getBoundingRect=function(){var a=this.element.getBoundingClientRect(),b=this.size;this._boundingRect={left:a.left+b.paddingLeft+b.borderLeftWidth,top:a.top+b.paddingTop+b.borderTopWidth,right:a.right-(b.paddingRight+b.borderRightWidth),bottom:a.bottom-(b.paddingBottom+b.borderBottomWidth)}},g.prototype._manageStamp=j,g.prototype._getElementOffset=function(a){var b=a.getBoundingClientRect(),c=this._boundingRect,e=d(a),f={left:b.left-c.left-e.marginLeft,top:b.top-c.top-e.marginTop,right:c.right-b.right-e.marginRight,bottom:c.bottom-b.bottom-e.marginBottom};return f},g.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},g.prototype.bindResize=function(){this.isResizeBound||(b.bind(a,"resize",this),this.isResizeBound=!0)},g.prototype.unbindResize=function(){this.isResizeBound&&b.unbind(a,"resize",this),this.isResizeBound=!1},g.prototype.onresize=function(){function a(){b.resize(),delete b.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var b=this;this.resizeTimeout=setTimeout(a,100)},g.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},g.prototype.needsResizeLayout=function(){var a=d(this.element),b=this.size&&a;return b&&a.innerWidth!==this.size.innerWidth},g.prototype.addItems=function(a){var b=this._itemize(a);return b.length&&(this.items=this.items.concat(b)),b},g.prototype.appended=function(a){var b=this.addItems(a);b.length&&(this.layoutItems(b,!0),this.reveal(b))},g.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){var c=this.items.slice(0);this.items=b.concat(c),this._resetLayout(),this._manageStamps(),this.layoutItems(b,!0),this.reveal(b),this.layoutItems(c)}},g.prototype.reveal=function(a){this._emitCompleteOnItems("reveal",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.reveal()}},g.prototype.hide=function(a){this._emitCompleteOnItems("hide",a);for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.hide()}},g.prototype.revealItemElements=function(a){var b=this.getItems(a);this.reveal(b)},g.prototype.hideItemElements=function(a){var b=this.getItems(a);this.hide(b)},g.prototype.getItem=function(a){for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];if(d.element===a)return d}},g.prototype.getItems=function(a){a=e.makeArray(a);for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c],g=this.getItem(f);g&&b.push(g)}return b},g.prototype.remove=function(a){var b=this.getItems(a);if(this._emitCompleteOnItems("remove",b),b&&b.length)for(var c=0,d=b.length;d>c;c++){var f=b[c];f.remove(),e.removeFrom(this.items,f)}},g.prototype.destroy=function(){var a=this.element.style;a.height="",a.position="",a.width="";for(var b=0,c=this.items.length;c>b;b++){var d=this.items[b];d.destroy()}this.unbindResize();var e=this.element.outlayerGUID;delete l[e],delete this.element.outlayerGUID,i&&i.removeData(this.element,this.constructor.namespace)},g.data=function(a){a=e.getQueryElement(a);var b=a&&a.outlayerGUID;return b&&l[b]},g.create=function(a,b){function c(){g.apply(this,arguments)}return Object.create?c.prototype=Object.create(g.prototype):e.extend(c.prototype,g.prototype),c.prototype.constructor=c,c.defaults=e.extend({},g.defaults),e.extend(c.defaults,b),c.prototype.settings={},c.namespace=a,c.data=g.data,c.Item=function(){f.apply(this,arguments)},c.Item.prototype=new f,e.htmlInit(c,a),i&&i.bridget&&i.bridget(a,c),c},g.Item=f,g}),function(a,b){"function"==typeof define&&define.amd?define("isotope/js/item",["outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.Item=b(a.Outlayer))}(window,function(a){function b(){a.Item.apply(this,arguments)}b.prototype=new a.Item,b.prototype._create=function(){this.id=this.layout.itemGUID++,a.Item.prototype._create.call(this),this.sortData={}},b.prototype.updateSortData=function(){if(!this.isIgnored){this.sortData.id=this.id,this.sortData["original-order"]=this.id,this.sortData.random=Math.random();var a=this.layout.options.getSortData,b=this.layout._sorters;for(var c in a){var d=b[c];this.sortData[c]=d(this.element,this)}}};var c=b.prototype.destroy;return b.prototype.destroy=function(){c.apply(this,arguments),this.css({display:""})},b}),function(a,b){"function"==typeof define&&define.amd?define("isotope/js/layout-mode",["get-size/get-size","outlayer/outlayer"],b):"object"==typeof exports?module.exports=b(require("get-size"),require("outlayer")):(a.Isotope=a.Isotope||{},a.Isotope.LayoutMode=b(a.getSize,a.Outlayer))}(window,function(a,b){function c(a){this.isotope=a,a&&(this.options=a.options[this.namespace],this.element=a.element,this.items=a.filteredItems,this.size=a.size)}return function(){function a(a){return function(){return b.prototype[a].apply(this.isotope,arguments)}}for(var d=["_resetLayout","_getItemLayoutPosition","_manageStamp","_getContainerSize","_getElementOffset","needsResizeLayout"],e=0,f=d.length;f>e;e++){var g=d[e];c.prototype[g]=a(g)}}(),c.prototype.needsVerticalResizeLayout=function(){var b=a(this.isotope.element),c=this.isotope.size&&b;return c&&b.innerHeight!=this.isotope.size.innerHeight},c.prototype._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments)},c.prototype.getColumnWidth=function(){this.getSegmentSize("column","Width")},c.prototype.getRowHeight=function(){this.getSegmentSize("row","Height")},c.prototype.getSegmentSize=function(a,b){var c=a+b,d="outer"+b;if(this._getMeasurement(c,d),!this[c]){var e=this.getFirstItemSize();this[c]=e&&e[d]||this.isotope.size["inner"+b]}},c.prototype.getFirstItemSize=function(){var b=this.isotope.filteredItems[0];return b&&b.element&&a(b.element)},c.prototype.layout=function(){this.isotope.layout.apply(this.isotope,arguments)},c.prototype.getSize=function(){this.isotope.getSize(),this.size=this.isotope.size},c.modes={},c.create=function(a,b){function d(){c.apply(this,arguments)}return d.prototype=new c,b&&(d.options=b),d.prototype.namespace=a,c.modes[a]=d,d},c}),function(a,b){"function"==typeof define&&define.amd?define("masonry/masonry",["outlayer/outlayer","get-size/get-size","fizzy-ui-utils/utils"],b):"object"==typeof exports?module.exports=b(require("outlayer"),require("get-size"),require("fizzy-ui-utils")):a.Masonry=b(a.Outlayer,a.getSize,a.fizzyUIUtils)}(window,function(a,b,c){var d=a.create("masonry");return d.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var a=this.cols;for(this.colYs=[];a--;)this.colYs.push(0);this.maxY=0},d.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var a=this.items[0],c=a&&a.element;this.columnWidth=c&&b(c).outerWidth||this.containerWidth}var d=this.columnWidth+=this.gutter,e=this.containerWidth+this.gutter,f=e/d,g=d-e%d,h=g&&1>g?"round":"floor";f=Math[h](f),this.cols=Math.max(f,1)},d.prototype.getContainerWidth=function(){var a=this.options.isFitWidth?this.element.parentNode:this.element,c=b(a);this.containerWidth=c&&c.innerWidth},d.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth%this.columnWidth,d=b&&1>b?"round":"ceil",e=Math[d](a.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);for(var f=this._getColGroup(e),g=Math.min.apply(Math,f),h=c.indexOf(f,g),i={x:this.columnWidth*h,y:g},j=g+a.size.outerHeight,k=this.cols+1-f.length,l=0;k>l;l++)this.colYs[h+l]=j;return i},d.prototype._getColGroup=function(a){if(2>a)return this.colYs;for(var b=[],c=this.cols+1-a,d=0;c>d;d++){var e=this.colYs.slice(d,d+a);b[d]=Math.max.apply(Math,e)}return b},d.prototype._manageStamp=function(a){var c=b(a),d=this._getElementOffset(a),e=this.options.isOriginLeft?d.left:d.right,f=e+c.outerWidth,g=Math.floor(e/this.columnWidth);g=Math.max(0,g);var h=Math.floor(f/this.columnWidth);
h-=f%this.columnWidth?0:1,h=Math.min(this.cols-1,h);for(var i=(this.options.isOriginTop?d.top:d.bottom)+c.outerHeight,j=g;h>=j;j++)this.colYs[j]=Math.max(i,this.colYs[j])},d.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var a={height:this.maxY};return this.options.isFitWidth&&(a.width=this._getContainerFitWidth()),a},d.prototype._getContainerFitWidth=function(){for(var a=0,b=this.cols;--b&&0===this.colYs[b];)a++;return(this.cols-a)*this.columnWidth-this.gutter},d.prototype.needsResizeLayout=function(){var a=this.containerWidth;return this.getContainerWidth(),a!==this.containerWidth},d}),function(a,b){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/masonry",["../layout-mode","masonry/masonry"],b):"object"==typeof exports?module.exports=b(require("../layout-mode"),require("masonry-layout")):b(a.Isotope.LayoutMode,a.Masonry)}(window,function(a,b){function c(a,b){for(var c in b)a[c]=b[c];return a}var d=a.create("masonry"),e=d.prototype._getElementOffset,f=d.prototype.layout,g=d.prototype._getMeasurement;c(d.prototype,b.prototype),d.prototype._getElementOffset=e,d.prototype.layout=f,d.prototype._getMeasurement=g;var h=d.prototype.measureColumns;d.prototype.measureColumns=function(){this.items=this.isotope.filteredItems,h.call(this)};var i=d.prototype._manageStamp;return d.prototype._manageStamp=function(){this.options.isOriginLeft=this.isotope.options.isOriginLeft,this.options.isOriginTop=this.isotope.options.isOriginTop,i.apply(this,arguments)},d}),function(a,b){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/fit-rows",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){var b=a.create("fitRows");return b.prototype._resetLayout=function(){this.x=0,this.y=0,this.maxY=0,this._getMeasurement("gutter","outerWidth")},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=a.size.outerWidth+this.gutter,c=this.isotope.size.innerWidth+this.gutter;0!==this.x&&b+this.x>c&&(this.x=0,this.y=this.maxY);var d={x:this.x,y:this.y};return this.maxY=Math.max(this.maxY,this.y+a.size.outerHeight),this.x+=b,d},b.prototype._getContainerSize=function(){return{height:this.maxY}},b}),function(a,b){"function"==typeof define&&define.amd?define("isotope/js/layout-modes/vertical",["../layout-mode"],b):"object"==typeof exports?module.exports=b(require("../layout-mode")):b(a.Isotope.LayoutMode)}(window,function(a){var b=a.create("vertical",{horizontalAlignment:0});return b.prototype._resetLayout=function(){this.y=0},b.prototype._getItemLayoutPosition=function(a){a.getSize();var b=(this.isotope.size.innerWidth-a.size.outerWidth)*this.options.horizontalAlignment,c=this.y;return this.y+=a.size.outerHeight,{x:b,y:c}},b.prototype._getContainerSize=function(){return{height:this.y}},b}),function(a,b){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size","matches-selector/matches-selector","fizzy-ui-utils/utils","isotope/js/item","isotope/js/layout-mode","isotope/js/layout-modes/masonry","isotope/js/layout-modes/fit-rows","isotope/js/layout-modes/vertical"],function(c,d,e,f,g,h){return b(a,c,d,e,f,g,h)}):"object"==typeof exports?module.exports=b(a,require("outlayer"),require("get-size"),require("desandro-matches-selector"),require("fizzy-ui-utils"),require("./item"),require("./layout-mode"),require("./layout-modes/masonry"),require("./layout-modes/fit-rows"),require("./layout-modes/vertical")):a.Isotope=b(a,a.Outlayer,a.getSize,a.matchesSelector,a.fizzyUIUtils,a.Isotope.Item,a.Isotope.LayoutMode)}(window,function(a,b,c,d,e,f,g){function h(a,b){return function(c,d){for(var e=0,f=a.length;f>e;e++){var g=a[e],h=c.sortData[g],i=d.sortData[g];if(h>i||i>h){var j=void 0!==b[g]?b[g]:b,k=j?1:-1;return(h>i?1:-1)*k}}return 0}}var i=a.jQuery,j=String.prototype.trim?function(a){return a.trim()}:function(a){return a.replace(/^\s+|\s+$/g,"")},k=document.documentElement,l=k.textContent?function(a){return a.textContent}:function(a){return a.innerText},m=b.create("isotope",{layoutMode:"masonry",isJQueryFiltering:!0,sortAscending:!0});m.Item=f,m.LayoutMode=g,m.prototype._create=function(){this.itemGUID=0,this._sorters={},this._getSorters(),b.prototype._create.call(this),this.modes={},this.filteredItems=this.items,this.sortHistory=["original-order"];for(var a in g.modes)this._initLayoutMode(a)},m.prototype.reloadItems=function(){this.itemGUID=0,b.prototype.reloadItems.call(this)},m.prototype._itemize=function(){for(var a=b.prototype._itemize.apply(this,arguments),c=0,d=a.length;d>c;c++){var e=a[c];e.id=this.itemGUID++}return this._updateItemsSortData(a),a},m.prototype._initLayoutMode=function(a){var b=g.modes[a],c=this.options[a]||{};this.options[a]=b.options?e.extend(b.options,c):c,this.modes[a]=new b(this)},m.prototype.layout=function(){return!this._isLayoutInited&&this.options.isInitLayout?void this.arrange():void this._layout()},m.prototype._layout=function(){var a=this._getIsInstant();this._resetLayout(),this._manageStamps(),this.layoutItems(this.filteredItems,a),this._isLayoutInited=!0},m.prototype.arrange=function(a){function b(){d.reveal(c.needReveal),d.hide(c.needHide)}this.option(a),this._getIsInstant();var c=this._filter(this.items);this.filteredItems=c.matches;var d=this;this._bindArrangeComplete(),this._isInstant?this._noTransition(b):b(),this._sort(),this._layout()},m.prototype._init=m.prototype.arrange,m.prototype._getIsInstant=function(){var a=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;return this._isInstant=a,a},m.prototype._bindArrangeComplete=function(){function a(){b&&c&&d&&e.emitEvent("arrangeComplete",[e.filteredItems])}var b,c,d,e=this;this.once("layoutComplete",function(){b=!0,a()}),this.once("hideComplete",function(){c=!0,a()}),this.once("revealComplete",function(){d=!0,a()})},m.prototype._filter=function(a){var b=this.options.filter;b=b||"*";for(var c=[],d=[],e=[],f=this._getFilterTest(b),g=0,h=a.length;h>g;g++){var i=a[g];if(!i.isIgnored){var j=f(i);j&&c.push(i),j&&i.isHidden?d.push(i):j||i.isHidden||e.push(i)}}return{matches:c,needReveal:d,needHide:e}},m.prototype._getFilterTest=function(a){return i&&this.options.isJQueryFiltering?function(b){return i(b.element).is(a)}:"function"==typeof a?function(b){return a(b.element)}:function(b){return d(b.element,a)}},m.prototype.updateSortData=function(a){var b;a?(a=e.makeArray(a),b=this.getItems(a)):b=this.items,this._getSorters(),this._updateItemsSortData(b)},m.prototype._getSorters=function(){var a=this.options.getSortData;for(var b in a){var c=a[b];this._sorters[b]=n(c)}},m.prototype._updateItemsSortData=function(a){for(var b=a&&a.length,c=0;b&&b>c;c++){var d=a[c];d.updateSortData()}};var n=function(){function a(a){if("string"!=typeof a)return a;var c=j(a).split(" "),d=c[0],e=d.match(/^\[(.+)\]$/),f=e&&e[1],g=b(f,d),h=m.sortDataParsers[c[1]];return a=h?function(a){return a&&h(g(a))}:function(a){return a&&g(a)}}function b(a,b){var c;return c=a?function(b){return b.getAttribute(a)}:function(a){var c=a.querySelector(b);return c&&l(c)}}return a}();m.sortDataParsers={parseInt:function(a){return parseInt(a,10)},parseFloat:function(a){return parseFloat(a)}},m.prototype._sort=function(){var a=this.options.sortBy;if(a){var b=[].concat.apply(a,this.sortHistory),c=h(b,this.options.sortAscending);this.filteredItems.sort(c),a!=this.sortHistory[0]&&this.sortHistory.unshift(a)}},m.prototype._mode=function(){var a=this.options.layoutMode,b=this.modes[a];if(!b)throw new Error("No layout mode: "+a);return b.options=this.options[a],b},m.prototype._resetLayout=function(){b.prototype._resetLayout.call(this),this._mode()._resetLayout()},m.prototype._getItemLayoutPosition=function(a){return this._mode()._getItemLayoutPosition(a)},m.prototype._manageStamp=function(a){this._mode()._manageStamp(a)},m.prototype._getContainerSize=function(){return this._mode()._getContainerSize()},m.prototype.needsResizeLayout=function(){return this._mode().needsResizeLayout()},m.prototype.appended=function(a){var b=this.addItems(a);if(b.length){var c=this._filterRevealAdded(b);this.filteredItems=this.filteredItems.concat(c)}},m.prototype.prepended=function(a){var b=this._itemize(a);if(b.length){this._resetLayout(),this._manageStamps();var c=this._filterRevealAdded(b);this.layoutItems(this.filteredItems),this.filteredItems=c.concat(this.filteredItems),this.items=b.concat(this.items)}},m.prototype._filterRevealAdded=function(a){var b=this._filter(a);return this.hide(b.needHide),this.reveal(b.matches),this.layoutItems(b.matches,!0),b.matches},m.prototype.insert=function(a){var b=this.addItems(a);if(b.length){var c,d,e=b.length;for(c=0;e>c;c++)d=b[c],this.element.appendChild(d.element);var f=this._filter(b).matches;for(c=0;e>c;c++)b[c].isLayoutInstant=!0;for(this.arrange(),c=0;e>c;c++)delete b[c].isLayoutInstant;this.reveal(f)}};var o=m.prototype.remove;return m.prototype.remove=function(a){a=e.makeArray(a);var b=this.getItems(a);o.call(this,a);var c=b&&b.length;if(c)for(var d=0;c>d;d++){var f=b[d];e.removeFrom(this.filteredItems,f)}},m.prototype.shuffle=function(){for(var a=0,b=this.items.length;b>a;a++){var c=this.items[a];c.sortData.random=Math.random()}this.options.sortBy="random",this._sort(),this._layout()},m.prototype._noTransition=function(a){var b=this.options.transitionDuration;this.options.transitionDuration=0;var c=a.call(this);return this.options.transitionDuration=b,c},m.prototype.getFilteredItemElements=function(){for(var a=[],b=0,c=this.filteredItems.length;c>b;b++)a.push(this.filteredItems[b].element);return a},m}),window.Modernizr=function(a,b,c){function d(a){t.cssText=a}function e(a,b){return d(x.join(a+";")+(b||""))}function f(a,b){return typeof a===b}function g(a,b){return!!~(""+a).indexOf(b)}function h(a,b){for(var d in a){var e=a[d];if(!g(e,"-")&&t[e]!==c)return"pfx"==b?e:!0}return!1}function i(a,b,d){for(var e in a){var g=b[a[e]];if(g!==c)return d===!1?a[e]:f(g,"function")?g.bind(d||b):g}return!1}function j(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+z.join(d+" ")+d).split(" ");return f(b,"string")||f(b,"undefined")?h(e,b):(e=(a+" "+A.join(d+" ")+d).split(" "),i(e,b,c))}function k(){o.input=function(c){for(var d=0,e=c.length;e>d;d++)E[c[d]]=!!(c[d]in u);return E.list&&(E.list=!(!b.createElement("datalist")||!a.HTMLDataListElement)),E}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),o.inputtypes=function(a){for(var d,e,f,g=0,h=a.length;h>g;g++)u.setAttribute("type",e=a[g]),d="text"!==u.type,d&&(u.value=v,u.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(e)&&u.style.WebkitAppearance!==c?(q.appendChild(u),f=b.defaultView,d=f.getComputedStyle&&"textfield"!==f.getComputedStyle(u,null).WebkitAppearance&&0!==u.offsetHeight,q.removeChild(u)):/^(search|tel)$/.test(e)||(d=/^(url|email)$/.test(e)?u.checkValidity&&u.checkValidity()===!1:u.value!=v)),D[a[g]]=!!d;return D}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,m,n="2.8.3",o={},p=!0,q=b.documentElement,r="modernizr",s=b.createElement(r),t=s.style,u=b.createElement("input"),v=":)",w={}.toString,x=" -webkit- -moz- -o- -ms- ".split(" "),y="Webkit Moz O ms",z=y.split(" "),A=y.toLowerCase().split(" "),B={svg:"http://www.w3.org/2000/svg"},C={},D={},E={},F=[],G=F.slice,H=function(a,c,d,e){var f,g,h,i,j=b.createElement("div"),k=b.body,l=k||b.createElement("body");if(parseInt(d,10))for(;d--;)h=b.createElement("div"),h.id=e?e[d]:r+(d+1),j.appendChild(h);return f=["&#173;",'<style id="s',r,'">',a,"</style>"].join(""),j.id=r,(k?j:l).innerHTML+=f,l.appendChild(j),k||(l.style.background="",l.style.overflow="hidden",i=q.style.overflow,q.style.overflow="hidden",q.appendChild(l)),g=c(j,a),k?j.parentNode.removeChild(j):(l.parentNode.removeChild(l),q.style.overflow=i),!!g},I=function(b){var c=a.matchMedia||a.msMatchMedia;if(c)return c(b)&&c(b).matches||!1;var d;return H("@media "+b+" { #"+r+" { position: absolute; } }",function(b){d="absolute"==(a.getComputedStyle?getComputedStyle(b,null):b.currentStyle).position}),d},J=function(){function a(a,e){e=e||b.createElement(d[a]||"div"),a="on"+a;var g=a in e;return g||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(a,""),g=f(e[a],"function"),f(e[a],"undefined")||(e[a]=c),e.removeAttribute(a))),e=null,g}var d={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return a}(),K={}.hasOwnProperty;m=f(K,"undefined")||f(K.call,"undefined")?function(a,b){return b in a&&f(a.constructor.prototype[b],"undefined")}:function(a,b){return K.call(a,b)},Function.prototype.bind||(Function.prototype.bind=function(a){var b=this;if("function"!=typeof b)throw new TypeError;var c=G.call(arguments,1),d=function(){if(this instanceof d){var e=function(){};e.prototype=b.prototype;var f=new e,g=b.apply(f,c.concat(G.call(arguments)));return Object(g)===g?g:f}return b.apply(a,c.concat(G.call(arguments)))};return d}),C.flexbox=function(){return j("flexWrap")},C.flexboxlegacy=function(){return j("boxDirection")},C.canvas=function(){var a=b.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))},C.canvastext=function(){return!(!o.canvas||!f(b.createElement("canvas").getContext("2d").fillText,"function"))},C.webgl=function(){return!!a.WebGLRenderingContext},C.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:H(["@media (",x.join("touch-enabled),("),r,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=9===a.offsetTop}),c},C.geolocation=function(){return"geolocation"in navigator},C.postmessage=function(){return!!a.postMessage},C.websqldatabase=function(){return!!a.openDatabase},C.indexedDB=function(){return!!j("indexedDB",a)},C.hashchange=function(){return J("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},C.history=function(){return!(!a.history||!history.pushState)},C.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},C.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},C.rgba=function(){return d("background-color:rgba(150,255,150,.5)"),g(t.backgroundColor,"rgba")},C.hsla=function(){return d("background-color:hsla(120,40%,100%,.5)"),g(t.backgroundColor,"rgba")||g(t.backgroundColor,"hsla")},C.multiplebgs=function(){return d("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(t.background)},C.backgroundsize=function(){return j("backgroundSize")},C.borderimage=function(){return j("borderImage")},C.borderradius=function(){return j("borderRadius")},C.boxshadow=function(){return j("boxShadow")},C.textshadow=function(){return""===b.createElement("div").style.textShadow},C.opacity=function(){return e("opacity:.55"),/^0.55$/.test(t.opacity)},C.cssanimations=function(){return j("animationName")},C.csscolumns=function(){return j("columnCount")},C.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return d((a+"-webkit- ".split(" ").join(b+a)+x.join(c+a)).slice(0,-a.length)),g(t.backgroundImage,"gradient")},C.cssreflections=function(){return j("boxReflect")},C.csstransforms=function(){return!!j("transform")},C.csstransforms3d=function(){var a=!!j("perspective");return a&&"webkitPerspective"in q.style&&H("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=9===b.offsetLeft&&3===b.offsetHeight}),a},C.csstransitions=function(){return j("transition")},C.fontface=function(){var a;return H('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&0===g.indexOf(d.split(" ")[0])}),a},C.generatedcontent=function(){var a;return H(["#",r,"{font:0/0 a}#",r,':after{content:"',v,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},C.video=function(){var a=b.createElement("video"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(d){}return c},C.audio=function(){var a=b.createElement("audio"),c=!1;try{(c=!!a.canPlayType)&&(c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(d){}return c},C.localstorage=function(){try{return localStorage.setItem(r,r),localStorage.removeItem(r),!0}catch(a){return!1}},C.sessionstorage=function(){try{return sessionStorage.setItem(r,r),sessionStorage.removeItem(r),!0}catch(a){return!1}},C.webworkers=function(){return!!a.Worker},C.applicationcache=function(){return!!a.applicationCache},C.svg=function(){return!!b.createElementNS&&!!b.createElementNS(B.svg,"svg").createSVGRect},C.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==B.svg},C.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(w.call(b.createElementNS(B.svg,"animate")))},C.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(w.call(b.createElementNS(B.svg,"clipPath")))};for(var L in C)m(C,L)&&(l=L.toLowerCase(),o[l]=C[L](),F.push((o[l]?"":"no-")+l));return o.input||k(),o.addTest=function(a,b){if("object"==typeof a)for(var d in a)m(a,d)&&o.addTest(d,a[d]);else{if(a=a.toLowerCase(),o[a]!==c)return o;b="function"==typeof b?b():b,"undefined"!=typeof p&&p&&(q.className+=" "+(b?"":"no-")+a),o[a]=b}return o},d(""),s=u=null,function(a,b){function c(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function d(){var a=s.elements;return"string"==typeof a?a.split(" "):a}function e(a){var b=r[a[p]];return b||(b={},q++,a[p]=q,r[q]=b),b}function f(a,c,d){if(c||(c=b),k)return c.createElement(a);d||(d=e(c));var f;return f=d.cache[a]?d.cache[a].cloneNode():o.test(a)?(d.cache[a]=d.createElem(a)).cloneNode():d.createElem(a),!f.canHaveChildren||n.test(a)||f.tagUrn?f:d.frag.appendChild(f)}function g(a,c){if(a||(a=b),k)return a.createDocumentFragment();c=c||e(a);for(var f=c.frag.cloneNode(),g=0,h=d(),i=h.length;i>g;g++)f.createElement(h[g]);return f}function h(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return s.shivMethods?f(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+d().join().replace(/[\w\-]+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(s,b.frag)}function i(a){a||(a=b);var d=e(a);return!s.shivCSS||j||d.hasCSS||(d.hasCSS=!!c(a,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),k||h(a,d),a}var j,k,l="3.7.0",m=a.html5||{},n=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,o=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,p="_html5shiv",q=0,r={};!function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",j="hidden"in a,k=1==a.childNodes.length||function(){b.createElement("a");var a=b.createDocumentFragment();return"undefined"==typeof a.cloneNode||"undefined"==typeof a.createDocumentFragment||"undefined"==typeof a.createElement}()}catch(c){j=!0,k=!0}}();var s={elements:m.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:l,shivCSS:m.shivCSS!==!1,supportsUnknownElements:k,shivMethods:m.shivMethods!==!1,type:"default",shivDocument:i,createElement:f,createDocumentFragment:g};a.html5=s,i(b)}(this,b),o._version=n,o._prefixes=x,o._domPrefixes=A,o._cssomPrefixes=z,o.mq=I,o.hasEvent=J,o.testProp=function(a){return h([a])},o.testAllProps=j,o.testStyles=H,o.prefixed=function(a,b,c){return b?j(a,b,c):j(a,"pfx")},q.className=q.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(p?" js "+F.join(" "):""),o}(this,this.document),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(){var b=c(this),g=f.settings;return isNaN(b.datetime)||(0==g.cutoff||Math.abs(e(b.datetime))<g.cutoff)&&a(this).text(d(b.datetime)),this}function c(b){if(b=a(b),!b.data("timeago")){b.data("timeago",{datetime:f.datetime(b)});var c=a.trim(b.text());f.settings.localeTitle?b.attr("title",b.data("timeago").datetime.toLocaleString()):!(c.length>0)||f.isTime(b)&&b.attr("title")||b.attr("title",c)}return b.data("timeago")}function d(a){return f.inWords(e(a))}function e(a){return(new Date).getTime()-a.getTime()}a.timeago=function(b){return d(b instanceof Date?b:"string"==typeof b?a.timeago.parse(b):"number"==typeof b?new Date(b):a.timeago.datetime(b))};var f=a.timeago;a.extend(a.timeago,{settings:{refreshMillis:6e4,allowPast:!0,allowFuture:!1,localeTitle:!1,cutoff:0,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",inPast:"any moment now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(b){function c(c,e){var f=a.isFunction(c)?c(e,b):c,g=d.numbers&&d.numbers[e]||e;return f.replace(/%d/i,g)}if(!this.settings.allowPast&&!this.settings.allowFuture)throw"timeago allowPast and allowFuture settings can not both be set to false.";var d=this.settings.strings,e=d.prefixAgo,f=d.suffixAgo;if(this.settings.allowFuture&&0>b&&(e=d.prefixFromNow,f=d.suffixFromNow),!this.settings.allowPast&&b>=0)return this.settings.strings.inPast;var g=Math.abs(b)/1e3,h=g/60,i=h/60,j=i/24,k=j/365,l=45>g&&c(d.seconds,Math.round(g))||90>g&&c(d.minute,1)||45>h&&c(d.minutes,Math.round(h))||90>h&&c(d.hour,1)||24>i&&c(d.hours,Math.round(i))||42>i&&c(d.day,1)||30>j&&c(d.days,Math.round(j))||45>j&&c(d.month,1)||365>j&&c(d.months,Math.round(j/30))||1.5>k&&c(d.year,1)||c(d.years,Math.round(k)),m=d.wordSeparator||"";return void 0===d.wordSeparator&&(m=" "),a.trim([e,l,f].join(m))},parse:function(b){var c=a.trim(b);return c=c.replace(/\.\d+/,""),c=c.replace(/-/,"/").replace(/-/,"/"),c=c.replace(/T/," ").replace(/Z/," UTC"),c=c.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),c=c.replace(/([\+\-]\d\d)$/," $100"),new Date(c)},datetime:function(b){var c=f.isTime(b)?a(b).attr("datetime"):a(b).attr("title");return f.parse(c)},isTime:function(b){return"time"===a(b).get(0).tagName.toLowerCase()}});var g={init:function(){var c=a.proxy(b,this);c();var d=f.settings;d.refreshMillis>0&&(this._timeagoInterval=setInterval(c,d.refreshMillis))},update:function(c){var d=f.parse(c);a(this).data("timeago",{datetime:d}),f.settings.localeTitle&&a(this).attr("title",d.toLocaleString()),b.apply(this)},updateFromDOM:function(){a(this).data("timeago",{datetime:f.parse(f.isTime(this)?a(this).attr("datetime"):a(this).attr("title"))}),b.apply(this)},dispose:function(){this._timeagoInterval&&(window.clearInterval(this._timeagoInterval),this._timeagoInterval=null)}};a.fn.timeago=function(a,b){var c=a?g[a]:g.init;if(!c)throw new Error("Unknown function name '"+a+"' for timeago");return this.each(function(){c.call(this,b)}),this},document.createElement("abbr"),document.createElement("time")}),!function(a){var b,c={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},d=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],e=a('<textarea tabindex="-1"/>').data("autosize",!0)[0];e.style.cssText="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;",e.style.lineHeight="99px","99px"===a(e).css("lineHeight")&&d.push("lineHeight"),e.style.lineHeight="",a.fn.autosize=function(f){return this.length?(f=a.extend({},c,f||{}),e.parentNode!==document.body&&a(document.body).append(e),this.each(function(){function c(){var b,c=window.getComputedStyle?window.getComputedStyle(m,null):null;c?(b=parseFloat(c.width),("border-box"===c.boxSizing||"border-box"===c.webkitBoxSizing||"border-box"===c.mozBoxSizing)&&a.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(a,d){b-=parseFloat(c[d])})):b=n.width(),e.style.width=Math.max(b,0)+"px"}function g(){var g={};if(b=m,e.className=f.className,e.id=f.id,j=parseFloat(n.css("maxHeight")),a.each(d,function(a,b){g[b]=n.css(b)}),a(e).css(g).attr("wrap",n.attr("wrap")),c(),window.chrome){var h=m.style.width;m.style.width="0px",m.offsetWidth,m.style.width=h}}function h(){var a,d;b!==m?g():c(),e.value=!m.value&&f.placeholder?n.attr("placeholder")||"":m.value,e.value+=f.append||"",e.style.overflowY=m.style.overflowY,d=parseFloat(m.style.height)||0,e.scrollTop=0,e.scrollTop=9e4,a=e.scrollTop,j&&a>j?(m.style.overflowY="scroll",a=j):(m.style.overflowY="hidden",k>a&&(a=k)),a+=o,Math.abs(d-a)>.01&&(m.style.height=a+"px",e.className=e.className,p&&f.callback.call(m,m),n.trigger("autosize.resized"))}function i(){clearTimeout(l),l=setTimeout(function(){var a=n.width();a!==r&&(r=a,h())},parseInt(f.resizeDelay,10))}var j,k,l,m=this,n=a(m),o=0,p=a.isFunction(f.callback),q={height:m.style.height,overflow:m.style.overflow,overflowY:m.style.overflowY,wordWrap:m.style.wordWrap,resize:m.style.resize},r=n.width(),s=n.css("resize");n.data("autosize")||(n.data("autosize",!0),("border-box"===n.css("box-sizing")||"border-box"===n.css("-moz-box-sizing")||"border-box"===n.css("-webkit-box-sizing"))&&(o=n.outerHeight()-n.height()),k=Math.max(parseFloat(n.css("minHeight"))-o||0,n.height()),n.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===s?n.css("resize","none"):"both"===s&&n.css("resize","horizontal"),"onpropertychange"in m?"oninput"in m?n.on("input.autosize keyup.autosize",h):n.on("propertychange.autosize",function(){"value"===event.propertyName&&h()}):n.on("input.autosize",h),f.resizeDelay!==!1&&a(window).on("resize.autosize",i),n.on("autosize.resize",h),n.on("autosize.resizeIncludeStyle",function(){b=null,h()}),n.on("autosize.destroy",function(){b=null,clearTimeout(l),a(window).off("resize",i),n.off("autosize").off(".autosize").css(q).removeData("autosize")}),h())})):this}}(jQuery||$),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b=!1,c=!1,d=0,e=2e3,f=0,g=["webkit","ms","moz","o"],h=window.requestAnimationFrame||!1,i=window.cancelAnimationFrame||!1;if(!h)for(var j in g){var k=g[j];h||(h=window[k+"RequestAnimationFrame"]),i||(i=window[k+"CancelAnimationFrame"]||window[k+"CancelRequestAnimationFrame"])}var l=window.MutationObserver||window.WebKitMutationObserver||!1,m={zindex:"auto",cursoropacitymin:0,cursoropacitymax:1,cursorcolor:"#424242",cursorwidth:"5px",cursorborder:"1px solid #fff",cursorborderradius:"5px",scrollspeed:60,mousescrollstep:24,touchbehavior:!1,hwacceleration:!0,usetransition:!0,boxzoom:!1,dblclickzoom:!0,gesturezoom:!0,grabcursorenabled:!0,autohidemode:!0,background:"",iframeautoresize:!0,cursorminheight:32,preservenativescrolling:!0,railoffset:!1,railhoffset:!1,bouncescroll:!0,spacebarenabled:!0,railpadding:{top:0,right:0,left:0,bottom:0},disableoutline:!0,horizrailenabled:!0,railalign:"right",railvalign:"bottom",enabletranslate3d:!0,enablemousewheel:!0,enablekeyboard:!0,smoothscroll:!0,sensitiverail:!0,enablemouselockapi:!0,cursorfixedheight:!1,directionlockdeadzone:6,hidecursordelay:400,nativeparentscrolling:!0,enablescrollonselection:!0,overflowx:!0,overflowy:!0,cursordragspeed:.3,rtlmode:"auto",cursordragontouch:!1,oneaxismousemode:"auto",scriptpath:function(){var a=document.getElementsByTagName("script"),a=a[a.length-1].src.split("?")[0];return 0<a.split("/").length?a.split("/").slice(0,-1).join("/")+"/":""}(),preventmultitouchscrolling:!0},n=!1,o=function(){if(n)return n;var a=document.createElement("DIV"),b=a.style,c=navigator.userAgent,d=navigator.platform,e={haspointerlock:"pointerLockElement"in document||"webkitPointerLockElement"in document||"mozPointerLockElement"in document};e.isopera="opera"in window,e.isopera12=e.isopera&&"getUserMedia"in navigator,e.isoperamini="[object OperaMini]"===Object.prototype.toString.call(window.operamini),e.isie="all"in document&&"attachEvent"in a&&!e.isopera,e.isieold=e.isie&&!("msInterpolationMode"in b),e.isie7=!(!e.isie||e.isieold||"documentMode"in document&&7!=document.documentMode),e.isie8=e.isie&&"documentMode"in document&&8==document.documentMode,
e.isie9=e.isie&&"performance"in window&&9<=document.documentMode,e.isie10=e.isie&&"performance"in window&&10==document.documentMode,e.isie11="msRequestFullscreen"in a&&11<=document.documentMode,e.isie9mobile=/iemobile.9/i.test(c),e.isie9mobile&&(e.isie9=!1),e.isie7mobile=!e.isie9mobile&&e.isie7&&/iemobile/i.test(c),e.ismozilla="MozAppearance"in b,e.iswebkit="WebkitAppearance"in b,e.ischrome="chrome"in window,e.ischrome22=e.ischrome&&e.haspointerlock,e.ischrome26=e.ischrome&&"transition"in b,e.cantouch="ontouchstart"in document.documentElement||"ontouchstart"in window,e.hasmstouch=window.MSPointerEvent||!1,e.hasw3ctouch=window.PointerEvent||!1,e.ismac=/^mac$/i.test(d),e.isios=e.cantouch&&/iphone|ipad|ipod/i.test(d),e.isios4=e.isios&&!("seal"in Object),e.isios7=e.isios&&"webkitHidden"in document,e.isandroid=/android/i.test(c),e.haseventlistener="addEventListener"in a,e.trstyle=!1,e.hastransform=!1,e.hastranslate3d=!1,e.transitionstyle=!1,e.hastransition=!1,e.transitionend=!1,d=["transform","msTransform","webkitTransform","MozTransform","OTransform"];for(c=0;c<d.length;c++)if("undefined"!=typeof b[d[c]]){e.trstyle=d[c];break}e.hastransform=!!e.trstyle,e.hastransform&&(b[e.trstyle]="translate3d(1px,2px,3px)",e.hastranslate3d=/translate3d/.test(b[e.trstyle])),e.transitionstyle=!1,e.prefixstyle="",e.transitionend=!1;for(var d="transition webkitTransition msTransition MozTransition OTransition OTransition KhtmlTransition".split(" "),f=" -webkit- -ms- -moz- -o- -o -khtml-".split(" "),g="transitionend webkitTransitionEnd msTransitionEnd transitionend otransitionend oTransitionEnd KhtmlTransitionEnd".split(" "),c=0;c<d.length;c++)if(d[c]in b){e.transitionstyle=d[c],e.prefixstyle=f[c],e.transitionend=g[c];break}e.ischrome26&&(e.prefixstyle=f[1]),e.hastransition=e.transitionstyle;a:{for(c=["-webkit-grab","-moz-grab","grab"],(e.ischrome&&!e.ischrome22||e.isie)&&(c=[]),d=0;d<c.length;d++)if(f=c[d],b.cursor=f,b.cursor==f){b=f;break a}b="url(//mail.google.com/mail/images/2/openhand.cur),n-resize"}return e.cursorgrabvalue=b,e.hasmousecapture="setCapture"in a,e.hasMutationObserver=!1!==l,n=e},p=function(g,j){function k(){var a=t.doc.css(v.trstyle);return a&&"matrix"==a.substr(0,6)?a.replace(/^.*\((.*)\)$/g,"$1").replace(/px/g,"").split(/, +/):!1}function n(){var a=t.win;if("zIndex"in a)return a.zIndex();for(;0<a.length&&9!=a[0].nodeType;){var b=a.css("zIndex");if(!isNaN(b)&&0!=b)return parseInt(b);a=a.parent()}return!1}function p(a,b,c){return b=a.css(b),a=parseFloat(b),isNaN(a)?(a=z[b]||0,c=3==a?c?t.win.outerHeight()-t.win.innerHeight():t.win.outerWidth()-t.win.innerWidth():1,t.isie8&&a&&(a+=1),c?a:0):a}function r(a,b,c,d){t._bind(a,b,function(d){d=d?d:window.event;var e={original:d,target:d.target||d.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==d.type?0:1,deltaX:0,deltaZ:0,preventDefault:function(){return d.preventDefault?d.preventDefault():d.returnValue=!1,!1},stopImmediatePropagation:function(){d.stopImmediatePropagation?d.stopImmediatePropagation():d.cancelBubble=!0}};return"mousewheel"==b?(e.deltaY=-.025*d.wheelDelta,d.wheelDeltaX&&(e.deltaX=-.025*d.wheelDeltaX)):e.deltaY=d.detail,c.call(a,e)},d)}function s(a,b,c){var d,e;if(0==a.deltaMode?(d=-Math.floor(t.opt.mousescrollstep/54*a.deltaX),e=-Math.floor(t.opt.mousescrollstep/54*a.deltaY)):1==a.deltaMode&&(d=-Math.floor(a.deltaX*t.opt.mousescrollstep),e=-Math.floor(a.deltaY*t.opt.mousescrollstep)),b&&t.opt.oneaxismousemode&&0==d&&e&&(d=e,e=0,c&&(0>d?t.getScrollLeft()>=t.page.maxw:0>=t.getScrollLeft())&&(e=d,d=0)),d&&(t.scrollmom&&t.scrollmom.stop(),t.lastdeltax+=d,t.debounced("mousewheelx",function(){var a=t.lastdeltax;t.lastdeltax=0,t.rail.drag||t.doScrollLeftBy(a)},15)),e){if(t.opt.nativeparentscrolling&&c&&!t.ispage&&!t.zoomactive)if(0>e){if(t.getScrollTop()>=t.page.maxh)return!0}else if(0>=t.getScrollTop())return!0;t.scrollmom&&t.scrollmom.stop(),t.lastdeltay+=e,t.debounced("mousewheely",function(){var a=t.lastdeltay;t.lastdeltay=0,t.rail.drag||t.doScrollBy(a)},15)}return a.stopImmediatePropagation(),a.preventDefault()}var t=this;if(this.version="3.6.0",this.name="nicescroll",this.me=j,this.opt={doc:a("body"),win:!1},a.extend(this.opt,m),this.opt.snapbackspeed=80,g)for(var u in t.opt)"undefined"!=typeof g[u]&&(t.opt[u]=g[u]);this.iddoc=(this.doc=t.opt.doc)&&this.doc[0]?this.doc[0].id||"":"",this.ispage=/^BODY|HTML/.test(t.opt.win?t.opt.win[0].nodeName:this.doc[0].nodeName),this.haswrapper=!1!==t.opt.win,this.win=t.opt.win||(this.ispage?a(window):this.doc),this.docscroll=this.ispage&&!this.haswrapper?a(window):this.win,this.body=a("body"),this.iframe=this.isfixed=this.viewport=!1,this.isiframe="IFRAME"==this.doc[0].nodeName&&"IFRAME"==this.win[0].nodeName,this.istextarea="TEXTAREA"==this.win[0].nodeName,this.forcescreen=!1,this.canshowonmouseevent="scroll"!=t.opt.autohidemode,this.page=this.view=this.onzoomout=this.onzoomin=this.onscrollcancel=this.onscrollend=this.onscrollstart=this.onclick=this.ongesturezoom=this.onkeypress=this.onmousewheel=this.onmousemove=this.onmouseup=this.onmousedown=!1,this.scroll={x:0,y:0},this.scrollratio={x:0,y:0},this.cursorheight=20,this.scrollvaluemax=0,this.isrtlmode="auto"==this.opt.rtlmode?"rtl"==(this.win[0]==window?this.body:this.win).css("direction"):!0===this.opt.rtlmode,this.observerbody=this.observerremover=this.observer=this.scrollmom=this.scrollrunning=!1;do this.id="ascrail"+e++;while(document.getElementById(this.id));this.hasmousefocus=this.hasfocus=this.zoomactive=this.zoom=this.selectiondrag=this.cursorfreezed=this.cursor=this.rail=!1,this.visibility=!0,this.hidden=this.locked=this.railslocked=!1,this.cursoractive=!0,this.wheelprevented=!1,this.overflowx=t.opt.overflowx,this.overflowy=t.opt.overflowy,this.nativescrollingarea=!1,this.checkarea=0,this.events=[],this.saved={},this.delaylist={},this.synclist={},this.lastdeltay=this.lastdeltax=0,this.detected=o();var v=a.extend({},this.detected);this.ishwscroll=(this.canhwscroll=v.hastransform&&t.opt.hwacceleration)&&t.haswrapper,this.hasreversehr=this.isrtlmode&&!v.iswebkit,this.istouchcapable=!1,!v.cantouch||v.isios||v.isandroid||!v.iswebkit&&!v.ismozilla||(this.istouchcapable=!0,v.cantouch=!1),t.opt.enablemouselockapi||(v.hasmousecapture=!1,v.haspointerlock=!1),this.debounced=function(a,b,c){var d=t.delaylist[a];t.delaylist[a]=b,d||setTimeout(function(){var b=t.delaylist[a];t.delaylist[a]=!1,b.call(t)},c)};var w=!1;this.synched=function(a,b){return t.synclist[a]=b,function(){w||(h(function(){w=!1;for(var a in t.synclist){var b=t.synclist[a];b&&b.call(t),t.synclist[a]=!1}}),w=!0)}(),a},this.unsynched=function(a){t.synclist[a]&&(t.synclist[a]=!1)},this.css=function(a,b){for(var c in b)t.saved.css.push([a,c,a.css(c)]),a.css(c,b[c])},this.scrollTop=function(a){return"undefined"==typeof a?t.getScrollTop():t.setScrollTop(a)},this.scrollLeft=function(a){return"undefined"==typeof a?t.getScrollLeft():t.setScrollLeft(a)};var x=function(a,b,c,d,e,f,g){this.st=a,this.ed=b,this.spd=c,this.p1=d||0,this.p2=e||1,this.p3=f||0,this.p4=g||1,this.ts=(new Date).getTime(),this.df=this.ed-this.st};if(x.prototype={B2:function(a){return 3*a*a*(1-a)},B3:function(a){return 3*a*(1-a)*(1-a)},B4:function(a){return(1-a)*(1-a)*(1-a)},getNow:function(){var a=1-((new Date).getTime()-this.ts)/this.spd,b=this.B2(a)+this.B3(a)+this.B4(a);return 0>a?this.ed:this.st+Math.round(this.df*b)},update:function(a,b){return this.st=this.getNow(),this.ed=a,this.spd=b,this.ts=(new Date).getTime(),this.df=this.ed-this.st,this}},this.ishwscroll){this.doc.translate={x:0,y:0,tx:"0px",ty:"0px"},v.hastranslate3d&&v.isios&&this.doc.css("-webkit-backface-visibility","hidden"),this.getScrollTop=function(a){if(!a){if(a=k())return 16==a.length?-a[13]:-a[5];if(t.timerscroll&&t.timerscroll.bz)return t.timerscroll.bz.getNow()}return t.doc.translate.y},this.getScrollLeft=function(a){if(!a){if(a=k())return 16==a.length?-a[12]:-a[4];if(t.timerscroll&&t.timerscroll.bh)return t.timerscroll.bh.getNow()}return t.doc.translate.x},this.notifyScrollEvent=function(a){var b=document.createEvent("UIEvents");b.initUIEvent("scroll",!1,!0,window,1),b.niceevent=!0,a.dispatchEvent(b)};var y=this.isrtlmode?1:-1;v.hastranslate3d&&t.opt.enabletranslate3d?(this.setScrollTop=function(a,b){t.doc.translate.y=a,t.doc.translate.ty=-1*a+"px",t.doc.css(v.trstyle,"translate3d("+t.doc.translate.tx+","+t.doc.translate.ty+",0px)"),b||t.notifyScrollEvent(t.win[0])},this.setScrollLeft=function(a,b){t.doc.translate.x=a,t.doc.translate.tx=a*y+"px",t.doc.css(v.trstyle,"translate3d("+t.doc.translate.tx+","+t.doc.translate.ty+",0px)"),b||t.notifyScrollEvent(t.win[0])}):(this.setScrollTop=function(a,b){t.doc.translate.y=a,t.doc.translate.ty=-1*a+"px",t.doc.css(v.trstyle,"translate("+t.doc.translate.tx+","+t.doc.translate.ty+")"),b||t.notifyScrollEvent(t.win[0])},this.setScrollLeft=function(a,b){t.doc.translate.x=a,t.doc.translate.tx=a*y+"px",t.doc.css(v.trstyle,"translate("+t.doc.translate.tx+","+t.doc.translate.ty+")"),b||t.notifyScrollEvent(t.win[0])})}else this.getScrollTop=function(){return t.docscroll.scrollTop()},this.setScrollTop=function(a){return t.docscroll.scrollTop(a)},this.getScrollLeft=function(){return t.detected.ismozilla&&t.isrtlmode?Math.abs(t.docscroll.scrollLeft()):t.docscroll.scrollLeft()},this.setScrollLeft=function(a){return t.docscroll.scrollLeft(t.detected.ismozilla&&t.isrtlmode?-a:a)};this.getTarget=function(a){return a?a.target?a.target:a.srcElement?a.srcElement:!1:!1},this.hasParent=function(a,b){if(!a)return!1;for(var c=a.target||a.srcElement||a||!1;c&&c.id!=b;)c=c.parentNode||!1;return!1!==c};var z={thin:1,medium:3,thick:5};this.getDocumentScrollOffset=function(){return{top:window.pageYOffset||document.documentElement.scrollTop,left:window.pageXOffset||document.documentElement.scrollLeft}},this.getOffset=function(){if(t.isfixed){var a=t.win.offset(),b=t.getDocumentScrollOffset();return a.top-=b.top,a.left-=b.left,a}return a=t.win.offset(),t.viewport?(b=t.viewport.offset(),{top:a.top-b.top,left:a.left-b.left}):a},this.updateScrollBar=function(a){if(t.ishwscroll)t.rail.css({height:t.win.innerHeight()-(t.opt.railpadding.top+t.opt.railpadding.bottom)}),t.railh&&t.railh.css({width:t.win.innerWidth()-(t.opt.railpadding.left+t.opt.railpadding.right)});else{var b=t.getOffset(),c=b.top,d=b.left-(t.opt.railpadding.left+t.opt.railpadding.right),c=c+p(t.win,"border-top-width",!0),d=d+(t.rail.align?t.win.outerWidth()-p(t.win,"border-right-width")-t.rail.width:p(t.win,"border-left-width")),e=t.opt.railoffset;e&&(e.top&&(c+=e.top),t.rail.align&&e.left&&(d+=e.left)),t.railslocked||t.rail.css({top:c,left:d,height:(a?a.h:t.win.innerHeight())-(t.opt.railpadding.top+t.opt.railpadding.bottom)}),t.zoom&&t.zoom.css({top:c+1,left:1==t.rail.align?d-20:d+t.rail.width+4}),t.railh&&!t.railslocked&&(c=b.top,d=b.left,(e=t.opt.railhoffset)&&(e.top&&(c+=e.top),e.left&&(d+=e.left)),a=t.railh.align?c+p(t.win,"border-top-width",!0)+t.win.innerHeight()-t.railh.height:c+p(t.win,"border-top-width",!0),d+=p(t.win,"border-left-width"),t.railh.css({top:a-(t.opt.railpadding.top+t.opt.railpadding.bottom),left:d,width:t.railh.width}))}},this.doRailClick=function(a,b,c){var d;t.railslocked||(t.cancelEvent(a),b?(b=c?t.doScrollLeft:t.doScrollTop,d=c?(a.pageX-t.railh.offset().left-t.cursorwidth/2)*t.scrollratio.x:(a.pageY-t.rail.offset().top-t.cursorheight/2)*t.scrollratio.y,b(d)):(b=c?t.doScrollLeftBy:t.doScrollBy,d=c?t.scroll.x:t.scroll.y,a=c?a.pageX-t.railh.offset().left:a.pageY-t.rail.offset().top,c=c?t.view.w:t.view.h,b(d>=a?c:-c)))},t.hasanimationframe=h,t.hascancelanimationframe=i,t.hasanimationframe?t.hascancelanimationframe||(i=function(){t.cancelAnimationFrame=!0}):(h=function(a){return setTimeout(a,15-Math.floor(+new Date/1e3)%16)},i=clearInterval),this.init=function(){if(t.saved.css=[],v.isie7mobile||v.isoperamini)return!0;if(v.hasmstouch&&t.css(t.ispage?a("html"):t.win,{"-ms-touch-action":"none"}),t.zindex="auto",t.zindex=t.ispage||"auto"!=t.opt.zindex?t.opt.zindex:n()||"auto",!t.ispage&&"auto"!=t.zindex&&t.zindex>f&&(f=t.zindex),t.isie&&0==t.zindex&&"auto"==t.opt.zindex&&(t.zindex="auto"),!t.ispage||!v.cantouch&&!v.isieold&&!v.isie9mobile){var e=t.docscroll;t.ispage&&(e=t.haswrapper?t.win:t.doc),v.isie9mobile||t.css(e,{"overflow-y":"hidden"}),t.ispage&&v.isie7&&("BODY"==t.doc[0].nodeName?t.css(a("html"),{"overflow-y":"hidden"}):"HTML"==t.doc[0].nodeName&&t.css(a("body"),{"overflow-y":"hidden"})),!v.isios||t.ispage||t.haswrapper||t.css(a("body"),{"-webkit-overflow-scrolling":"touch"});var g=a(document.createElement("div"));g.css({position:"relative",top:0,"float":"right",width:t.opt.cursorwidth,height:"0px","background-color":t.opt.cursorcolor,border:t.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":t.opt.cursorborderradius,"-moz-border-radius":t.opt.cursorborderradius,"border-radius":t.opt.cursorborderradius}),g.hborder=parseFloat(g.outerHeight()-g.innerHeight()),g.addClass("nicescroll-cursors"),t.cursor=g;var h=a(document.createElement("div"));h.attr("id",t.id),h.addClass("nicescroll-rails nicescroll-rails-vr");var i,j,k,m=["left","right","top","bottom"];for(k in m)j=m[k],(i=t.opt.railpadding[j])?h.css("padding-"+j,i+"px"):t.opt.railpadding[j]=0;h.append(g),h.width=Math.max(parseFloat(t.opt.cursorwidth),g.outerWidth()),h.css({width:h.width+"px",zIndex:t.zindex,background:t.opt.background,cursor:"default"}),h.visibility=!0,h.scrollable=!0,h.align="left"==t.opt.railalign?0:1,t.rail=h,g=t.rail.drag=!1,!t.opt.boxzoom||t.ispage||v.isieold||(g=document.createElement("div"),t.bind(g,"click",t.doZoom),t.bind(g,"mouseenter",function(){t.zoom.css("opacity",t.opt.cursoropacitymax)}),t.bind(g,"mouseleave",function(){t.zoom.css("opacity",t.opt.cursoropacitymin)}),t.zoom=a(g),t.zoom.css({cursor:"pointer","z-index":t.zindex,backgroundImage:"url("+t.opt.scriptpath+"zoomico.png)",height:18,width:18,backgroundPosition:"0px 0px"}),t.opt.dblclickzoom&&t.bind(t.win,"dblclick",t.doZoom),v.cantouch&&t.opt.gesturezoom&&(t.ongesturezoom=function(a){return 1.5<a.scale&&t.doZoomIn(a),.8>a.scale&&t.doZoomOut(a),t.cancelEvent(a)},t.bind(t.win,"gestureend",t.ongesturezoom))),t.railh=!1;var o;if(t.opt.horizrailenabled&&(t.css(e,{"overflow-x":"hidden"}),g=a(document.createElement("div")),g.css({position:"absolute",top:0,height:t.opt.cursorwidth,width:"0px","background-color":t.opt.cursorcolor,border:t.opt.cursorborder,"background-clip":"padding-box","-webkit-border-radius":t.opt.cursorborderradius,"-moz-border-radius":t.opt.cursorborderradius,"border-radius":t.opt.cursorborderradius}),v.isieold&&g.css({overflow:"hidden"}),g.wborder=parseFloat(g.outerWidth()-g.innerWidth()),g.addClass("nicescroll-cursors"),t.cursorh=g,o=a(document.createElement("div")),o.attr("id",t.id+"-hr"),o.addClass("nicescroll-rails nicescroll-rails-hr"),o.height=Math.max(parseFloat(t.opt.cursorwidth),g.outerHeight()),o.css({height:o.height+"px",zIndex:t.zindex,background:t.opt.background}),o.append(g),o.visibility=!0,o.scrollable=!0,o.align="top"==t.opt.railvalign?0:1,t.railh=o,t.railh.drag=!1),t.ispage?(h.css({position:"fixed",top:"0px",height:"100%"}),h.align?h.css({right:"0px"}):h.css({left:"0px"}),t.body.append(h),t.railh&&(o.css({position:"fixed",left:"0px",width:"100%"}),o.align?o.css({bottom:"0px"}):o.css({top:"0px"}),t.body.append(o))):(t.ishwscroll?("static"==t.win.css("position")&&t.css(t.win,{position:"relative"}),e="HTML"==t.win[0].nodeName?t.body:t.win,a(e).scrollTop(0).scrollLeft(0),t.zoom&&(t.zoom.css({position:"absolute",top:1,right:0,"margin-right":h.width+4}),e.append(t.zoom)),h.css({position:"absolute",top:0}),h.align?h.css({right:0}):h.css({left:0}),e.append(h),o&&(o.css({position:"absolute",left:0,bottom:0}),o.align?o.css({bottom:0}):o.css({top:0}),e.append(o))):(t.isfixed="fixed"==t.win.css("position"),e=t.isfixed?"fixed":"absolute",t.isfixed||(t.viewport=t.getViewport(t.win[0])),t.viewport&&(t.body=t.viewport,0==/fixed|absolute/.test(t.viewport.css("position"))&&t.css(t.viewport,{position:"relative"})),h.css({position:e}),t.zoom&&t.zoom.css({position:e}),t.updateScrollBar(),t.body.append(h),t.zoom&&t.body.append(t.zoom),t.railh&&(o.css({position:e}),t.body.append(o))),v.isios&&t.css(t.win,{"-webkit-tap-highlight-color":"rgba(0,0,0,0)","-webkit-touch-callout":"none"}),v.isie&&t.opt.disableoutline&&t.win.attr("hideFocus","true"),v.iswebkit&&t.opt.disableoutline&&t.win.css({outline:"none"})),!1===t.opt.autohidemode?(t.autohidedom=!1,t.rail.css({opacity:t.opt.cursoropacitymax}),t.railh&&t.railh.css({opacity:t.opt.cursoropacitymax})):!0===t.opt.autohidemode||"leave"===t.opt.autohidemode?(t.autohidedom=a().add(t.rail),v.isie8&&(t.autohidedom=t.autohidedom.add(t.cursor)),t.railh&&(t.autohidedom=t.autohidedom.add(t.railh)),t.railh&&v.isie8&&(t.autohidedom=t.autohidedom.add(t.cursorh))):"scroll"==t.opt.autohidemode?(t.autohidedom=a().add(t.rail),t.railh&&(t.autohidedom=t.autohidedom.add(t.railh))):"cursor"==t.opt.autohidemode?(t.autohidedom=a().add(t.cursor),t.railh&&(t.autohidedom=t.autohidedom.add(t.cursorh))):"hidden"==t.opt.autohidemode&&(t.autohidedom=!1,t.hide(),t.railslocked=!1),v.isie9mobile)t.scrollmom=new q(t),t.onmangotouch=function(){var a=t.getScrollTop(),b=t.getScrollLeft();if(a==t.scrollmom.lastscrolly&&b==t.scrollmom.lastscrollx)return!0;var c=a-t.mangotouch.sy,d=b-t.mangotouch.sx;if(0!=Math.round(Math.sqrt(Math.pow(d,2)+Math.pow(c,2)))){var e=0>c?-1:1,f=0>d?-1:1,g=+new Date;t.mangotouch.lazy&&clearTimeout(t.mangotouch.lazy),80<g-t.mangotouch.tm||t.mangotouch.dry!=e||t.mangotouch.drx!=f?(t.scrollmom.stop(),t.scrollmom.reset(b,a),t.mangotouch.sy=a,t.mangotouch.ly=a,t.mangotouch.sx=b,t.mangotouch.lx=b,t.mangotouch.dry=e,t.mangotouch.drx=f,t.mangotouch.tm=g):(t.scrollmom.stop(),t.scrollmom.update(t.mangotouch.sx-d,t.mangotouch.sy-c),t.mangotouch.tm=g,c=Math.max(Math.abs(t.mangotouch.ly-a),Math.abs(t.mangotouch.lx-b)),t.mangotouch.ly=a,t.mangotouch.lx=b,c>2&&(t.mangotouch.lazy=setTimeout(function(){t.mangotouch.lazy=!1,t.mangotouch.dry=0,t.mangotouch.drx=0,t.mangotouch.tm=0,t.scrollmom.doMomentum(30)},100)))}},h=t.getScrollTop(),o=t.getScrollLeft(),t.mangotouch={sy:h,ly:h,dry:0,sx:o,lx:o,drx:0,lazy:!1,tm:0},t.bind(t.docscroll,"scroll",t.onmangotouch);else{if(v.cantouch||t.istouchcapable||t.opt.touchbehavior||v.hasmstouch){t.scrollmom=new q(t),t.ontouchstart=function(b){if(b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;if(t.hasmoving=!1,!t.railslocked){var c;if(v.hasmstouch)for(c=b.target?b.target:!1;c;){var d=a(c).getNiceScroll();if(0<d.length&&d[0].me==t.me)break;if(0<d.length)return!1;if("DIV"==c.nodeName&&c.id==t.id)break;c=c.parentNode?c.parentNode:!1}if(t.cancelScroll(),(c=t.getTarget(b))&&/INPUT/i.test(c.nodeName)&&/range/i.test(c.type))return t.stopPropagation(b);if(!("clientX"in b)&&"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY),t.forcescreen&&(d=b,b={original:b.original?b.original:b},b.clientX=d.screenX,b.clientY=d.screenY),t.rail.drag={x:b.clientX,y:b.clientY,sx:t.scroll.x,sy:t.scroll.y,st:t.getScrollTop(),sl:t.getScrollLeft(),pt:2,dl:!1},t.ispage||!t.opt.directionlockdeadzone)t.rail.drag.dl="f";else{var d=a(window).width(),e=a(window).height(),f=Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),g=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight),e=Math.max(0,g-e),d=Math.max(0,f-d);t.rail.drag.ck=!t.rail.scrollable&&t.railh.scrollable?e>0?"v":!1:t.rail.scrollable&&!t.railh.scrollable&&d>0?"h":!1,t.rail.drag.ck||(t.rail.drag.dl="f")}if(t.opt.touchbehavior&&t.isiframe&&v.isie&&(d=t.win.position(),t.rail.drag.x+=d.left,t.rail.drag.y+=d.top),t.hasmoving=!1,t.lastmouseup=!1,t.scrollmom.reset(b.clientX,b.clientY),!v.cantouch&&!this.istouchcapable&&!b.pointerType){if(!c||!/INPUT|SELECT|TEXTAREA/i.test(c.nodeName))return!t.ispage&&v.hasmousecapture&&c.setCapture(),t.opt.touchbehavior?(c.onclick&&!c._onclick&&(c._onclick=c.onclick,c.onclick=function(a){return t.hasmoving?!1:void c._onclick.call(this,a)}),t.cancelEvent(b)):t.stopPropagation(b);/SUBMIT|CANCEL|BUTTON/i.test(a(c).attr("type"))&&(pc={tg:c,click:!1},t.preventclick=pc)}}},t.ontouchend=function(a){if(!t.rail.drag)return!0;if(2==t.rail.drag.pt){if(a.pointerType&&2!=a.pointerType&&"touch"!=a.pointerType)return!1;if(t.scrollmom.doMomentum(),t.rail.drag=!1,t.hasmoving&&(t.lastmouseup=!0,t.hideCursor(),v.hasmousecapture&&document.releaseCapture(),!v.cantouch))return t.cancelEvent(a)}else if(1==t.rail.drag.pt)return t.onmouseup(a)};var p=t.opt.touchbehavior&&t.isiframe&&!v.hasmousecapture;t.ontouchmove=function(b,c){if(!t.rail.drag||b.targetTouches&&t.opt.preventmultitouchscrolling&&1<b.targetTouches.length||b.pointerType&&2!=b.pointerType&&"touch"!=b.pointerType)return!1;if(2==t.rail.drag.pt){if(v.cantouch&&v.isios&&"undefined"==typeof b.original)return!0;if(t.hasmoving=!0,t.preventclick&&!t.preventclick.click&&(t.preventclick.click=t.preventclick.tg.onclick||!1,t.preventclick.tg.onclick=t.onpreventclick),b=a.extend({original:b},b),"changedTouches"in b&&(b.clientX=b.changedTouches[0].clientX,b.clientY=b.changedTouches[0].clientY),t.forcescreen){var d=b;b={original:b.original?b.original:b},b.clientX=d.screenX,b.clientY=d.screenY}var e,d=e=0;p&&!c&&(e=t.win.position(),d=-e.left,e=-e.top);var f=b.clientY+e;e=f-t.rail.drag.y;var g=b.clientX+d,h=g-t.rail.drag.x,i=t.rail.drag.st-e;t.ishwscroll&&t.opt.bouncescroll?0>i?i=Math.round(i/2):i>t.page.maxh&&(i=t.page.maxh+Math.round((i-t.page.maxh)/2)):(0>i&&(f=i=0),i>t.page.maxh&&(i=t.page.maxh,f=0));var j;if(t.railh&&t.railh.scrollable&&(j=t.isrtlmode?h-t.rail.drag.sl:t.rail.drag.sl-h,t.ishwscroll&&t.opt.bouncescroll?0>j?j=Math.round(j/2):j>t.page.maxw&&(j=t.page.maxw+Math.round((j-t.page.maxw)/2)):(0>j&&(g=j=0),j>t.page.maxw&&(j=t.page.maxw,g=0))),d=!1,t.rail.drag.dl)d=!0,"v"==t.rail.drag.dl?j=t.rail.drag.sl:"h"==t.rail.drag.dl&&(i=t.rail.drag.st);else{e=Math.abs(e);var h=Math.abs(h),k=t.opt.directionlockdeadzone;if("v"==t.rail.drag.ck){if(e>k&&.3*e>=h)return t.rail.drag=!1,!0;h>k&&(t.rail.drag.dl="f",a("body").scrollTop(a("body").scrollTop()))}else if("h"==t.rail.drag.ck){if(h>k&&.3*h>=e)return t.rail.drag=!1,!0;e>k&&(t.rail.drag.dl="f",a("body").scrollLeft(a("body").scrollLeft()))}}if(t.synched("touchmove",function(){t.rail.drag&&2==t.rail.drag.pt&&(t.prepareTransition&&t.prepareTransition(0),t.rail.scrollable&&t.setScrollTop(i),t.scrollmom.update(g,f),t.railh&&t.railh.scrollable?(t.setScrollLeft(j),t.showCursor(i,j)):t.showCursor(i),v.isie10&&document.selection.clear())}),v.ischrome&&t.istouchcapable&&(d=!1),d)return t.cancelEvent(b)}else if(1==t.rail.drag.pt)return t.onmousemove(b)}}if(t.onmousedown=function(a,b){if(!t.rail.drag||1==t.rail.drag.pt){if(t.railslocked)return t.cancelEvent(a);t.cancelScroll(),t.rail.drag={x:a.clientX,y:a.clientY,sx:t.scroll.x,sy:t.scroll.y,pt:1,hr:!!b};var c=t.getTarget(a);return!t.ispage&&v.hasmousecapture&&c.setCapture(),t.isiframe&&!v.hasmousecapture&&(t.saved.csspointerevents=t.doc.css("pointer-events"),t.css(t.doc,{"pointer-events":"none"})),t.hasmoving=!1,t.cancelEvent(a)}},t.onmouseup=function(a){return t.rail.drag?1!=t.rail.drag.pt?!0:(v.hasmousecapture&&document.releaseCapture(),t.isiframe&&!v.hasmousecapture&&t.doc.css("pointer-events",t.saved.csspointerevents),t.rail.drag=!1,t.hasmoving&&t.triggerScrollEnd(),t.cancelEvent(a)):void 0},t.onmousemove=function(a){if(t.rail.drag&&1==t.rail.drag.pt){if(v.ischrome&&0==a.which)return t.onmouseup(a);if(t.cursorfreezed=!0,t.hasmoving=!0,t.rail.drag.hr){t.scroll.x=t.rail.drag.sx+(a.clientX-t.rail.drag.x),0>t.scroll.x&&(t.scroll.x=0);var b=t.scrollvaluemaxw;t.scroll.x>b&&(t.scroll.x=b)}else t.scroll.y=t.rail.drag.sy+(a.clientY-t.rail.drag.y),0>t.scroll.y&&(t.scroll.y=0),b=t.scrollvaluemax,t.scroll.y>b&&(t.scroll.y=b);return t.synched("mousemove",function(){t.rail.drag&&1==t.rail.drag.pt&&(t.showCursor(),t.rail.drag.hr?t.hasreversehr?t.doScrollLeft(t.scrollvaluemaxw-Math.round(t.scroll.x*t.scrollratio.x),t.opt.cursordragspeed):t.doScrollLeft(Math.round(t.scroll.x*t.scrollratio.x),t.opt.cursordragspeed):t.doScrollTop(Math.round(t.scroll.y*t.scrollratio.y),t.opt.cursordragspeed))}),t.cancelEvent(a)}},v.cantouch||t.opt.touchbehavior)t.onpreventclick=function(a){return t.preventclick?(t.preventclick.tg.onclick=t.preventclick.click,t.preventclick=!1,t.cancelEvent(a)):void 0},t.bind(t.win,"mousedown",t.ontouchstart),t.onclick=v.isios?!1:function(a){return t.lastmouseup?(t.lastmouseup=!1,t.cancelEvent(a)):!0},t.opt.grabcursorenabled&&v.cursorgrabvalue&&(t.css(t.ispage?t.doc:t.win,{cursor:v.cursorgrabvalue}),t.css(t.rail,{cursor:v.cursorgrabvalue}));else{var r=function(a){if(t.selectiondrag){if(a){var b=t.win.outerHeight();a=a.pageY-t.selectiondrag.top,a>0&&b>a&&(a=0),a>=b&&(a-=b),t.selectiondrag.df=a}0!=t.selectiondrag.df&&(t.doScrollBy(2*-Math.floor(t.selectiondrag.df/6)),t.debounced("doselectionscroll",function(){r()},50))}};t.hasTextSelected="getSelection"in document?function(){return 0<document.getSelection().rangeCount}:"selection"in document?function(){return"None"!=document.selection.type}:function(){return!1},t.onselectionstart=function(a){t.ispage||(t.selectiondrag=t.win.offset())},t.onselectionend=function(a){t.selectiondrag=!1},t.onselectiondrag=function(a){t.selectiondrag&&t.hasTextSelected()&&t.debounced("selectionscroll",function(){r(a)},250)}}v.hasw3ctouch?(t.css(t.rail,{"touch-action":"none"}),t.css(t.cursor,{"touch-action":"none"}),t.bind(t.win,"pointerdown",t.ontouchstart),t.bind(document,"pointerup",t.ontouchend),t.bind(document,"pointermove",t.ontouchmove)):v.hasmstouch?(t.css(t.rail,{"-ms-touch-action":"none"}),t.css(t.cursor,{"-ms-touch-action":"none"}),t.bind(t.win,"MSPointerDown",t.ontouchstart),t.bind(document,"MSPointerUp",t.ontouchend),t.bind(document,"MSPointerMove",t.ontouchmove),t.bind(t.cursor,"MSGestureHold",function(a){a.preventDefault()}),t.bind(t.cursor,"contextmenu",function(a){a.preventDefault()})):this.istouchcapable&&(t.bind(t.win,"touchstart",t.ontouchstart),t.bind(document,"touchend",t.ontouchend),t.bind(document,"touchcancel",t.ontouchend),t.bind(document,"touchmove",t.ontouchmove)),(t.opt.cursordragontouch||!v.cantouch&&!t.opt.touchbehavior)&&(t.rail.css({cursor:"default"}),t.railh&&t.railh.css({cursor:"default"}),t.jqbind(t.rail,"mouseenter",function(){return t.ispage||t.win.is(":visible")?(t.canshowonmouseevent&&t.showCursor(),void(t.rail.active=!0)):!1}),t.jqbind(t.rail,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}),t.opt.sensitiverail&&(t.bind(t.rail,"click",function(a){t.doRailClick(a,!1,!1)}),t.bind(t.rail,"dblclick",function(a){t.doRailClick(a,!0,!1)}),t.bind(t.cursor,"click",function(a){t.cancelEvent(a)}),t.bind(t.cursor,"dblclick",function(a){t.cancelEvent(a)})),t.railh&&(t.jqbind(t.railh,"mouseenter",function(){return t.ispage||t.win.is(":visible")?(t.canshowonmouseevent&&t.showCursor(),void(t.rail.active=!0)):!1}),t.jqbind(t.railh,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}),t.opt.sensitiverail&&(t.bind(t.railh,"click",function(a){t.doRailClick(a,!1,!0)}),t.bind(t.railh,"dblclick",function(a){t.doRailClick(a,!0,!0)}),t.bind(t.cursorh,"click",function(a){t.cancelEvent(a)}),t.bind(t.cursorh,"dblclick",function(a){t.cancelEvent(a)})))),v.cantouch||t.opt.touchbehavior?(t.bind(v.hasmousecapture?t.win:document,"mouseup",t.ontouchend),t.bind(document,"mousemove",t.ontouchmove),t.onclick&&t.bind(document,"click",t.onclick),t.opt.cursordragontouch&&(t.bind(t.cursor,"mousedown",t.onmousedown),t.bind(t.cursor,"mouseup",t.onmouseup),t.cursorh&&t.bind(t.cursorh,"mousedown",function(a){t.onmousedown(a,!0)}),t.cursorh&&t.bind(t.cursorh,"mouseup",t.onmouseup))):(t.bind(v.hasmousecapture?t.win:document,"mouseup",t.onmouseup),t.bind(document,"mousemove",t.onmousemove),t.onclick&&t.bind(document,"click",t.onclick),t.bind(t.cursor,"mousedown",t.onmousedown),t.bind(t.cursor,"mouseup",t.onmouseup),t.railh&&(t.bind(t.cursorh,"mousedown",function(a){t.onmousedown(a,!0)}),t.bind(t.cursorh,"mouseup",t.onmouseup)),!t.ispage&&t.opt.enablescrollonselection&&(t.bind(t.win[0],"mousedown",t.onselectionstart),t.bind(document,"mouseup",t.onselectionend),t.bind(t.cursor,"mouseup",t.onselectionend),t.cursorh&&t.bind(t.cursorh,"mouseup",t.onselectionend),t.bind(document,"mousemove",t.onselectiondrag)),t.zoom&&(t.jqbind(t.zoom,"mouseenter",function(){t.canshowonmouseevent&&t.showCursor(),t.rail.active=!0}),t.jqbind(t.zoom,"mouseleave",function(){t.rail.active=!1,t.rail.drag||t.hideCursor()}))),t.opt.enablemousewheel&&(t.isiframe||t.bind(v.isie&&t.ispage?document:t.win,"mousewheel",t.onmousewheel),t.bind(t.rail,"mousewheel",t.onmousewheel),t.railh&&t.bind(t.railh,"mousewheel",t.onmousewheelhr)),t.ispage||v.cantouch||/HTML|^BODY/.test(t.win[0].nodeName)||(t.win.attr("tabindex")||t.win.attr({tabindex:d++}),t.jqbind(t.win,"focus",function(a){b=t.getTarget(a).id||!0,t.hasfocus=!0,t.canshowonmouseevent&&t.noticeCursor()}),t.jqbind(t.win,"blur",function(a){b=!1,t.hasfocus=!1}),t.jqbind(t.win,"mouseenter",function(a){c=t.getTarget(a).id||!0,t.hasmousefocus=!0,t.canshowonmouseevent&&t.noticeCursor()}),t.jqbind(t.win,"mouseleave",function(){c=!1,t.hasmousefocus=!1,t.rail.drag||t.hideCursor()}))}if(t.onkeypress=function(d){if(t.railslocked&&0==t.page.maxh)return!0;d=d?d:window.e;var e=t.getTarget(d);if(e&&/INPUT|TEXTAREA|SELECT|OPTION/.test(e.nodeName)&&(!e.getAttribute("type")&&!e.type||!/submit|button|cancel/i.tp)||a(e).attr("contenteditable"))return!0;if(t.hasfocus||t.hasmousefocus&&!b||t.ispage&&!b&&!c){if(e=d.keyCode,t.railslocked&&27!=e)return t.cancelEvent(d);var f=d.ctrlKey||!1,g=d.shiftKey||!1,h=!1;switch(e){case 38:case 63233:t.doScrollBy(72),h=!0;break;case 40:case 63235:t.doScrollBy(-72),h=!0;break;case 37:case 63232:t.railh&&(f?t.doScrollLeft(0):t.doScrollLeftBy(72),h=!0);break;case 39:case 63234:t.railh&&(f?t.doScrollLeft(t.page.maxw):t.doScrollLeftBy(-72),h=!0);break;case 33:case 63276:t.doScrollBy(t.view.h),h=!0;break;case 34:case 63277:t.doScrollBy(-t.view.h),h=!0;break;case 36:case 63273:t.railh&&f?t.doScrollPos(0,0):t.doScrollTo(0),h=!0;break;case 35:case 63275:t.railh&&f?t.doScrollPos(t.page.maxw,t.page.maxh):t.doScrollTo(t.page.maxh),h=!0;break;case 32:t.opt.spacebarenabled&&(g?t.doScrollBy(t.view.h):t.doScrollBy(-t.view.h),h=!0);break;case 27:t.zoomactive&&(t.doZoom(),h=!0)}if(h)return t.cancelEvent(d)}},t.opt.enablekeyboard&&t.bind(document,v.isopera&&!v.isopera12?"keypress":"keydown",t.onkeypress),t.bind(document,"keydown",function(a){a.ctrlKey&&(t.wheelprevented=!0)}),t.bind(document,"keyup",function(a){a.ctrlKey||(t.wheelprevented=!1)}),t.bind(window,"blur",function(a){t.wheelprevented=!1}),t.bind(window,"resize",t.lazyResize),t.bind(window,"orientationchange",t.lazyResize),t.bind(window,"load",t.lazyResize),v.ischrome&&!t.ispage&&!t.haswrapper){var s=t.win.attr("style"),h=parseFloat(t.win.css("width"))+1;t.win.css("width",h),t.synched("chromefix",function(){t.win.attr("style",s)})}t.onAttributeChange=function(a){t.lazyResize(t.isieold?250:30)},!1!==l&&(t.observerbody=new l(function(b){return b.forEach(function(b){return"attributes"==b.type?a("body").hasClass("modal-open")?t.hide():t.show():void 0}),document.body.scrollHeight!=t.page.maxh?t.lazyResize(30):void 0}),t.observerbody.observe(document.body,{childList:!0,subtree:!0,characterData:!1,attributes:!0,attributeFilter:["class"]})),t.ispage||t.haswrapper||(!1!==l?(t.observer=new l(function(a){a.forEach(t.onAttributeChange)}),t.observer.observe(t.win[0],{childList:!0,characterData:!1,attributes:!0,subtree:!1}),t.observerremover=new l(function(a){a.forEach(function(a){if(0<a.removedNodes.length)for(var b in a.removedNodes)if(t&&a.removedNodes[b]==t.win[0])return t.remove()})}),t.observerremover.observe(t.win[0].parentNode,{childList:!0,characterData:!1,attributes:!1,subtree:!1})):(t.bind(t.win,v.isie&&!v.isie9?"propertychange":"DOMAttrModified",t.onAttributeChange),v.isie9&&t.win[0].attachEvent("onpropertychange",t.onAttributeChange),t.bind(t.win,"DOMNodeRemoved",function(a){a.target==t.win[0]&&t.remove()}))),!t.ispage&&t.opt.boxzoom&&t.bind(window,"resize",t.resizeZoom),
t.istextarea&&t.bind(t.win,"mouseup",t.lazyResize),t.lazyResize(30)}if("IFRAME"==this.doc[0].nodeName){var u=function(){t.iframexd=!1;var b;try{b="contentDocument"in this?this.contentDocument:this.contentWindow.document}catch(c){t.iframexd=!0,b=!1}if(t.iframexd)return"console"in window&&console.log("NiceScroll error: policy restriced iframe"),!0;if(t.forcescreen=!0,t.isiframe&&(t.iframe={doc:a(b),html:t.doc.contents().find("html")[0],body:t.doc.contents().find("body")[0]},t.getContentSize=function(){return{w:Math.max(t.iframe.html.scrollWidth,t.iframe.body.scrollWidth),h:Math.max(t.iframe.html.scrollHeight,t.iframe.body.scrollHeight)}},t.docscroll=a(t.iframe.body)),!v.isios&&t.opt.iframeautoresize&&!t.isiframe){t.win.scrollTop(0),t.doc.height("");var d=Math.max(b.getElementsByTagName("html")[0].scrollHeight,b.body.scrollHeight);t.doc.height(d)}t.lazyResize(30),v.isie7&&t.css(a(t.iframe.html),{"overflow-y":"hidden"}),t.css(a(t.iframe.body),{"overflow-y":"hidden"}),v.isios&&t.haswrapper&&t.css(a(b.body),{"-webkit-transform":"translate3d(0,0,0)"}),"contentWindow"in this?t.bind(this.contentWindow,"scroll",t.onscroll):t.bind(b,"scroll",t.onscroll),t.opt.enablemousewheel&&t.bind(b,"mousewheel",t.onmousewheel),t.opt.enablekeyboard&&t.bind(b,v.isopera?"keypress":"keydown",t.onkeypress),(v.cantouch||t.opt.touchbehavior)&&(t.bind(b,"mousedown",t.ontouchstart),t.bind(b,"mousemove",function(a){return t.ontouchmove(a,!0)}),t.opt.grabcursorenabled&&v.cursorgrabvalue&&t.css(a(b.body),{cursor:v.cursorgrabvalue})),t.bind(b,"mouseup",t.ontouchend),t.zoom&&(t.opt.dblclickzoom&&t.bind(b,"dblclick",t.doZoom),t.ongesturezoom&&t.bind(b,"gestureend",t.ongesturezoom))};this.doc[0].readyState&&"complete"==this.doc[0].readyState&&setTimeout(function(){u.call(t.doc[0],!1)},500),t.bind(this.doc,"load",u)}},this.showCursor=function(a,b){if(t.cursortimeout&&(clearTimeout(t.cursortimeout),t.cursortimeout=0),t.rail){if(t.autohidedom&&(t.autohidedom.stop().css({opacity:t.opt.cursoropacitymax}),t.cursoractive=!0),t.rail.drag&&1==t.rail.drag.pt||("undefined"!=typeof a&&!1!==a&&(t.scroll.y=Math.round(1*a/t.scrollratio.y)),"undefined"!=typeof b&&(t.scroll.x=Math.round(1*b/t.scrollratio.x))),t.cursor.css({height:t.cursorheight,top:t.scroll.y}),t.cursorh){var c=t.hasreversehr?t.scrollvaluemaxw-t.scroll.x:t.scroll.x;!t.rail.align&&t.rail.visibility?t.cursorh.css({width:t.cursorwidth,left:c+t.rail.width}):t.cursorh.css({width:t.cursorwidth,left:c}),t.cursoractive=!0}t.zoom&&t.zoom.stop().css({opacity:t.opt.cursoropacitymax})}},this.hideCursor=function(a){t.cursortimeout||!t.rail||!t.autohidedom||t.hasmousefocus&&"leave"==t.opt.autohidemode||(t.cursortimeout=setTimeout(function(){t.rail.active&&t.showonmouseevent||(t.autohidedom.stop().animate({opacity:t.opt.cursoropacitymin}),t.zoom&&t.zoom.stop().animate({opacity:t.opt.cursoropacitymin}),t.cursoractive=!1),t.cursortimeout=0},a||t.opt.hidecursordelay))},this.noticeCursor=function(a,b,c){t.showCursor(b,c),t.rail.active||t.hideCursor(a)},this.getContentSize=t.ispage?function(){return{w:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth),h:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)}}:t.haswrapper?function(){return{w:t.doc.outerWidth()+parseInt(t.win.css("paddingLeft"))+parseInt(t.win.css("paddingRight")),h:t.doc.outerHeight()+parseInt(t.win.css("paddingTop"))+parseInt(t.win.css("paddingBottom"))}}:function(){return{w:t.docscroll[0].scrollWidth,h:t.docscroll[0].scrollHeight}},this.onResize=function(a,b){if(!t||!t.win)return!1;if(!t.haswrapper&&!t.ispage){if("none"==t.win.css("display"))return t.visibility&&t.hideRail().hideRailHr(),!1;t.hidden||t.visibility||t.showRail().showRailHr()}var c=t.page.maxh,d=t.page.maxw,e=t.view.h,f=t.view.w;if(t.view={w:t.ispage?t.win.width():parseInt(t.win[0].clientWidth),h:t.ispage?t.win.height():parseInt(t.win[0].clientHeight)},t.page=b?b:t.getContentSize(),t.page.maxh=Math.max(0,t.page.h-t.view.h),t.page.maxw=Math.max(0,t.page.w-t.view.w),t.page.maxh==c&&t.page.maxw==d&&t.view.w==f&&t.view.h==e){if(t.ispage)return t;if(c=t.win.offset(),t.lastposition&&(d=t.lastposition,d.top==c.top&&d.left==c.left))return t;t.lastposition=c}return 0==t.page.maxh?(t.hideRail(),t.scrollvaluemax=0,t.scroll.y=0,t.scrollratio.y=0,t.cursorheight=0,t.setScrollTop(0),t.rail.scrollable=!1):(t.page.maxh-=t.opt.railpadding.top+t.opt.railpadding.bottom,t.rail.scrollable=!0),0==t.page.maxw?(t.hideRailHr(),t.scrollvaluemaxw=0,t.scroll.x=0,t.scrollratio.x=0,t.cursorwidth=0,t.setScrollLeft(0),t.railh.scrollable=!1):(t.page.maxw-=t.opt.railpadding.left+t.opt.railpadding.right,t.railh.scrollable=!0),t.railslocked=t.locked||0==t.page.maxh&&0==t.page.maxw,t.railslocked?(t.ispage||t.updateScrollBar(t.view),!1):(t.hidden||t.visibility?t.hidden||t.railh.visibility||t.showRailHr():t.showRail().showRailHr(),t.istextarea&&t.win.css("resize")&&"none"!=t.win.css("resize")&&(t.view.h-=20),t.cursorheight=Math.min(t.view.h,Math.round(t.view.h/t.page.h*t.view.h)),t.cursorheight=t.opt.cursorfixedheight?t.opt.cursorfixedheight:Math.max(t.opt.cursorminheight,t.cursorheight),t.cursorwidth=Math.min(t.view.w,Math.round(t.view.w/t.page.w*t.view.w)),t.cursorwidth=t.opt.cursorfixedheight?t.opt.cursorfixedheight:Math.max(t.opt.cursorminheight,t.cursorwidth),t.scrollvaluemax=t.view.h-t.cursorheight-t.cursor.hborder-(t.opt.railpadding.top+t.opt.railpadding.bottom),t.railh&&(t.railh.width=0<t.page.maxh?t.view.w-t.rail.width:t.view.w,t.scrollvaluemaxw=t.railh.width-t.cursorwidth-t.cursorh.wborder-(t.opt.railpadding.left+t.opt.railpadding.right)),t.ispage||t.updateScrollBar(t.view),t.scrollratio={x:t.page.maxw/t.scrollvaluemaxw,y:t.page.maxh/t.scrollvaluemax},t.getScrollTop()>t.page.maxh?t.doScrollTop(t.page.maxh):(t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.scroll.x=Math.round(t.getScrollLeft()*(1/t.scrollratio.x)),t.cursoractive&&t.noticeCursor()),t.scroll.y&&0==t.getScrollTop()&&t.doScrollTo(Math.floor(t.scroll.y*t.scrollratio.y)),t)},this.resize=t.onResize,this.lazyResize=function(a){return a=isNaN(a)?30:a,t.debounced("resize",t.resize,a),t},this.jqbind=function(b,c,d){t.events.push({e:b,n:c,f:d,q:!0}),a(b).bind(c,d)},this.bind=function(a,b,c,d){var e="jquery"in a?a[0]:a;"mousewheel"==b?window.addEventListener||"onwheel"in document?t._bind(e,"wheel",c,d||!1):(a="undefined"!=typeof document.onmousewheel?"mousewheel":"DOMMouseScroll",r(e,a,c,d||!1),"DOMMouseScroll"==a&&r(e,"MozMousePixelScroll",c,d||!1)):e.addEventListener?(v.cantouch&&/mouseup|mousedown|mousemove/.test(b)&&t._bind(e,"mousedown"==b?"touchstart":"mouseup"==b?"touchend":"touchmove",function(a){if(a.touches){if(2>a.touches.length){var b=a.touches.length?a.touches[0]:a;b.original=a,c.call(this,b)}}else a.changedTouches&&(b=a.changedTouches[0],b.original=a,c.call(this,b))},d||!1),t._bind(e,b,c,d||!1),v.cantouch&&"mouseup"==b&&t._bind(e,"touchcancel",c,d||!1)):t._bind(e,b,function(a){return(a=a||window.event||!1)&&a.srcElement&&(a.target=a.srcElement),"pageY"in a||(a.pageX=a.clientX+document.documentElement.scrollLeft,a.pageY=a.clientY+document.documentElement.scrollTop),!1===c.call(e,a)||!1===d?t.cancelEvent(a):!0})},v.haseventlistener?(this._bind=function(a,b,c,d){t.events.push({e:a,n:b,f:c,b:d,q:!1}),a.addEventListener(b,c,d||!1)},this.cancelEvent=function(a){return a?(a=a.original?a.original:a,a.preventDefault(),a.stopPropagation(),a.preventManipulation&&a.preventManipulation(),!1):!1},this.stopPropagation=function(a){return a?(a=a.original?a.original:a,a.stopPropagation(),!1):!1},this._unbind=function(a,b,c,d){a.removeEventListener(b,c,d)}):(this._bind=function(a,b,c,d){t.events.push({e:a,n:b,f:c,b:d,q:!1}),a.attachEvent?a.attachEvent("on"+b,c):a["on"+b]=c},this.cancelEvent=function(a){return(a=window.event||!1)?(a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1):!1},this.stopPropagation=function(a){return(a=window.event||!1)?(a.cancelBubble=!0,!1):!1},this._unbind=function(a,b,c,d){a.detachEvent?a.detachEvent("on"+b,c):a["on"+b]=!1}),this.unbindAll=function(){for(var a=0;a<t.events.length;a++){var b=t.events[a];b.q?b.e.unbind(b.n,b.f):t._unbind(b.e,b.n,b.f,b.b)}},this.showRail=function(){return 0==t.page.maxh||!t.ispage&&"none"==t.win.css("display")||(t.visibility=!0,t.rail.visibility=!0,t.rail.css("display","block")),t},this.showRailHr=function(){return t.railh?(0==t.page.maxw||!t.ispage&&"none"==t.win.css("display")||(t.railh.visibility=!0,t.railh.css("display","block")),t):t},this.hideRail=function(){return t.visibility=!1,t.rail.visibility=!1,t.rail.css("display","none"),t},this.hideRailHr=function(){return t.railh?(t.railh.visibility=!1,t.railh.css("display","none"),t):t},this.show=function(){return t.hidden=!1,t.railslocked=!1,t.showRail().showRailHr()},this.hide=function(){return t.hidden=!0,t.railslocked=!0,t.hideRail().hideRailHr()},this.toggle=function(){return t.hidden?t.show():t.hide()},this.remove=function(){t.stop(),t.cursortimeout&&clearTimeout(t.cursortimeout),t.doZoomOut(),t.unbindAll(),v.isie9&&t.win[0].detachEvent("onpropertychange",t.onAttributeChange),!1!==t.observer&&t.observer.disconnect(),!1!==t.observerremover&&t.observerremover.disconnect(),!1!==t.observerbody&&t.observerbody.disconnect(),t.events=null,t.cursor&&t.cursor.remove(),t.cursorh&&t.cursorh.remove(),t.rail&&t.rail.remove(),t.railh&&t.railh.remove(),t.zoom&&t.zoom.remove();for(var b=0;b<t.saved.css.length;b++){var c=t.saved.css[b];c[0].css(c[1],"undefined"==typeof c[2]?"":c[2])}t.saved=!1,t.me.data("__nicescroll","");var d=a.nicescroll;d.each(function(a){if(this&&this.id===t.id){delete d[a];for(var b=++a;b<d.length;b++,a++)d[a]=d[b];d.length--,d.length&&delete d[d.length]}});for(var e in t)t[e]=null,delete t[e];t=null},this.scrollstart=function(a){return this.onscrollstart=a,t},this.scrollend=function(a){return this.onscrollend=a,t},this.scrollcancel=function(a){return this.onscrollcancel=a,t},this.zoomin=function(a){return this.onzoomin=a,t},this.zoomout=function(a){return this.onzoomout=a,t},this.isScrollable=function(b){if(b=b.target?b.target:b,"OPTION"==b.nodeName)return!0;for(;b&&1==b.nodeType&&!/^BODY|HTML/.test(b.nodeName);){var c=a(b),c=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(c))return b.clientHeight!=b.scrollHeight;b=b.parentNode?b.parentNode:!1}return!1},this.getViewport=function(b){for(b=b&&b.parentNode?b.parentNode:!1;b&&1==b.nodeType&&!/^BODY|HTML/.test(b.nodeName);){var c=a(b);if(/fixed|absolute/.test(c.css("position")))return c;var d=c.css("overflowY")||c.css("overflowX")||c.css("overflow")||"";if(/scroll|auto/.test(d)&&b.clientHeight!=b.scrollHeight||0<c.getNiceScroll().length)return c;b=b.parentNode?b.parentNode:!1}return!1},this.triggerScrollEnd=function(){if(t.onscrollend){var a=t.getScrollLeft(),b=t.getScrollTop();t.onscrollend.call(t,{type:"scrollend",current:{x:a,y:b},end:{x:a,y:b}})}},this.onmousewheel=function(a){if(!t.wheelprevented){if(t.railslocked)return t.debounced("checkunlock",t.resize,250),!0;if(t.rail.drag)return t.cancelEvent(a);if("auto"==t.opt.oneaxismousemode&&0!=a.deltaX&&(t.opt.oneaxismousemode=!1),t.opt.oneaxismousemode&&0==a.deltaX&&!t.rail.scrollable)return t.railh&&t.railh.scrollable?t.onmousewheelhr(a):!0;var b=+new Date,c=!1;return t.opt.preservenativescrolling&&t.checkarea+600<b&&(t.nativescrollingarea=t.isScrollable(a),c=!0),t.checkarea=b,t.nativescrollingarea?!0:((a=s(a,!1,c))&&(t.checkarea=0),a)}},this.onmousewheelhr=function(a){if(!t.wheelprevented){if(t.railslocked||!t.railh.scrollable)return!0;if(t.rail.drag)return t.cancelEvent(a);var b=+new Date,c=!1;return t.opt.preservenativescrolling&&t.checkarea+600<b&&(t.nativescrollingarea=t.isScrollable(a),c=!0),t.checkarea=b,t.nativescrollingarea?!0:t.railslocked?t.cancelEvent(a):s(a,!0,c)}},this.stop=function(){return t.cancelScroll(),t.scrollmon&&t.scrollmon.stop(),t.cursorfreezed=!1,t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.noticeCursor(),t},this.getTransitionSpeed=function(a){var b=Math.round(10*t.opt.scrollspeed);return a=Math.min(b,Math.round(a/20*t.opt.scrollspeed)),a>20?a:0},t.opt.smoothscroll?t.ishwscroll&&v.hastransition&&t.opt.usetransition&&t.opt.smoothscroll?(this.prepareTransition=function(a,b){var c=b?a>20?a:0:t.getTransitionSpeed(a),d=c?v.prefixstyle+"transform "+c+"ms ease-out":"";return t.lasttransitionstyle&&t.lasttransitionstyle==d||(t.lasttransitionstyle=d,t.doc.css(v.transitionstyle,d)),c},this.doScrollLeft=function(a,b){var c=t.scrollrunning?t.newscrolly:t.getScrollTop();t.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=t.scrollrunning?t.newscrollx:t.getScrollLeft();t.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=t.getScrollTop(),e=t.getScrollLeft();return(0>(t.newscrolly-d)*(b-d)||0>(t.newscrollx-e)*(a-e))&&t.cancelScroll(),0==t.opt.bouncescroll&&(0>b?b=0:b>t.page.maxh&&(b=t.page.maxh),0>a?a=0:a>t.page.maxw&&(a=t.page.maxw)),t.scrollrunning&&a==t.newscrollx&&b==t.newscrolly?!1:(t.newscrolly=b,t.newscrollx=a,t.newscrollspeed=c||!1,t.timer?!1:void(t.timer=setTimeout(function(){var c,d,e=t.getScrollTop(),f=t.getScrollLeft();c=a-f,d=b-e,c=Math.round(Math.sqrt(Math.pow(c,2)+Math.pow(d,2))),c=t.newscrollspeed&&1<t.newscrollspeed?t.newscrollspeed:t.getTransitionSpeed(c),t.newscrollspeed&&1>=t.newscrollspeed&&(c*=t.newscrollspeed),t.prepareTransition(c,!0),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),c>0&&(!t.scrollrunning&&t.onscrollstart&&t.onscrollstart.call(t,{type:"scrollstart",current:{x:f,y:e},request:{x:a,y:b},end:{x:t.newscrollx,y:t.newscrolly},speed:c}),v.transitionend?t.scrollendtrapped||(t.scrollendtrapped=!0,t.bind(t.doc,v.transitionend,t.onScrollTransitionEnd,!1)):(t.scrollendtrapped&&clearTimeout(t.scrollendtrapped),t.scrollendtrapped=setTimeout(t.onScrollTransitionEnd,c)),t.timerscroll={bz:new x(e,t.newscrolly,c,0,0,.58,1),bh:new x(f,t.newscrollx,c,0,0,.58,1)},t.cursorfreezed||(t.timerscroll.tm=setInterval(function(){t.showCursor(t.getScrollTop(),t.getScrollLeft())},60))),t.synched("doScroll-set",function(){t.timer=0,t.scrollendtrapped&&(t.scrollrunning=!0),t.setScrollTop(t.newscrolly),t.setScrollLeft(t.newscrollx),t.scrollendtrapped||t.onScrollTransitionEnd()})},50)))},this.cancelScroll=function(){if(!t.scrollendtrapped)return!0;var a=t.getScrollTop(),b=t.getScrollLeft();return t.scrollrunning=!1,v.transitionend||clearTimeout(v.transitionend),t.scrollendtrapped=!1,t._unbind(t.doc[0],v.transitionend,t.onScrollTransitionEnd),t.prepareTransition(0),t.setScrollTop(a),t.railh&&t.setScrollLeft(b),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),t.timerscroll=!1,t.cursorfreezed=!1,t.showCursor(a,b),t},this.onScrollTransitionEnd=function(){t.scrollendtrapped&&t._unbind(t.doc[0],v.transitionend,t.onScrollTransitionEnd),t.scrollendtrapped=!1,t.prepareTransition(0),t.timerscroll&&t.timerscroll.tm&&clearInterval(t.timerscroll.tm),t.timerscroll=!1;var a=t.getScrollTop(),b=t.getScrollLeft();return t.setScrollTop(a),t.railh&&t.setScrollLeft(b),t.noticeCursor(!1,a,b),t.cursorfreezed=!1,0>a?a=0:a>t.page.maxh&&(a=t.page.maxh),0>b?b=0:b>t.page.maxw&&(b=t.page.maxw),a!=t.newscrolly||b!=t.newscrollx?t.doScrollPos(b,a,t.opt.snapbackspeed):(t.onscrollend&&t.scrollrunning&&t.triggerScrollEnd(),void(t.scrollrunning=!1))}):(this.doScrollLeft=function(a,b){var c=t.scrollrunning?t.newscrolly:t.getScrollTop();t.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=t.scrollrunning?t.newscrollx:t.getScrollLeft();t.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){function d(){if(t.cancelAnimationFrame)return!0;if(t.scrollrunning=!0,l=1-l)return t.timer=h(d)||1;var a,b,c=0,e=b=t.getScrollTop();t.dst.ay?(e=t.bzscroll?t.dst.py+t.bzscroll.getNow()*t.dst.ay:t.newscrolly,a=e-b,(0>a&&e<t.newscrolly||a>0&&e>t.newscrolly)&&(e=t.newscrolly),t.setScrollTop(e),e==t.newscrolly&&(c=1)):c=1,b=a=t.getScrollLeft(),t.dst.ax?(b=t.bzscroll?t.dst.px+t.bzscroll.getNow()*t.dst.ax:t.newscrollx,a=b-a,(0>a&&b<t.newscrollx||a>0&&b>t.newscrollx)&&(b=t.newscrollx),t.setScrollLeft(b),b==t.newscrollx&&(c+=1)):c+=1,2==c?(t.timer=0,t.cursorfreezed=!1,t.bzscroll=!1,t.scrollrunning=!1,0>e?e=0:e>t.page.maxh&&(e=t.page.maxh),0>b?b=0:b>t.page.maxw&&(b=t.page.maxw),b!=t.newscrollx||e!=t.newscrolly?t.doScrollPos(b,e):t.onscrollend&&t.triggerScrollEnd()):t.timer=h(d)||1}if(b="undefined"==typeof b||!1===b?t.getScrollTop(!0):b,t.timer&&t.newscrolly==b&&t.newscrollx==a)return!0;t.timer&&i(t.timer),t.timer=0;var e=t.getScrollTop(),f=t.getScrollLeft();(0>(t.newscrolly-e)*(b-e)||0>(t.newscrollx-f)*(a-f))&&t.cancelScroll(),t.newscrolly=b,t.newscrollx=a,t.bouncescroll&&t.rail.visibility||(0>t.newscrolly?t.newscrolly=0:t.newscrolly>t.page.maxh&&(t.newscrolly=t.page.maxh)),t.bouncescroll&&t.railh.visibility||(0>t.newscrollx?t.newscrollx=0:t.newscrollx>t.page.maxw&&(t.newscrollx=t.page.maxw)),t.dst={},t.dst.x=a-f,t.dst.y=b-e,t.dst.px=f,t.dst.py=e;var g=Math.round(Math.sqrt(Math.pow(t.dst.x,2)+Math.pow(t.dst.y,2)));t.dst.ax=t.dst.x/g,t.dst.ay=t.dst.y/g;var j=0,k=g;if(0==t.dst.x?(j=e,k=b,t.dst.ay=1,t.dst.py=0):0==t.dst.y&&(j=f,k=a,t.dst.ax=1,t.dst.px=0),g=t.getTransitionSpeed(g),c&&1>=c&&(g*=c),t.bzscroll=g>0?t.bzscroll?t.bzscroll.update(k,g):new x(j,k,g,0,1,0,1):!1,!t.timer){(e==t.page.maxh&&b>=t.page.maxh||f==t.page.maxw&&a>=t.page.maxw)&&t.checkContentSize();var l=1;t.cancelAnimationFrame=!1,t.timer=1,t.onscrollstart&&!t.scrollrunning&&t.onscrollstart.call(t,{type:"scrollstart",current:{x:f,y:e},request:{x:a,y:b},end:{x:t.newscrollx,y:t.newscrolly},speed:g}),d(),(e==t.page.maxh&&b>=e||f==t.page.maxw&&a>=f)&&t.checkContentSize(),t.noticeCursor()}},this.cancelScroll=function(){return t.timer&&i(t.timer),t.timer=0,t.bzscroll=!1,t.scrollrunning=!1,t}):(this.doScrollLeft=function(a,b){var c=t.getScrollTop();t.doScrollPos(a,c,b)},this.doScrollTop=function(a,b){var c=t.getScrollLeft();t.doScrollPos(c,a,b)},this.doScrollPos=function(a,b,c){var d=a>t.page.maxw?t.page.maxw:a;0>d&&(d=0);var e=b>t.page.maxh?t.page.maxh:b;0>e&&(e=0),t.synched("scroll",function(){t.setScrollTop(e),t.setScrollLeft(d)})},this.cancelScroll=function(){}),this.doScrollBy=function(a,b){var c=0,c=b?Math.floor((t.scroll.y-a)*t.scrollratio.y):(t.timer?t.newscrolly:t.getScrollTop(!0))-a;if(t.bouncescroll){var d=Math.round(t.view.h/2);-d>c?c=-d:c>t.page.maxh+d&&(c=t.page.maxh+d)}return t.cursorfreezed=!1,d=t.getScrollTop(!0),0>c&&0>=d?t.noticeCursor():c>t.page.maxh&&d>=t.page.maxh?(t.checkContentSize(),t.noticeCursor()):void t.doScrollTop(c)},this.doScrollLeftBy=function(a,b){var c=0,c=b?Math.floor((t.scroll.x-a)*t.scrollratio.x):(t.timer?t.newscrollx:t.getScrollLeft(!0))-a;if(t.bouncescroll){var d=Math.round(t.view.w/2);-d>c?c=-d:c>t.page.maxw+d&&(c=t.page.maxw+d)}return t.cursorfreezed=!1,d=t.getScrollLeft(!0),0>c&&0>=d||c>t.page.maxw&&d>=t.page.maxw?t.noticeCursor():void t.doScrollLeft(c)},this.doScrollTo=function(a,b){b&&Math.round(a*t.scrollratio.y),t.cursorfreezed=!1,t.doScrollTop(a)},this.checkContentSize=function(){var a=t.getContentSize();a.h==t.page.h&&a.w==t.page.w||t.resize(!1,a)},t.onscroll=function(a){t.rail.drag||t.cursorfreezed||t.synched("scroll",function(){t.scroll.y=Math.round(t.getScrollTop()*(1/t.scrollratio.y)),t.railh&&(t.scroll.x=Math.round(t.getScrollLeft()*(1/t.scrollratio.x))),t.noticeCursor()})},t.bind(t.docscroll,"scroll",t.onscroll),this.doZoomIn=function(b){if(!t.zoomactive){t.zoomactive=!0,t.zoomrestore={style:{}};var c,d="position top left zIndex backgroundColor marginTop marginBottom marginLeft marginRight".split(" "),e=t.win[0].style;for(c in d){var g=d[c];t.zoomrestore.style[g]="undefined"!=typeof e[g]?e[g]:""}return t.zoomrestore.style.width=t.win.css("width"),t.zoomrestore.style.height=t.win.css("height"),t.zoomrestore.padding={w:t.win.outerWidth()-t.win.width(),h:t.win.outerHeight()-t.win.height()},v.isios4&&(t.zoomrestore.scrollTop=a(window).scrollTop(),a(window).scrollTop(0)),t.win.css({position:v.isios4?"absolute":"fixed",top:0,left:0,"z-index":f+100,margin:"0px"}),d=t.win.css("backgroundColor"),(""==d||/transparent|rgba\(0, 0, 0, 0\)|rgba\(0,0,0,0\)/.test(d))&&t.win.css("backgroundColor","#fff"),t.rail.css({"z-index":f+101}),t.zoom.css({"z-index":f+102}),t.zoom.css("backgroundPosition","0px -18px"),t.resizeZoom(),t.onzoomin&&t.onzoomin.call(t),t.cancelEvent(b)}},this.doZoomOut=function(b){return t.zoomactive?(t.zoomactive=!1,t.win.css("margin",""),t.win.css(t.zoomrestore.style),v.isios4&&a(window).scrollTop(t.zoomrestore.scrollTop),t.rail.css({"z-index":t.zindex}),t.zoom.css({"z-index":t.zindex}),t.zoomrestore=!1,t.zoom.css("backgroundPosition","0px 0px"),t.onResize(),t.onzoomout&&t.onzoomout.call(t),t.cancelEvent(b)):void 0},this.doZoom=function(a){return t.zoomactive?t.doZoomOut(a):t.doZoomIn(a)},this.resizeZoom=function(){if(t.zoomactive){var b=t.getScrollTop();t.win.css({width:a(window).width()-t.zoomrestore.padding.w+"px",height:a(window).height()-t.zoomrestore.padding.h+"px"}),t.onResize(),t.setScrollTop(Math.min(t.page.maxh,b))}},this.init(),a.nicescroll.push(this)},q=function(a){var b=this;this.nc=a,this.steptime=this.lasttime=this.speedy=this.speedx=this.lasty=this.lastx=0,this.snapy=this.snapx=!1,this.demuly=this.demulx=0,this.lastscrolly=this.lastscrollx=-1,this.timer=this.chky=this.chkx=0,this.time=function(){return+new Date},this.reset=function(a,c){b.stop();var d=b.time();b.steptime=0,b.lasttime=d,b.speedx=0,b.speedy=0,b.lastx=a,b.lasty=c,b.lastscrollx=-1,b.lastscrolly=-1},this.update=function(a,c){var d=b.time();b.steptime=d-b.lasttime,b.lasttime=d;var d=c-b.lasty,e=a-b.lastx,f=b.nc.getScrollTop(),g=b.nc.getScrollLeft(),f=f+d,g=g+e;b.snapx=0>g||g>b.nc.page.maxw,b.snapy=0>f||f>b.nc.page.maxh,b.speedx=e,b.speedy=d,b.lastx=a,b.lasty=c},this.stop=function(){b.nc.unsynched("domomentum2d"),b.timer&&clearTimeout(b.timer),b.timer=0,b.lastscrollx=-1,b.lastscrolly=-1},this.doSnapy=function(a,c){var d=!1;0>c?(c=0,d=!0):c>b.nc.page.maxh&&(c=b.nc.page.maxh,d=!0),0>a?(a=0,d=!0):a>b.nc.page.maxw&&(a=b.nc.page.maxw,d=!0),d?b.nc.doScrollPos(a,c,b.nc.opt.snapbackspeed):b.nc.triggerScrollEnd()},this.doMomentum=function(a){var c=b.time(),d=a?c+a:b.lasttime;a=b.nc.getScrollLeft();var e=b.nc.getScrollTop(),f=b.nc.page.maxh,g=b.nc.page.maxw;if(b.speedx=g>0?Math.min(60,b.speedx):0,b.speedy=f>0?Math.min(60,b.speedy):0,d=d&&60>=c-d,(0>e||e>f||0>a||a>g)&&(d=!1),a=b.speedx&&d?b.speedx:!1,b.speedy&&d&&b.speedy||a){var h=Math.max(16,b.steptime);h>50&&(a=h/50,b.speedx*=a,b.speedy*=a,h=50),b.demulxy=0,b.lastscrollx=b.nc.getScrollLeft(),b.chkx=b.lastscrollx,b.lastscrolly=b.nc.getScrollTop(),b.chky=b.lastscrolly;var i=b.lastscrollx,j=b.lastscrolly,k=function(){var a=600<b.time()-c?.04:.02;b.speedx&&(i=Math.floor(b.lastscrollx-b.speedx*(1-b.demulxy)),b.lastscrollx=i,0>i||i>g)&&(a=.1),b.speedy&&(j=Math.floor(b.lastscrolly-b.speedy*(1-b.demulxy)),b.lastscrolly=j,0>j||j>f)&&(a=.1),b.demulxy=Math.min(1,b.demulxy+a),b.nc.synched("domomentum2d",function(){b.speedx&&(b.nc.getScrollLeft()!=b.chkx&&b.stop(),b.chkx=i,b.nc.setScrollLeft(i)),b.speedy&&(b.nc.getScrollTop()!=b.chky&&b.stop(),b.chky=j,b.nc.setScrollTop(j)),b.timer||(b.nc.hideCursor(),b.doSnapy(i,j))}),1>b.demulxy?b.timer=setTimeout(k,h):(b.stop(),b.nc.hideCursor(),b.doSnapy(i,j))};k()}else b.doSnapy(b.nc.getScrollLeft(),b.nc.getScrollTop())}},r=a.fn.scrollTop;a.cssHooks.pageYOffset={get:function(b,c,d){return(c=a.data(b,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollTop():r.call(b)},set:function(b,c){var d=a.data(b,"__nicescroll")||!1;return d&&d.ishwscroll?d.setScrollTop(parseInt(c)):r.call(b,c),this}},a.fn.scrollTop=function(b){if("undefined"==typeof b){var c=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollTop():r.call(this)}return this.each(function(){var c=a.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollTop(parseInt(b)):r.call(a(this),b)})};var s=a.fn.scrollLeft;a.cssHooks.pageXOffset={get:function(b,c,d){return(c=a.data(b,"__nicescroll")||!1)&&c.ishwscroll?c.getScrollLeft():s.call(b)},set:function(b,c){var d=a.data(b,"__nicescroll")||!1;return d&&d.ishwscroll?d.setScrollLeft(parseInt(c)):s.call(b,c),this}},a.fn.scrollLeft=function(b){if("undefined"==typeof b){var c=this[0]?a.data(this[0],"__nicescroll")||!1:!1;return c&&c.ishwscroll?c.getScrollLeft():s.call(this)}return this.each(function(){var c=a.data(this,"__nicescroll")||!1;c&&c.ishwscroll?c.setScrollLeft(parseInt(b)):s.call(a(this),b)})};var t=function(b){var c=this;if(this.length=0,this.name="nicescrollarray",this.each=function(a){for(var b=0,d=0;b<c.length;b++)a.call(c[b],d++);return c},this.push=function(a){c[c.length]=a,c.length++},this.eq=function(a){return c[a]},b)for(var d=0;d<b.length;d++){var e=a.data(b[d],"__nicescroll")||!1;e&&(this[this.length]=e,this.length++)}return this};!function(a,b,c){for(var d=0;d<b.length;d++)c(a,b[d])}(t.prototype,"show hide toggle onResize resize remove stop doScrollPos".split(" "),function(a,b){a[b]=function(){var a=arguments;return this.each(function(){this[b].apply(this,a)})}}),a.fn.getNiceScroll=function(b){return"undefined"==typeof b?new t(this):this[b]&&a.data(this[b],"__nicescroll")||!1},a.extend(a.expr[":"],{nicescroll:function(b){return a.data(b,"__nicescroll")?!0:!1}}),a.fn.niceScroll=function(b,c){"undefined"!=typeof c||"object"!=typeof b||"jquery"in b||(c=b,b=!1),c=a.extend({},c);var d=new t;"undefined"==typeof c&&(c={}),b&&(c.doc=a(b),c.win=a(this));var e=!("doc"in c);return e||"win"in c||(c.win=a(this)),this.each(function(){var b=a(this).data("__nicescroll")||!1;b||(c.doc=e?a(this):c.doc,b=new p(c,a(this)),a(this).data("__nicescroll",b)),d.push(b)}),1==d.length?d[0]:d},window.NiceScroll={getjQuery:function(){return a}},a.nicescroll||(a.nicescroll=new t,a.nicescroll.options=m)}),function(a){var b,c=a(window),d={},e=[],f=[],g=!1,h=!1,i=null,j=null,k=null,l=null,m="_open",n="_close",o=null,p=0,q={_init:function(b){var c=a(b),d=c.data("popupoptions");f[b.id]=!1,e[b.id]=0,c.data("popup-initialized")||(c.attr("data-popup-initialized","true"),q._initonce(b)),d.autoopen&&q.show(b,0)},_initonce:function(c){var d,e=a("body"),f=$el.data("popupoptions");if(l=parseInt(e.css("margin-right"),10),"tooltip"==f.type&&(f.background=!1,f.scrolllock=!1),f.scrolllock){var g,h;"undefined"==typeof b&&(g=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),h=g.children(),b=h.innerWidth()-h.height(99).innerWidth(),g.remove())}if($el.attr("id")||$el.attr("id","j-popup-"+parseInt(1e8*Math.random())),$el.addClass("popup_content"),e.prepend(c),$el.wrap('<div id="'+c.id+'_wrapper" class="popup_wrapper" />'),d=a("#"+c.id+"_wrapper"),d.css({opacity:0,visibility:"hidden",position:"absolute",overflow:"auto"}),$el.css({opacity:0,visibility:"hidden",display:"inline-block"}),f.setzindex&&!f.autozindex&&d.css("z-index","2001"),f.outline||$el.css("outline","none"),f.transition&&($el.css("transition",f.transition),d.css("transition",f.transition)),a(c).attr("aria-hidden",!0),f.background&&!a("#"+c.id+"_background").length){var i='<div id="'+c.id+'_background" class="popup_background"></div>';e.prepend(i);var j=a("#"+c.id+"_background");j.css({opacity:0,visibility:"hidden",backgroundColor:f.color,position:"fixed",top:0,right:0,bottom:0,left:0}),f.backgroundclass&&j.addClass(f.backgroundclass),f.setzindex&&!f.autozindex&&j.css("z-index","2000"),f.transition&&j.css("transition",f.transition)}"overlay"==f.type&&($el.css({textAlign:"left",position:"relative",verticalAlign:"middle"}),d.css({position:"fixed",top:0,right:0,left:0,bottom:0,textAlign:"center"}),d.append('<div class="popup_align" />'),a(".popup_align").css({display:"inline-block",verticalAlign:"middle",height:"100%"})),$el.attr("role","dialog");var k=f.openelement?f.openelement:"."+c.id+m;a(k).each(function(b,c){a(c).attr("data-popup-ordinal",b),a(c).attr("id")||a(c).attr("id","open_"+parseInt(1e8*Math.random(),10))}),$el.attr("aria-labelledby")||$el.attr("aria-label")||$el.attr("aria-labelledby",a(k).attr("id")),a(document).on("click",k,function(b){if(!$el.data("popup-visible")){var d=a(this).data("popup-ordinal");q.show(c,d),b.preventDefault()}});var o=f.closeelement?f.closeelement:"."+c.id+n;a(document).on("click",o,function(a){q.hide(c),a.preventDefault()}),f.detach?$el.hide().detach():d.hide(),"function"==typeof f.beforeopen&&$el.on("jquery-popup-overlay.beforeopen",f.beforeopen),"function"==typeof f.onopen&&$el.on("jquery-popup-overlay.onopen",f.onopen),"function"==typeof f.onclose&&$el.on("jquery-popup-overlay.onclose",f.onclose),"function"==typeof f.opentransitionend&&$el.on("jquery-popup-overlay.opentransitionend",f.opentransitionend),"function"==typeof f.closetransitionend&&$el.on("jquery-popup-overlay.closetransitionend",f.closetransitionend)},show:function(d,m){var n=a(d);if(!n.data("popup-visible")){n.data("popup-initialized")||q._init(d),n.attr("data-popup-initialized","true");var s=a("body"),t=n.data("popupoptions"),u=a("#"+d.id+"_wrapper"),v=a("#"+d.id+"_background");r(d,m,"beforeopen"),f[d.id]=m,t.detach?(u.prepend(d),n.show()):u.show(),u.css({visibility:"visible",opacity:1}),a("html").addClass("popup_visible").addClass("popup_visible_"+d.id),n.addClass("popup_content_visible"),n.css({visibility:"visible",opacity:1}),t.scrolllock&&(s.css("overflow","hidden"),s.height()>c.height()&&s.css("margin-right",l+b),p++),g||(t.keepfocus&&a(document).on("focusin",i),t.blur&&a(document).on("click",j),t.escape&&a(document).on("keydown",k)),g?h=!0:g=!0,n.data("popup-visible",!0),q.reposition(d,m),t.background&&(v.css({visibility:"visible",opacity:t.opacity}),v.css({opacity:t.opacity}));try{o=document.activeElement}catch(w){o=document.body}if(t.keepfocus&&(n.attr("tabindex",-1),t.focuselement?a(t.focuselement).focus():n.focus(),i=function(a){var b=document.getElementById(d.id);b.contains(a.target)||(a.stopPropagation(),b.focus())}),t.autozindex){for(var x=document.getElementsByTagName("*"),y=x.length,z=0,A=0;y>A;A++){var B=a(x[A]).css("z-index");"auto"!==B&&(B=parseInt(B),B>z&&(z=B))}e[d.id]=z,e[d.id]>0&&u.css({zIndex:e[d.id]+2}),t.background&&e[d.id]>0&&a("#"+d.id+"_background").css({zIndex:e[d.id]+1})}t.blur&&(j=function(b){a(b.target).parents().andSelf().is("#"+d.id)||q.hide(d)}),t.escape&&(k=function(a){27==a.keyCode&&n.data("popup-visible")&&q.hide(d)}),a(t.pagecontainer).attr("aria-hidden",!0),n.attr("aria-hidden",!1),u.one("transitionend",function(){r(d,m,"opentransitionend")}),r(d,m,"onopen")}},hide:function(b){var c=a("body"),d=a(b),e=d.data("popupoptions"),m=a("#"+b.id+"_wrapper"),n=a("#"+b.id+"_background");d.data("popup-visible",!1),h?(a("html").removeClass("popup_visible_"+b.id),h=!1):(a("html").removeClass("popup_visible").removeClass("popup_visible_"+b.id),g=!1),d.removeClass("popup_content_visible"),e.scrolllock&&--p<=0&&c.css({overflow:"visible","margin-right":l}),e.blur&&a(document).off("click",j),e.keepfocus&&(a(document).off("focusin",i),a(o).is(":visible")&&o.focus()),e.escape&&a(document).off("keydown",k),m.css({visibility:"hidden",opacity:0}),d.css({visibility:"hidden",opacity:0}),e.background&&(n.css({visibility:"hidden",opacity:0}),n.one("transitionend",function(a){e.notransitiondetach||r(b,f[b.id],"backgroundclosetransitionend")})),d.one("transitionend",function(a){d.data("popup-visible")||(e.detach?d.hide().detach():m.hide()),e.notransitiondetach||r(b,f[b.id],"closetransitionend")}),e.notransitiondetach&&(e.detach?d.hide().detach():m.hide()),a(e.pagecontainer).attr("aria-hidden",!1),d.attr("aria-hidden",!0),e.transitions||r(b,f[b.id],"closetransitionend"),r(b,f[b.id],"onclose")},toggle:function(a,b){$el.data("popup-visible")?q.hide(a):q.show(a,b)},reposition:function(b,c){var d=a(b),e=d.data("popupoptions"),f=a("#"+b.id+"_wrapper");a("#"+b.id+"_background");if(c=c||0,"tooltip"==e.type){f.css({position:"absolute"});var g=e.openelement?e.openelement:"."+b.id+m,h=a(g+'[data-popup-ordinal="'+c+'"]'),i=h.offset();"right"==e.horizontal?f.css("left",i.left+h.outerWidth()+e.offsetleft):"leftedge"==e.horizontal?f.css("left",i.left+h.outerWidth()-h.outerWidth()+e.offsetleft):"left"==e.horizontal?f.css("right",a(window).width()-i.left-e.offsetleft):"rightedge"==e.horizontal?f.css("right",a(window).width()-i.left-h.outerWidth()-e.offsetleft):f.css("left",i.left+h.outerWidth()/2-d.outerWidth()/2-parseFloat(d.css("marginLeft"))+e.offsetleft),
"bottom"==e.vertical?f.css("top",i.top+h.outerHeight()+e.offsettop):"bottomedge"==e.vertical?f.css("top",i.top+h.outerHeight()-d.outerHeight()+e.offsettop):"top"==e.vertical?f.css("bottom",a(window).height()-i.top-e.offsettop):"topedge"==e.vertical?f.css("bottom",a(window).height()-i.top-d.outerHeight()-e.offsettop):f.css("top",i.top+h.outerHeight()/2-d.outerHeight()/2-parseFloat(d.css("marginTop"))+e.offsettop)}else"overlay"==e.type&&(e.horizontal?f.css("text-align",e.horizontal):f.css("text-align","center"),e.vertical?d.css("vertical-align",e.vertical):d.css("vertical-align","middle"))}},r=function(b,c,e){var f=d.openelement?d.openelement:"."+b.id+m,g=a(f+'[data-popup-ordinal="'+c+'"]');a(b).trigger("jquery-popup-overlay."+e,[g])};a.fn.popup=function(b){return this.each(function(){if($el=a(this),"object"==typeof b){var c=a.extend({},a.fn.popup.defaults,b);$el.data("popupoptions",c),d=$el.data("popupoptions"),q._init(this)}else"string"==typeof b?($el.data("popupoptions")||($el.data("popupoptions",a.fn.popup.defaults),d=$el.data("popupoptions")),q[b].call(this,this)):($el.data("popupoptions")||($el.data("popupoptions",a.fn.popup.defaults),d=$el.data("popupoptions")),q._init(this))})},a.fn.popup.defaults={type:"overlay",autoopen:!1,background:!0,color:"black",opacity:"0.5",horizontal:"center",vertical:"middle",offsettop:0,offsetleft:0,escape:!0,blur:!0,setzindex:!0,autozindex:!1,scrolllock:!1,keepfocus:!0,focuselement:null,focusdelay:50,outline:!1,pagecontainer:null,detach:!1,openelement:null,closeelement:null,transition:null,notransitiondetach:!1,beforeopen:function(){},onclose:function(){},onopen:function(){},opentransitionend:function(){},closetransitionend:function(){},transitions:!0}}(jQuery),function(){var a=!0;!function(b){var c=this||(0,eval)("this"),d=c.document,e=c.navigator,f=c.jQuery,g=c.JSON;!function(a){if("function"==typeof require&&"object"==typeof exports&&"object"==typeof module){var b=module.exports||exports;a(b)}else"function"==typeof define&&define.amd?define(["exports"],a):a(c.ko={})}(function(h){function i(a,b){var c=null===a||typeof a in p;return c?a===b:!1}function j(a,c){var d;return function(){d||(d=setTimeout(function(){d=b,a()},c))}}function k(a,b){var c;return function(){clearTimeout(c),c=setTimeout(a,b)}}function l(a){var b=this;return a&&o.utils.objectForEach(a,function(a,c){var d=o.extenders[a];"function"==typeof d&&(b=d(b,c)||b)}),b}function m(a){o.bindingHandlers[a]={init:function(b,c,d,e,f){var g=function(){var b={};return b[a]=c(),b};return o.bindingHandlers.event.init.call(this,b,g,d,e,f)}}}function n(a,b,c,d){o.bindingHandlers[a]={init:function(a,e,f,g,h){var i,j;return o.computed(function(){var f=o.utils.unwrapObservable(e()),g=!c!=!f,k=!j,l=k||b||g!==i;l&&(k&&o.computedContext.getDependenciesCount()&&(j=o.utils.cloneNodes(o.virtualElements.childNodes(a),!0)),g?(k||o.virtualElements.setDomNodeChildren(a,o.utils.cloneNodes(j)),o.applyBindingsToDescendants(d?d(h,f):h,a)):o.virtualElements.emptyNode(a),i=g)},null,{disposeWhenNodeIsRemoved:a}),{controlsDescendantBindings:!0}}},o.expressionRewriting.bindingRewriteValidators[a]=!1,o.virtualElements.allowedBindings[a]=!0}var o="undefined"!=typeof h?h:{};o.exportSymbol=function(a,b){for(var c=a.split("."),d=o,e=0;e<c.length-1;e++)d=d[c[e]];d[c[c.length-1]]=b},o.exportProperty=function(a,b,c){a[b]=c},o.version="3.1.0",o.exportSymbol("version",o.version),o.utils=function(){function a(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])}function h(a,b){if(b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function i(a,b){return a.__proto__=b,a}function j(a,b){if("input"!==o.utils.tagNameLower(a)||!a.type)return!1;if("click"!=b.toLowerCase())return!1;var c=a.type;return"checkbox"==c||"radio"==c}var k={__proto__:[]}instanceof Array,l={},m={},n=e&&/Firefox\/2/i.test(e.userAgent)?"KeyboardEvent":"UIEvents";l[n]=["keyup","keydown","keypress"],l.MouseEvents=["click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave"],a(l,function(a,b){if(b.length)for(var c=0,d=b.length;d>c;c++)m[b[c]]=a});var p={propertychange:!0},q=d&&function(){for(var a=3,c=d.createElement("div"),e=c.getElementsByTagName("i");c.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->",e[0];);return a>4?a:b}(),r=6===q,s=7===q;return{fieldsIncludedWithJsonPost:["authenticity_token",/^__RequestVerificationToken(_.*)?$/],arrayForEach:function(a,b){for(var c=0,d=a.length;d>c;c++)b(a[c],c)},arrayIndexOf:function(a,b){if("function"==typeof Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},arrayFirst:function(a,b,c){for(var d=0,e=a.length;e>d;d++)if(b.call(c,a[d],d))return a[d];return null},arrayRemoveItem:function(a,b){var c=o.utils.arrayIndexOf(a,b);c>0?a.splice(c,1):0===c&&a.shift()},arrayGetDistinctValues:function(a){a=a||[];for(var b=[],c=0,d=a.length;d>c;c++)o.utils.arrayIndexOf(b,a[c])<0&&b.push(a[c]);return b},arrayMap:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)c.push(b(a[d],d));return c},arrayFilter:function(a,b){a=a||[];for(var c=[],d=0,e=a.length;e>d;d++)b(a[d],d)&&c.push(a[d]);return c},arrayPushAll:function(a,b){if(b instanceof Array)a.push.apply(a,b);else for(var c=0,d=b.length;d>c;c++)a.push(b[c]);return a},addOrRemoveItem:function(a,b,c){var d=o.utils.arrayIndexOf(o.utils.peekObservable(a),b);0>d?c&&a.push(b):c||a.splice(d,1)},canSetPrototype:k,extend:h,setPrototypeOf:i,setPrototypeOfOrExtend:k?i:h,objectForEach:a,objectMap:function(a,b){if(!a)return a;var c={};for(var d in a)a.hasOwnProperty(d)&&(c[d]=b(a[d],d,a));return c},emptyDomNode:function(a){for(;a.firstChild;)o.removeNode(a.firstChild)},moveCleanedNodesToContainerElement:function(a){for(var b=o.utils.makeArray(a),c=d.createElement("div"),e=0,f=b.length;f>e;e++)c.appendChild(o.cleanNode(b[e]));return c},cloneNodes:function(a,b){for(var c=0,d=a.length,e=[];d>c;c++){var f=a[c].cloneNode(!0);e.push(b?o.cleanNode(f):f)}return e},setDomNodeChildren:function(a,b){if(o.utils.emptyDomNode(a),b)for(var c=0,d=b.length;d>c;c++)a.appendChild(b[c])},replaceDomNodes:function(a,b){var c=a.nodeType?[a]:a;if(c.length>0){for(var d=c[0],e=d.parentNode,f=0,g=b.length;g>f;f++)e.insertBefore(b[f],d);for(var f=0,g=c.length;g>f;f++)o.removeNode(c[f])}},fixUpContinuousNodeArray:function(a,b){if(a.length){for(b=8===b.nodeType&&b.parentNode||b;a.length&&a[0].parentNode!==b;)a.shift();if(a.length>1){var c=a[0],d=a[a.length-1];for(a.length=0;c!==d;)if(a.push(c),c=c.nextSibling,!c)return;a.push(d)}}return a},setOptionNodeSelectionState:function(a,b){7>q?a.setAttribute("selected",b):a.selected=b},stringTrim:function(a){return null===a||a===b?"":a.trim?a.trim():a.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},stringTokenize:function(a,b){for(var c=[],d=(a||"").split(b),e=0,f=d.length;f>e;e++){var g=o.utils.stringTrim(d[e]);""!==g&&c.push(g)}return c},stringStartsWith:function(a,b){return a=a||"",b.length>a.length?!1:a.substring(0,b.length)===b},domNodeIsContainedBy:function(a,b){if(a===b)return!0;if(11===a.nodeType)return!1;if(b.contains)return b.contains(3===a.nodeType?a.parentNode:a);if(b.compareDocumentPosition)return 16==(16&b.compareDocumentPosition(a));for(;a&&a!=b;)a=a.parentNode;return!!a},domNodeIsAttachedToDocument:function(a){return o.utils.domNodeIsContainedBy(a,a.ownerDocument.documentElement)},anyDomNodeIsAttachedToDocument:function(a){return!!o.utils.arrayFirst(a,o.utils.domNodeIsAttachedToDocument)},tagNameLower:function(a){return a&&a.tagName&&a.tagName.toLowerCase()},registerEventHandler:function(a,b,c){var d=q&&p[b];if(!d&&f)f(a).bind(b,c);else if(d||"function"!=typeof a.addEventListener){if("undefined"==typeof a.attachEvent)throw new Error("Browser doesn't support addEventListener or attachEvent");var e=function(b){c.call(a,b)},g="on"+b;a.attachEvent(g,e),o.utils.domNodeDisposal.addDisposeCallback(a,function(){a.detachEvent(g,e)})}else a.addEventListener(b,c,!1)},triggerEvent:function(a,b){if(!a||!a.nodeType)throw new Error("element must be a DOM node when calling triggerEvent");var e=j(a,b);if(f&&!e)f(a).trigger(b);else if("function"==typeof d.createEvent){if("function"!=typeof a.dispatchEvent)throw new Error("The supplied element doesn't support dispatchEvent");var g=m[b]||"HTMLEvents",h=d.createEvent(g);h.initEvent(b,!0,!0,c,0,0,0,0,0,!1,!1,!1,!1,0,a),a.dispatchEvent(h)}else if(e&&a.click)a.click();else{if("undefined"==typeof a.fireEvent)throw new Error("Browser doesn't support triggering events");a.fireEvent("on"+b)}},unwrapObservable:function(a){return o.isObservable(a)?a():a},peekObservable:function(a){return o.isObservable(a)?a.peek():a},toggleDomNodeCssClass:function(a,b,c){if(b){var d=/\S+/g,e=a.className.match(d)||[];o.utils.arrayForEach(b.match(d),function(a){o.utils.addOrRemoveItem(e,a,c)}),a.className=e.join(" ")}},setTextContent:function(a,c){var d=o.utils.unwrapObservable(c);(null===d||d===b)&&(d="");var e=o.virtualElements.firstChild(a);!e||3!=e.nodeType||o.virtualElements.nextSibling(e)?o.virtualElements.setDomNodeChildren(a,[a.ownerDocument.createTextNode(d)]):e.data=d,o.utils.forceRefresh(a)},setElementName:function(a,b){if(a.name=b,7>=q)try{a.mergeAttributes(d.createElement("<input name='"+a.name+"'/>"),!1)}catch(c){}},forceRefresh:function(a){if(q>=9){var b=1==a.nodeType?a:a.parentNode;b.style&&(b.style.zoom=b.style.zoom)}},ensureSelectElementIsRenderedCorrectly:function(a){if(q){var b=a.style.width;a.style.width=0,a.style.width=b}},range:function(a,b){a=o.utils.unwrapObservable(a),b=o.utils.unwrapObservable(b);for(var c=[],d=a;b>=d;d++)c.push(d);return c},makeArray:function(a){for(var b=[],c=0,d=a.length;d>c;c++)b.push(a[c]);return b},isIe6:r,isIe7:s,ieVersion:q,getFormFields:function(a,b){for(var c=o.utils.makeArray(a.getElementsByTagName("input")).concat(o.utils.makeArray(a.getElementsByTagName("textarea"))),d="string"==typeof b?function(a){return a.name===b}:function(a){return b.test(a.name)},e=[],f=c.length-1;f>=0;f--)d(c[f])&&e.push(c[f]);return e},parseJson:function(a){return"string"==typeof a&&(a=o.utils.stringTrim(a))?g&&g.parse?g.parse(a):new Function("return "+a)():null},stringifyJson:function(a,b,c){if(!g||!g.stringify)throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");return g.stringify(o.utils.unwrapObservable(a),b,c)},postJson:function(b,c,e){e=e||{};var f=e.params||{},g=e.includeFields||this.fieldsIncludedWithJsonPost,h=b;if("object"==typeof b&&"form"===o.utils.tagNameLower(b)){var i=b;h=i.action;for(var j=g.length-1;j>=0;j--)for(var k=o.utils.getFormFields(i,g[j]),l=k.length-1;l>=0;l--)f[k[l].name]=k[l].value}c=o.utils.unwrapObservable(c);var m=d.createElement("form");m.style.display="none",m.action=h,m.method="post";for(var n in c){var p=d.createElement("input");p.name=n,p.value=o.utils.stringifyJson(o.utils.unwrapObservable(c[n])),m.appendChild(p)}a(f,function(a,b){var c=d.createElement("input");c.name=a,c.value=b,m.appendChild(c)}),d.body.appendChild(m),e.submitter?e.submitter(m):m.submit(),setTimeout(function(){m.parentNode.removeChild(m)},0)}}}(),o.exportSymbol("utils",o.utils),o.exportSymbol("utils.arrayForEach",o.utils.arrayForEach),o.exportSymbol("utils.arrayFirst",o.utils.arrayFirst),o.exportSymbol("utils.arrayFilter",o.utils.arrayFilter),o.exportSymbol("utils.arrayGetDistinctValues",o.utils.arrayGetDistinctValues),o.exportSymbol("utils.arrayIndexOf",o.utils.arrayIndexOf),o.exportSymbol("utils.arrayMap",o.utils.arrayMap),o.exportSymbol("utils.arrayPushAll",o.utils.arrayPushAll),o.exportSymbol("utils.arrayRemoveItem",o.utils.arrayRemoveItem),o.exportSymbol("utils.extend",o.utils.extend),o.exportSymbol("utils.fieldsIncludedWithJsonPost",o.utils.fieldsIncludedWithJsonPost),o.exportSymbol("utils.getFormFields",o.utils.getFormFields),o.exportSymbol("utils.peekObservable",o.utils.peekObservable),o.exportSymbol("utils.postJson",o.utils.postJson),o.exportSymbol("utils.parseJson",o.utils.parseJson),o.exportSymbol("utils.registerEventHandler",o.utils.registerEventHandler),o.exportSymbol("utils.stringifyJson",o.utils.stringifyJson),o.exportSymbol("utils.range",o.utils.range),o.exportSymbol("utils.toggleDomNodeCssClass",o.utils.toggleDomNodeCssClass),o.exportSymbol("utils.triggerEvent",o.utils.triggerEvent),o.exportSymbol("utils.unwrapObservable",o.utils.unwrapObservable),o.exportSymbol("utils.objectForEach",o.utils.objectForEach),o.exportSymbol("utils.addOrRemoveItem",o.utils.addOrRemoveItem),o.exportSymbol("unwrap",o.utils.unwrapObservable),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=Array.prototype.slice.call(arguments),a=c.shift();return function(){return b.apply(a,c.concat(Array.prototype.slice.call(arguments)))}}),o.utils.domData=new function(){function a(a,f){var g=a[d],h=g&&"null"!==g&&e[g];if(!h){if(!f)return b;g=a[d]="ko"+c++,e[g]={}}return e[g]}var c=0,d="__ko__"+(new Date).getTime(),e={};return{get:function(c,d){var e=a(c,!1);return e===b?b:e[d]},set:function(c,d,e){if(e!==b||a(c,!1)!==b){var f=a(c,!0);f[d]=e}},clear:function(a){var b=a[d];return b?(delete e[b],a[d]=null,!0):!1},nextKey:function(){return c++ +d}}},o.exportSymbol("utils.domData",o.utils.domData),o.exportSymbol("utils.domData.clear",o.utils.domData.clear),o.utils.domNodeDisposal=new function(){function a(a,c){var d=o.utils.domData.get(a,g);return d===b&&c&&(d=[],o.utils.domData.set(a,g,d)),d}function c(a){o.utils.domData.set(a,g,b)}function d(b){var c=a(b,!1);if(c){c=c.slice(0);for(var d=0;d<c.length;d++)c[d](b)}o.utils.domData.clear(b),o.utils.domNodeDisposal.cleanExternalData(b),i[b.nodeType]&&e(b)}function e(a){for(var b,c=a.firstChild;b=c;)c=b.nextSibling,8===b.nodeType&&d(b)}var g=o.utils.domData.nextKey(),h={1:!0,8:!0,9:!0},i={1:!0,9:!0};return{addDisposeCallback:function(b,c){if("function"!=typeof c)throw new Error("Callback must be a function");a(b,!0).push(c)},removeDisposeCallback:function(b,d){var e=a(b,!1);e&&(o.utils.arrayRemoveItem(e,d),0==e.length&&c(b))},cleanNode:function(a){if(h[a.nodeType]&&(d(a),i[a.nodeType])){var b=[];o.utils.arrayPushAll(b,a.getElementsByTagName("*"));for(var c=0,e=b.length;e>c;c++)d(b[c])}return a},removeNode:function(a){o.cleanNode(a),a.parentNode&&a.parentNode.removeChild(a)},cleanExternalData:function(a){f&&"function"==typeof f.cleanData&&f.cleanData([a])}}},o.cleanNode=o.utils.domNodeDisposal.cleanNode,o.removeNode=o.utils.domNodeDisposal.removeNode,o.exportSymbol("cleanNode",o.cleanNode),o.exportSymbol("removeNode",o.removeNode),o.exportSymbol("utils.domNodeDisposal",o.utils.domNodeDisposal),o.exportSymbol("utils.domNodeDisposal.addDisposeCallback",o.utils.domNodeDisposal.addDisposeCallback),o.exportSymbol("utils.domNodeDisposal.removeDisposeCallback",o.utils.domNodeDisposal.removeDisposeCallback),function(){function a(a){var b=o.utils.stringTrim(a).toLowerCase(),e=d.createElement("div"),f=b.match(/^<(thead|tbody|tfoot)/)&&[1,"<table>","</table>"]||!b.indexOf("<tr")&&[2,"<table><tbody>","</tbody></table>"]||(!b.indexOf("<td")||!b.indexOf("<th"))&&[3,"<table><tbody><tr>","</tr></tbody></table>"]||[0,"",""],g="ignored<div>"+f[1]+a+f[2]+"</div>";for("function"==typeof c.innerShiv?e.appendChild(c.innerShiv(g)):e.innerHTML=g;f[0]--;)e=e.lastChild;return o.utils.makeArray(e.lastChild.childNodes)}function e(a){if(f.parseHTML)return f.parseHTML(a)||[];var b=f.clean([a]);if(b&&b[0]){for(var c=b[0];c.parentNode&&11!==c.parentNode.nodeType;)c=c.parentNode;c.parentNode&&c.parentNode.removeChild(c)}return b}o.utils.parseHtmlFragment=function(b){return f?e(b):a(b)},o.utils.setHtml=function(a,c){if(o.utils.emptyDomNode(a),c=o.utils.unwrapObservable(c),null!==c&&c!==b)if("string"!=typeof c&&(c=c.toString()),f)f(a).html(c);else for(var d=o.utils.parseHtmlFragment(c),e=0;e<d.length;e++)a.appendChild(d[e])}}(),o.exportSymbol("utils.parseHtmlFragment",o.utils.parseHtmlFragment),o.exportSymbol("utils.setHtml",o.utils.setHtml),o.memoization=function(){function a(){return(4294967296*(1+Math.random())|0).toString(16).substring(1)}function c(){return a()+a()}function d(a,b){if(a)if(8==a.nodeType){var c=o.memoization.parseMemoText(a.nodeValue);null!=c&&b.push({domNode:a,memoId:c})}else if(1==a.nodeType)for(var e=0,f=a.childNodes,g=f.length;g>e;e++)d(f[e],b)}var e={};return{memoize:function(a){if("function"!=typeof a)throw new Error("You can only pass a function to ko.memoization.memoize()");var b=c();return e[b]=a,"<!--[ko_memo:"+b+"]-->"},unmemoize:function(a,c){var d=e[a];if(d===b)throw new Error("Couldn't find any memo with ID "+a+". Perhaps it's already been unmemoized.");try{return d.apply(null,c||[]),!0}finally{delete e[a]}},unmemoizeDomNodeAndDescendants:function(a,b){var c=[];d(a,c);for(var e=0,f=c.length;f>e;e++){var g=c[e].domNode,h=[g];b&&o.utils.arrayPushAll(h,b),o.memoization.unmemoize(c[e].memoId,h),g.nodeValue="",g.parentNode&&g.parentNode.removeChild(g)}},parseMemoText:function(a){var b=a.match(/^\[ko_memo\:(.*?)\]$/);return b?b[1]:null}}}(),o.exportSymbol("memoization",o.memoization),o.exportSymbol("memoization.memoize",o.memoization.memoize),o.exportSymbol("memoization.unmemoize",o.memoization.unmemoize),o.exportSymbol("memoization.parseMemoText",o.memoization.parseMemoText),o.exportSymbol("memoization.unmemoizeDomNodeAndDescendants",o.memoization.unmemoizeDomNodeAndDescendants),o.extenders={throttle:function(a,b){a.throttleEvaluation=b;var c=null;return o.dependentObservable({read:a,write:function(d){clearTimeout(c),c=setTimeout(function(){a(d)},b)}})},rateLimit:function(a,b){var c,d,e;"number"==typeof b?c=b:(c=b.timeout,d=b.method),e="notifyWhenChangesStop"==d?k:j,a.limit(function(a){return e(a,c)})},notify:function(a,b){a.equalityComparer="always"==b?null:i}};var p={undefined:1,"boolean":1,number:1,string:1};o.exportSymbol("extenders",o.extenders),o.subscription=function(a,b,c){this.target=a,this.callback=b,this.disposeCallback=c,this.isDisposed=!1,o.exportProperty(this,"dispose",this.dispose)},o.subscription.prototype.dispose=function(){this.isDisposed=!0,this.disposeCallback()},o.subscribable=function(){o.utils.setPrototypeOfOrExtend(this,o.subscribable.fn),this._subscriptions={}};var q="change",r={subscribe:function(a,b,c){var d=this;c=c||q;var e=b?a.bind(b):a,f=new o.subscription(d,e,function(){o.utils.arrayRemoveItem(d._subscriptions[c],f)});return d.peek&&d.peek(),d._subscriptions[c]||(d._subscriptions[c]=[]),d._subscriptions[c].push(f),f},notifySubscribers:function(a,b){if(b=b||q,this.hasSubscriptionsForEvent(b))try{o.dependencyDetection.begin();for(var c,d=this._subscriptions[b].slice(0),e=0;c=d[e];++e)c.isDisposed||c.callback(a)}finally{o.dependencyDetection.end()}},limit:function(a){var b,c,d,e=this,f=o.isObservable(e),g="beforeChange";e._origNotifySubscribers||(e._origNotifySubscribers=e.notifySubscribers,e.notifySubscribers=function(a,b){b&&b!==q?b===g?e._rateLimitedBeforeChange(a):e._origNotifySubscribers(a,b):e._rateLimitedChange(a)});var h=a(function(){f&&d===e&&(d=e()),b=!1,e.isDifferent(c,d)&&e._origNotifySubscribers(c=d)});e._rateLimitedChange=function(a){b=!0,d=a,h()},e._rateLimitedBeforeChange=function(a){b||(c=a,e._origNotifySubscribers(a,g))}},hasSubscriptionsForEvent:function(a){return this._subscriptions[a]&&this._subscriptions[a].length},getSubscriptionsCount:function(){var a=0;return o.utils.objectForEach(this._subscriptions,function(b,c){a+=c.length}),a},isDifferent:function(a,b){return!this.equalityComparer||!this.equalityComparer(a,b)},extend:l};o.exportProperty(r,"subscribe",r.subscribe),o.exportProperty(r,"extend",r.extend),o.exportProperty(r,"getSubscriptionsCount",r.getSubscriptionsCount),o.utils.canSetPrototype&&o.utils.setPrototypeOf(r,Function.prototype),o.subscribable.fn=r,o.isSubscribable=function(a){return null!=a&&"function"==typeof a.subscribe&&"function"==typeof a.notifySubscribers},o.exportSymbol("subscribable",o.subscribable),o.exportSymbol("isSubscribable",o.isSubscribable),o.computedContext=o.dependencyDetection=function(){function a(){return++f}function b(a){e.push(d),d=a}function c(){d=e.pop()}var d,e=[],f=0;return{begin:b,end:c,registerDependency:function(b){if(d){if(!o.isSubscribable(b))throw new Error("Only subscribable things can act as dependencies");d.callback(b,b._id||(b._id=a()))}},ignore:function(a,d,e){try{return b(),a.apply(d,e||[])}finally{c()}},getDependenciesCount:function(){return d?d.computed.getDependenciesCount():void 0},isInitial:function(){return d?d.isInitial:void 0}}}(),o.exportSymbol("computedContext",o.computedContext),o.exportSymbol("computedContext.getDependenciesCount",o.computedContext.getDependenciesCount),o.exportSymbol("computedContext.isInitial",o.computedContext.isInitial),o.observable=function(b){function c(){return arguments.length>0?(c.isDifferent(d,arguments[0])&&(c.valueWillMutate(),d=arguments[0],a&&(c._latestValue=d),c.valueHasMutated()),this):(o.dependencyDetection.registerDependency(c),d)}var d=b;return o.subscribable.call(c),o.utils.setPrototypeOfOrExtend(c,o.observable.fn),a&&(c._latestValue=d),c.peek=function(){return d},c.valueHasMutated=function(){c.notifySubscribers(d)},c.valueWillMutate=function(){c.notifySubscribers(d,"beforeChange")},o.exportProperty(c,"peek",c.peek),o.exportProperty(c,"valueHasMutated",c.valueHasMutated),o.exportProperty(c,"valueWillMutate",c.valueWillMutate),c},o.observable.fn={equalityComparer:i};var s=o.observable.protoProperty="__ko_proto__";o.observable.fn[s]=o.observable,o.utils.canSetPrototype&&o.utils.setPrototypeOf(o.observable.fn,o.subscribable.fn),o.hasPrototype=function(a,c){return null===a||a===b||a[s]===b?!1:a[s]===c?!0:o.hasPrototype(a[s],c)},o.isObservable=function(a){return o.hasPrototype(a,o.observable)},o.isWriteableObservable=function(a){return"function"==typeof a&&a[s]===o.observable?!0:"function"==typeof a&&a[s]===o.dependentObservable&&a.hasWriteFunction?!0:!1},o.exportSymbol("observable",o.observable),o.exportSymbol("isObservable",o.isObservable),o.exportSymbol("isWriteableObservable",o.isWriteableObservable),o.observableArray=function(a){if(a=a||[],"object"!=typeof a||!("length"in a))throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");var b=o.observable(a);return o.utils.setPrototypeOfOrExtend(b,o.observableArray.fn),b.extend({trackArrayChanges:!0})},o.observableArray.fn={remove:function(a){for(var b=this.peek(),c=[],d="function"!=typeof a||o.isObservable(a)?function(b){return b===a}:a,e=0;e<b.length;e++){var f=b[e];d(f)&&(0===c.length&&this.valueWillMutate(),c.push(f),b.splice(e,1),e--)}return c.length&&this.valueHasMutated(),c},removeAll:function(a){if(a===b){var c=this.peek(),d=c.slice(0);return this.valueWillMutate(),c.splice(0,c.length),this.valueHasMutated(),d}return a?this.remove(function(b){return o.utils.arrayIndexOf(a,b)>=0}):[]},destroy:function(a){var b=this.peek(),c="function"!=typeof a||o.isObservable(a)?function(b){return b===a}:a;this.valueWillMutate();for(var d=b.length-1;d>=0;d--){var e=b[d];c(e)&&(b[d]._destroy=!0)}this.valueHasMutated()},destroyAll:function(a){return a===b?this.destroy(function(){return!0}):a?this.destroy(function(b){return o.utils.arrayIndexOf(a,b)>=0}):[]},indexOf:function(a){var b=this();return o.utils.arrayIndexOf(b,a)},replace:function(a,b){var c=this.indexOf(a);c>=0&&(this.valueWillMutate(),this.peek()[c]=b,this.valueHasMutated())}},o.utils.arrayForEach(["pop","push","reverse","shift","sort","splice","unshift"],function(a){o.observableArray.fn[a]=function(){var b=this.peek();this.valueWillMutate(),this.cacheDiffForKnownOperation(b,a,arguments);var c=b[a].apply(b,arguments);return this.valueHasMutated(),c}}),o.utils.arrayForEach(["slice"],function(a){o.observableArray.fn[a]=function(){var b=this();return b[a].apply(b,arguments)}}),o.utils.canSetPrototype&&o.utils.setPrototypeOf(o.observableArray.fn,o.observable.fn),o.exportSymbol("observableArray",o.observableArray);var t="arrayChange";o.extenders.trackArrayChanges=function(a){function b(){if(!d){d=!0;var b=a.notifySubscribers;a.notifySubscribers=function(a,c){return c&&c!==q||++f,b.apply(this,arguments)};var g=[].concat(a.peek()||[]);e=null,a.subscribe(function(b){if(b=[].concat(b||[]),a.hasSubscriptionsForEvent(t)){var d=c(g,b);d.length&&a.notifySubscribers(d,t)}g=b,e=null,f=0})}}function c(a,b){return(!e||f>1)&&(e=o.utils.compareArrays(a,b,{sparse:!0})),e}if(!a.cacheDiffForKnownOperation){var d=!1,e=null,f=0,g=a.subscribe;a.subscribe=a.subscribe=function(a,c,d){return d===t&&b(),g.apply(this,arguments)},a.cacheDiffForKnownOperation=function(a,b,c){function g(a,b,c){return h[h.length]={status:a,value:b,index:c}}if(d&&!f){var h=[],i=a.length,j=c.length,k=0;switch(b){case"push":k=i;case"unshift":for(var l=0;j>l;l++)g("added",c[l],k+l);break;case"pop":k=i-1;case"shift":i&&g("deleted",a[k],k);break;case"splice":for(var m=Math.min(Math.max(0,c[0]<0?i+c[0]:c[0]),i),n=1===j?i:Math.min(m+(c[1]||0),i),p=m+j-2,q=Math.max(n,p),r=[],s=[],l=m,t=2;q>l;++l,++t)n>l&&s.push(g("deleted",a[l],l)),p>l&&r.push(g("added",c[t],l));o.utils.findMovesInArrayComparison(s,r);break;default:return}e=h}}}},o.computed=o.dependentObservable=function(b,c,d){function e(a,b){x[b]||(x[b]=a.subscribe(g),++y)}function f(){q=!0,o.utils.objectForEach(x,function(a,b){b.dispose()}),x={},y=0,m=!1}function g(){var a=i.throttleEvaluation;a&&a>=0?(clearTimeout(z),z=setTimeout(h,a)):i._evalRateLimited?i._evalRateLimited():h()}function h(){if(!n&&!q){if(v&&v()){if(!p)return void w()}else p=!1;n=!0;try{var b=x,d=y;o.dependencyDetection.begin({callback:function(a,c){q||(d&&b[c]?(x[c]=b[c],++y,delete b[c],--d):e(a,c))},computed:i,isInitial:!y}),x={},y=0;try{var f=c?r.call(c):r()}finally{o.dependencyDetection.end(),d&&o.utils.objectForEach(b,function(a,b){b.dispose()}),m=!1}i.isDifferent(l,f)&&(i.notifySubscribers(l,"beforeChange"),l=f,a&&(i._latestValue=l),(!i._evalRateLimited||i.throttleEvaluation)&&i.notifySubscribers(l))}finally{n=!1}y||w()}}function i(){if(arguments.length>0){if("function"!=typeof s)throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");return s.apply(c,arguments),this}return m&&h(),o.dependencyDetection.registerDependency(i),l}function j(){return m&&!y&&h(),l}function k(){return m||y>0}var l,m=!0,n=!1,p=!1,q=!1,r=b;if(r&&"object"==typeof r?(d=r,r=d.read):(d=d||{},r||(r=d.read)),"function"!=typeof r)throw new Error("Pass a function that returns the value of the ko.computed");var s=d.write,t=d.disposeWhenNodeIsRemoved||d.disposeWhenNodeIsRemoved||null,u=d.disposeWhen||d.disposeWhen,v=u,w=f,x={},y=0,z=null;c||(c=d.owner),o.subscribable.call(i),o.utils.setPrototypeOfOrExtend(i,o.dependentObservable.fn),i.peek=j,i.getDependenciesCount=function(){return y},i.hasWriteFunction="function"==typeof d.write,i.dispose=function(){w()},i.isActive=k;var A=i.limit;return i.limit=function(a){A.call(i,a),i._evalRateLimited=function(){i._rateLimitedBeforeChange(l),m=!0,i._rateLimitedChange(i)}},o.exportProperty(i,"peek",i.peek),o.exportProperty(i,"dispose",i.dispose),o.exportProperty(i,"isActive",i.isActive),o.exportProperty(i,"getDependenciesCount",i.getDependenciesCount),t&&(p=!0,t.nodeType&&(v=function(){return!o.utils.domNodeIsAttachedToDocument(t)||u&&u()})),d.deferEvaluation!==!0&&h(),t&&k()&&t.nodeType&&(w=function(){o.utils.domNodeDisposal.removeDisposeCallback(t,w),f()},o.utils.domNodeDisposal.addDisposeCallback(t,w)),i},o.isComputed=function(a){return o.hasPrototype(a,o.dependentObservable)};var u=o.observable.protoProperty;o.dependentObservable[u]=o.observable,o.dependentObservable.fn={equalityComparer:i},o.dependentObservable.fn[u]=o.dependentObservable,o.utils.canSetPrototype&&o.utils.setPrototypeOf(o.dependentObservable.fn,o.subscribable.fn),o.exportSymbol("dependentObservable",o.dependentObservable),o.exportSymbol("computed",o.dependentObservable),o.exportSymbol("isComputed",o.isComputed),function(){function a(e,f,g){g=g||new d,e=f(e);var h=!("object"!=typeof e||null===e||e===b||e instanceof Date||e instanceof String||e instanceof Number||e instanceof Boolean);if(!h)return e;var i=e instanceof Array?[]:{};return g.save(e,i),c(e,function(c){var d=f(e[c]);switch(typeof d){case"boolean":case"number":case"string":case"function":i[c]=d;break;case"object":case"undefined":var h=g.get(d);i[c]=h!==b?h:a(d,f,g)}}),i}function c(a,b){if(a instanceof Array){for(var c=0;c<a.length;c++)b(c);"function"==typeof a.toJSON&&b("toJSON")}else for(var d in a)b(d)}function d(){this.keys=[],this.values=[]}var e=10;o.toJS=function(b){if(0==arguments.length)throw new Error("When calling ko.toJS, pass the object you want to convert.");return a(b,function(a){for(var b=0;o.isObservable(a)&&e>b;b++)a=a();return a})},o.toJSON=function(a,b,c){var d=o.toJS(a);return o.utils.stringifyJson(d,b,c)},d.prototype={constructor:d,save:function(a,b){var c=o.utils.arrayIndexOf(this.keys,a);c>=0?this.values[c]=b:(this.keys.push(a),this.values.push(b))},get:function(a){var c=o.utils.arrayIndexOf(this.keys,a);return c>=0?this.values[c]:b}}}(),o.exportSymbol("toJS",o.toJS),o.exportSymbol("toJSON",o.toJSON),function(){var a="__ko__hasDomDataOptionValue__";o.selectExtensions={readValue:function(c){switch(o.utils.tagNameLower(c)){case"option":return c[a]===!0?o.utils.domData.get(c,o.bindingHandlers.options.optionValueDomDataKey):o.utils.ieVersion<=7?c.getAttributeNode("value")&&c.getAttributeNode("value").specified?c.value:c.text:c.value;case"select":return c.selectedIndex>=0?o.selectExtensions.readValue(c.options[c.selectedIndex]):b;default:return c.value}},writeValue:function(c,d,e){switch(o.utils.tagNameLower(c)){case"option":switch(typeof d){case"string":o.utils.domData.set(c,o.bindingHandlers.options.optionValueDomDataKey,b),a in c&&delete c[a],c.value=d;break;default:o.utils.domData.set(c,o.bindingHandlers.options.optionValueDomDataKey,d),c[a]=!0,c.value="number"==typeof d?d:""}break;case"select":(""===d||null===d)&&(d=b);for(var f,g=-1,h=0,i=c.options.length;i>h;++h)if(f=o.selectExtensions.readValue(c.options[h]),f==d||""==f&&d===b){g=h;break}(e||g>=0||d===b&&c.size>1)&&(c.selectedIndex=g);break;default:(null===d||d===b)&&(d=""),c.value=d}}}}(),o.exportSymbol("selectExtensions",o.selectExtensions),o.exportSymbol("selectExtensions.readValue",o.selectExtensions.readValue),o.exportSymbol("selectExtensions.writeValue",o.selectExtensions.writeValue),o.expressionRewriting=function(){function a(a){if(o.utils.arrayIndexOf(d,a)>=0)return!1;var b=a.match(e);return null===b?!1:b[1]?"Object("+b[1]+")"+b[2]:a}function b(a){var b=o.utils.stringTrim(a);123===b.charCodeAt(0)&&(b=b.slice(1,-1));var c,d,e=[],f=b.match(l),g=0;if(f){f.push(",");for(var h,i=0;h=f[i];++i){var j=h.charCodeAt(0);if(44===j){if(0>=g){c&&e.push(d?{key:c,value:d.join("")}:{unknown:c}),c=d=g=0;continue}}else if(58===j){if(!d)continue}else if(47===j&&i&&h.length>1){var k=f[i-1].match(m);k&&!n[k[0]]&&(b=b.substr(b.indexOf(h)+1),f=b.match(l),f.push(","),i=-1,h="/")}else if(40===j||123===j||91===j)++g;else if(41===j||125===j||93===j)--g;else if(!c&&!d){c=34===j||39===j?h.slice(1,-1):h;continue}d?d.push(h):d=[h]}}return e}function c(c,d){function e(b,c){function d(a){return a&&a.preprocess?c=a.preprocess(c,b,e):!0}var i;d(o.getBindingHandler(b))&&(p[b]&&(i=a(c))&&g.push("'"+b+"':function(_z){"+i+"=_z}"),h&&(c="function(){return "+c+" }"),f.push("'"+b+"':"+c))}d=d||{};var f=[],g=[],h=d.valueAccessors,i="string"==typeof c?b(c):c;return o.utils.arrayForEach(i,function(a){e(a.key||a.unknown,a.value)}),g.length&&e("_ko_property_writers","{"+g.join(",")+" }"),f.join(",")}var d=["true","false","null","undefined"],e=/^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i,f='"(?:[^"\\\\]|\\\\.)*"',g="'(?:[^'\\\\]|\\\\.)*'",h="/(?:[^/\\\\]|\\\\.)*/w*",i=",\"'{}()/:[\\]",j="[^\\s:,/][^"+i+"]*[^\\s"+i+"]",k="[^\\s]",l=RegExp(f+"|"+g+"|"+h+"|"+j+"|"+k,"g"),m=/[\])"'A-Za-z0-9_$]+$/,n={"in":1,"return":1,"typeof":1},p={};return{bindingRewriteValidators:[],
twoWayBindings:p,parseObjectLiteral:b,preProcessBindings:c,keyValueArrayContainsKey:function(a,b){for(var c=0;c<a.length;c++)if(a[c].key==b)return!0;return!1},writeValueToProperty:function(a,b,c,d,e){if(a&&o.isObservable(a))!o.isWriteableObservable(a)||e&&a.peek()===d||a(d);else{var f=b.get("_ko_property_writers");f&&f[c]&&f[c](d)}}}}(),o.exportSymbol("expressionRewriting",o.expressionRewriting),o.exportSymbol("expressionRewriting.bindingRewriteValidators",o.expressionRewriting.bindingRewriteValidators),o.exportSymbol("expressionRewriting.parseObjectLiteral",o.expressionRewriting.parseObjectLiteral),o.exportSymbol("expressionRewriting.preProcessBindings",o.expressionRewriting.preProcessBindings),o.exportSymbol("expressionRewriting._twoWayBindings",o.expressionRewriting.twoWayBindings),o.exportSymbol("jsonExpressionRewriting",o.expressionRewriting),o.exportSymbol("jsonExpressionRewriting.insertPropertyAccessorsIntoJson",o.expressionRewriting.preProcessBindings),function(){function a(a){return 8==a.nodeType&&h.test(g?a.text:a.nodeValue)}function b(a){return 8==a.nodeType&&i.test(g?a.text:a.nodeValue)}function c(c,d){for(var e=c,f=1,g=[];e=e.nextSibling;){if(b(e)&&(f--,0===f))return g;g.push(e),a(e)&&f++}if(!d)throw new Error("Cannot find closing comment tag to match: "+c.nodeValue);return null}function e(a,b){var d=c(a,b);return d?d.length>0?d[d.length-1].nextSibling:a.nextSibling:null}function f(c){var d=c.firstChild,f=null;if(d)do if(f)f.push(d);else if(a(d)){var g=e(d,!0);g?d=g:f=[d]}else b(d)&&(f=[d]);while(d=d.nextSibling);return f}var g=d&&"<!--test-->"===d.createComment("test").text,h=g?/^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/:/^\s*ko(?:\s+([\s\S]+))?\s*$/,i=g?/^<!--\s*\/ko\s*-->$/:/^\s*\/ko\s*$/,j={ul:!0,ol:!0};o.virtualElements={allowedBindings:{},childNodes:function(b){return a(b)?c(b):b.childNodes},emptyNode:function(b){if(a(b))for(var c=o.virtualElements.childNodes(b),d=0,e=c.length;e>d;d++)o.removeNode(c[d]);else o.utils.emptyDomNode(b)},setDomNodeChildren:function(b,c){if(a(b)){o.virtualElements.emptyNode(b);for(var d=b.nextSibling,e=0,f=c.length;f>e;e++)d.parentNode.insertBefore(c[e],d)}else o.utils.setDomNodeChildren(b,c)},prepend:function(b,c){a(b)?b.parentNode.insertBefore(c,b.nextSibling):b.firstChild?b.insertBefore(c,b.firstChild):b.appendChild(c)},insertAfter:function(b,c,d){d?a(b)?b.parentNode.insertBefore(c,d.nextSibling):d.nextSibling?b.insertBefore(c,d.nextSibling):b.appendChild(c):o.virtualElements.prepend(b,c)},firstChild:function(c){return a(c)?!c.nextSibling||b(c.nextSibling)?null:c.nextSibling:c.firstChild},nextSibling:function(c){return a(c)&&(c=e(c)),c.nextSibling&&b(c.nextSibling)?null:c.nextSibling},hasBindingValue:a,virtualNodeBindingValue:function(a){var b=(g?a.text:a.nodeValue).match(h);return b?b[1]:null},normaliseVirtualElementDomStructure:function(a){if(j[o.utils.tagNameLower(a)]){var b=a.firstChild;if(b)do if(1===b.nodeType){var c=f(b);if(c)for(var d=b.nextSibling,e=0;e<c.length;e++)d?a.insertBefore(c[e],d):a.appendChild(c[e])}while(b=b.nextSibling)}}}}(),o.exportSymbol("virtualElements",o.virtualElements),o.exportSymbol("virtualElements.allowedBindings",o.virtualElements.allowedBindings),o.exportSymbol("virtualElements.emptyNode",o.virtualElements.emptyNode),o.exportSymbol("virtualElements.insertAfter",o.virtualElements.insertAfter),o.exportSymbol("virtualElements.prepend",o.virtualElements.prepend),o.exportSymbol("virtualElements.setDomNodeChildren",o.virtualElements.setDomNodeChildren),function(){function a(a,c,d){var e=a+(d&&d.valueAccessors||"");return c[e]||(c[e]=b(a,d))}function b(a,b){var c=o.expressionRewriting.preProcessBindings(a,b),d="with($context){with($data||{}){return{"+c+"}}}";return new Function("$context","$element",d)}var c="data-bind";o.bindingProvider=function(){this.bindingCache={}},o.utils.extend(o.bindingProvider.prototype,{nodeHasBindings:function(a){switch(a.nodeType){case 1:return null!=a.getAttribute(c);case 8:return o.virtualElements.hasBindingValue(a);default:return!1}},getBindings:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a):null},getBindingAccessors:function(a,b){var c=this.getBindingsString(a,b);return c?this.parseBindingsString(c,b,a,{valueAccessors:!0}):null},getBindingsString:function(a,b){switch(a.nodeType){case 1:return a.getAttribute(c);case 8:return o.virtualElements.virtualNodeBindingValue(a);default:return null}},parseBindingsString:function(b,c,d,e){try{var f=a(b,this.bindingCache,e);return f(c,d)}catch(g){throw g.message="Unable to parse bindings.\nBindings value: "+b+"\nMessage: "+g.message,g}}}),o.bindingProvider.instance=new o.bindingProvider}(),o.exportSymbol("bindingProvider",o.bindingProvider),function(){function a(a){return function(){return a}}function d(a){return a()}function e(a){return o.utils.objectMap(o.dependencyDetection.ignore(a),function(b,c){return function(){return a()[c]}})}function g(b,c,d){return"function"==typeof b?e(b.bind(null,c,d)):o.utils.objectMap(b,a)}function h(a,b){return e(this.getBindings.bind(this,a,b))}function i(a){var b=o.virtualElements.allowedBindings[a];if(!b)throw new Error("The binding '"+a+"' cannot be used with virtual elements")}function j(a,b,c){var d,e=o.virtualElements.firstChild(b),f=o.bindingProvider.instance,g=f.preprocessNode;if(g){for(;d=e;)e=o.virtualElements.nextSibling(d),g.call(f,d);e=o.virtualElements.firstChild(b)}for(;d=e;)e=o.virtualElements.nextSibling(d),k(a,d,c)}function k(a,b,c){var d=!0,e=1===b.nodeType;e&&o.virtualElements.normaliseVirtualElementDomStructure(b);var f=e&&c||o.bindingProvider.instance.nodeHasBindings(b);f&&(d=m(b,null,a,c).shouldBindDescendants),d&&!p[o.utils.tagNameLower(b)]&&j(a,b,!e)}function l(a){var b=[],c={},d=[];return o.utils.objectForEach(a,function e(f){if(!c[f]){var g=o.getBindingHandler(f);g&&(g.after&&(d.push(f),o.utils.arrayForEach(g.after,function(b){if(a[b]){if(-1!==o.utils.arrayIndexOf(d,b))throw Error("Cannot combine the following bindings, because they have a cyclic dependency: "+d.join(", "));e(b)}}),d.length--),b.push({key:f,handler:g})),c[f]=!0}}),b}function m(a,c,e,f){function g(){return o.utils.objectMap(p?p():k,d)}var j=o.utils.domData.get(a,q);if(!c){if(j)throw Error("You cannot apply bindings multiple times to the same element.");o.utils.domData.set(a,q,!0)}!j&&f&&o.storedBindingContextForNode(a,e);var k;if(c&&"function"!=typeof c)k=c;else{var m=o.bindingProvider.instance,n=m.getBindingAccessors||h,p=o.dependentObservable(function(){return k=c?c(e,a):n.call(m,a,e),k&&e._subscribable&&e._subscribable(),k},null,{disposeWhenNodeIsRemoved:a});k&&p.isActive()||(p=null)}var r;if(k){var s=p?function(a){return function(){return d(p()[a])}}:function(a){return k[a]};g.get=function(a){return k[a]&&d(s(a))},g.has=function(a){return a in k};var t=l(k);o.utils.arrayForEach(t,function(c){var d=c.handler.init,f=c.handler.update,h=c.key;8===a.nodeType&&i(h);try{"function"==typeof d&&o.dependencyDetection.ignore(function(){var c=d(a,s(h),g,e.$data,e);if(c&&c.controlsDescendantBindings){if(r!==b)throw new Error("Multiple bindings ("+r+" and "+h+") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");r=h}}),"function"==typeof f&&o.dependentObservable(function(){f(a,s(h),g,e.$data,e)},null,{disposeWhenNodeIsRemoved:a})}catch(j){throw j.message='Unable to process binding "'+h+": "+k[h]+'"\nMessage: '+j.message,j}})}return{shouldBindDescendants:r===b}}function n(a){return a&&a instanceof o.bindingContext?a:new o.bindingContext(a)}o.bindingHandlers={};var p={script:!0};o.getBindingHandler=function(a){return o.bindingHandlers[a]},o.bindingContext=function(a,c,d,e){function f(){var b=j?a():a,f=o.utils.unwrapObservable(b);return c?(c._subscribable&&c._subscribable(),o.utils.extend(i,c),k&&(i._subscribable=k)):(i.$parents=[],i.$root=f,i.ko=o),i.$rawData=b,i.$data=f,d&&(i[d]=f),e&&e(i,c,f),i.$data}function g(){return h&&!o.utils.anyDomNodeIsAttachedToDocument(h)}var h,i=this,j="function"==typeof a&&!o.isObservable(a),k=o.dependentObservable(f,null,{disposeWhen:g,disposeWhenNodeIsRemoved:!0});k.isActive()&&(i._subscribable=k,k.equalityComparer=null,h=[],k._addNode=function(a){h.push(a),o.utils.domNodeDisposal.addDisposeCallback(a,function(a){o.utils.arrayRemoveItem(h,a),h.length||(k.dispose(),i._subscribable=k=b)})})},o.bindingContext.prototype.createChildContext=function(a,b,c){return new o.bindingContext(a,this,b,function(a,b){a.$parentContext=b,a.$parent=b.$data,a.$parents=(b.$parents||[]).slice(0),a.$parents.unshift(a.$parent),c&&c(a)})},o.bindingContext.prototype.extend=function(a){return new o.bindingContext(this._subscribable||this.$data,this,null,function(b,c){b.$rawData=c.$rawData,o.utils.extend(b,"function"==typeof a?a():a)})};var q=o.utils.domData.nextKey(),r=o.utils.domData.nextKey();o.storedBindingContextForNode=function(a,b){return 2!=arguments.length?o.utils.domData.get(a,r):(o.utils.domData.set(a,r,b),void(b._subscribable&&b._subscribable._addNode(a)))},o.applyBindingAccessorsToNode=function(a,b,c){return 1===a.nodeType&&o.virtualElements.normaliseVirtualElementDomStructure(a),m(a,b,n(c),!0)},o.applyBindingsToNode=function(a,b,c){var d=n(c);return o.applyBindingAccessorsToNode(a,g(b,d,a),d)},o.applyBindingsToDescendants=function(a,b){(1===b.nodeType||8===b.nodeType)&&j(n(a),b,!0)},o.applyBindings=function(a,b){if(!f&&c.jQuery&&(f=c.jQuery),b&&1!==b.nodeType&&8!==b.nodeType)throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");b=b||c.document.body,k(n(a),b,!0)},o.contextFor=function(a){switch(a.nodeType){case 1:case 8:var c=o.storedBindingContextForNode(a);if(c)return c;if(a.parentNode)return o.contextFor(a.parentNode)}return b},o.dataFor=function(a){var c=o.contextFor(a);return c?c.$data:b},o.exportSymbol("bindingHandlers",o.bindingHandlers),o.exportSymbol("applyBindings",o.applyBindings),o.exportSymbol("applyBindingsToDescendants",o.applyBindingsToDescendants),o.exportSymbol("applyBindingAccessorsToNode",o.applyBindingAccessorsToNode),o.exportSymbol("applyBindingsToNode",o.applyBindingsToNode),o.exportSymbol("contextFor",o.contextFor),o.exportSymbol("dataFor",o.dataFor)}();var v={"class":"className","for":"htmlFor"};o.bindingHandlers.attr={update:function(a,c,d){var e=o.utils.unwrapObservable(c())||{};o.utils.objectForEach(e,function(c,d){d=o.utils.unwrapObservable(d);var e=d===!1||null===d||d===b;e&&a.removeAttribute(c),o.utils.ieVersion<=8&&c in v?(c=v[c],e?a.removeAttribute(c):a[c]=d):e||a.setAttribute(c,d.toString()),"name"===c&&o.utils.setElementName(a,e?"":d.toString())})}},function(){o.bindingHandlers.checked={after:["value","attr"],init:function(a,c,d){function e(){return d.has("checkedValue")?o.utils.unwrapObservable(d.get("checkedValue")):a.value}function f(){var b=a.checked,f=l?e():b;if(!o.computedContext.isInitial()&&(!i||b)){var g=o.dependencyDetection.ignore(c);j?k!==f?(b&&(o.utils.addOrRemoveItem(g,f,!0),o.utils.addOrRemoveItem(g,k,!1)),k=f):o.utils.addOrRemoveItem(g,f,b):o.expressionRewriting.writeValueToProperty(g,d,"checked",f,!0)}}function g(){var b=o.utils.unwrapObservable(c());j?a.checked=o.utils.arrayIndexOf(b,e())>=0:h?a.checked=b:a.checked=e()===b}var h="checkbox"==a.type,i="radio"==a.type;if(h||i){var j=h&&o.utils.unwrapObservable(c())instanceof Array,k=j?e():b,l=i||j;i&&!a.name&&o.bindingHandlers.uniqueName.init(a,function(){return!0}),o.computed(f,null,{disposeWhenNodeIsRemoved:a}),o.utils.registerEventHandler(a,"click",f),o.computed(g,null,{disposeWhenNodeIsRemoved:a})}}},o.expressionRewriting.twoWayBindings.checked=!0,o.bindingHandlers.checkedValue={update:function(a,b){a.value=o.utils.unwrapObservable(b())}}}();var w="__ko__cssValue";o.bindingHandlers.css={update:function(a,b){var c=o.utils.unwrapObservable(b());"object"==typeof c?o.utils.objectForEach(c,function(b,c){c=o.utils.unwrapObservable(c),o.utils.toggleDomNodeCssClass(a,b,c)}):(c=String(c||""),o.utils.toggleDomNodeCssClass(a,a[w],!1),a[w]=c,o.utils.toggleDomNodeCssClass(a,c,!0))}},o.bindingHandlers.enable={update:function(a,b){var c=o.utils.unwrapObservable(b());c&&a.disabled?a.removeAttribute("disabled"):c||a.disabled||(a.disabled=!0)}},o.bindingHandlers.disable={update:function(a,b){o.bindingHandlers.enable.update(a,function(){return!o.utils.unwrapObservable(b())})}},o.bindingHandlers.event={init:function(a,b,c,d,e){var f=b()||{};o.utils.objectForEach(f,function(f){"string"==typeof f&&o.utils.registerEventHandler(a,f,function(a){var g,h=b()[f];if(h){try{var i=o.utils.makeArray(arguments);d=e.$data,i.unshift(d),g=h.apply(d,i)}finally{g!==!0&&(a.preventDefault?a.preventDefault():a.returnValue=!1)}var j=c.get(f+"Bubble")!==!1;j||(a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation())}})})}},o.bindingHandlers.foreach={makeTemplateValueAccessor:function(a){return function(){var b=a(),c=o.utils.peekObservable(b);return c&&"number"!=typeof c.length?(o.utils.unwrapObservable(b),{foreach:c.data,as:c.as,includeDestroyed:c.includeDestroyed,afterAdd:c.afterAdd,beforeRemove:c.beforeRemove,afterRender:c.afterRender,beforeMove:c.beforeMove,afterMove:c.afterMove,templateEngine:o.nativeTemplateEngine.instance}):{foreach:b,templateEngine:o.nativeTemplateEngine.instance}}},init:function(a,b,c,d,e){return o.bindingHandlers.template.init(a,o.bindingHandlers.foreach.makeTemplateValueAccessor(b))},update:function(a,b,c,d,e){return o.bindingHandlers.template.update(a,o.bindingHandlers.foreach.makeTemplateValueAccessor(b),c,d,e)}},o.expressionRewriting.bindingRewriteValidators.foreach=!1,o.virtualElements.allowedBindings.foreach=!0;var x="__ko_hasfocusUpdating",y="__ko_hasfocusLastValue";o.bindingHandlers.hasfocus={init:function(a,b,c){var d=function(d){a[x]=!0;var e=a.ownerDocument;if("activeElement"in e){var f;try{f=e.activeElement}catch(g){f=e.body}d=f===a}var h=b();o.expressionRewriting.writeValueToProperty(h,c,"hasfocus",d,!0),a[y]=d,a[x]=!1},e=d.bind(null,!0),f=d.bind(null,!1);o.utils.registerEventHandler(a,"focus",e),o.utils.registerEventHandler(a,"focusin",e),o.utils.registerEventHandler(a,"blur",f),o.utils.registerEventHandler(a,"focusout",f)},update:function(a,b){var c=!!o.utils.unwrapObservable(b());a[x]||a[y]===c||(c?a.focus():a.blur(),o.dependencyDetection.ignore(o.utils.triggerEvent,null,[a,c?"focusin":"focusout"]))}},o.expressionRewriting.twoWayBindings.hasfocus=!0,o.bindingHandlers.hasFocus=o.bindingHandlers.hasfocus,o.expressionRewriting.twoWayBindings.hasFocus=!0,o.bindingHandlers.html={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){o.utils.setHtml(a,b())}},n("if"),n("ifnot",!1,!0),n("with",!0,!1,function(a,b){return a.createChildContext(b)});var z={};o.bindingHandlers.options={init:function(a){if("select"!==o.utils.tagNameLower(a))throw new Error("options binding applies only to SELECT elements");for(;a.length>0;)a.remove(0);return{controlsDescendantBindings:!0}},update:function(a,c,d){function e(){return o.utils.arrayFilter(a.options,function(a){return a.selected})}function f(a,b,c){var d=typeof b;return"function"==d?b(a):"string"==d?a[b]:c}function g(c,e,g){g.length&&(k=g[0].selected?[o.selectExtensions.readValue(g[0])]:[],r=!0);var h=a.ownerDocument.createElement("option");if(c===z)o.utils.setTextContent(h,d.get("optionsCaption")),o.selectExtensions.writeValue(h,b);else{var i=f(c,d.get("optionsValue"),c);o.selectExtensions.writeValue(h,o.utils.unwrapObservable(i));var j=f(c,d.get("optionsText"),i);o.utils.setTextContent(h,j)}return[h]}function h(b,c){if(k.length){var d=o.utils.arrayIndexOf(k,o.selectExtensions.readValue(c[0]))>=0;o.utils.setOptionNodeSelectionState(c[0],d),r&&!d&&o.dependencyDetection.ignore(o.utils.triggerEvent,null,[a,"change"])}}var i,j,k,l=0==a.length,m=!l&&a.multiple?a.scrollTop:null,n=o.utils.unwrapObservable(c()),p=d.get("optionsIncludeDestroyed"),q={};k=a.multiple?o.utils.arrayMap(e(),o.selectExtensions.readValue):a.selectedIndex>=0?[o.selectExtensions.readValue(a.options[a.selectedIndex])]:[],n&&("undefined"==typeof n.length&&(n=[n]),j=o.utils.arrayFilter(n,function(a){return p||a===b||null===a||!o.utils.unwrapObservable(a._destroy)}),d.has("optionsCaption")&&(i=o.utils.unwrapObservable(d.get("optionsCaption")),null!==i&&i!==b&&j.unshift(z)));var r=!1;q.beforeRemove=function(b){a.removeChild(b)};var s=h;d.has("optionsAfterRender")&&(s=function(a,c){h(a,c),o.dependencyDetection.ignore(d.get("optionsAfterRender"),null,[c[0],a!==z?a:b])}),o.utils.setDomNodeChildrenFromArrayMapping(a,j,g,q,s),o.dependencyDetection.ignore(function(){if(d.get("valueAllowUnset")&&d.has("value"))o.selectExtensions.writeValue(a,o.utils.unwrapObservable(d.get("value")),!0);else{var b;b=a.multiple?k.length&&e().length<k.length:k.length&&a.selectedIndex>=0?o.selectExtensions.readValue(a.options[a.selectedIndex])!==k[0]:k.length||a.selectedIndex>=0,b&&o.utils.triggerEvent(a,"change")}}),o.utils.ensureSelectElementIsRenderedCorrectly(a),m&&Math.abs(m-a.scrollTop)>20&&(a.scrollTop=m)}},o.bindingHandlers.options.optionValueDomDataKey=o.utils.domData.nextKey(),o.bindingHandlers.selectedOptions={after:["options","foreach"],init:function(a,b,c){o.utils.registerEventHandler(a,"change",function(){var d=b(),e=[];o.utils.arrayForEach(a.getElementsByTagName("option"),function(a){a.selected&&e.push(o.selectExtensions.readValue(a))}),o.expressionRewriting.writeValueToProperty(d,c,"selectedOptions",e)})},update:function(a,b){if("select"!=o.utils.tagNameLower(a))throw new Error("values binding applies only to SELECT elements");var c=o.utils.unwrapObservable(b());c&&"number"==typeof c.length&&o.utils.arrayForEach(a.getElementsByTagName("option"),function(a){var b=o.utils.arrayIndexOf(c,o.selectExtensions.readValue(a))>=0;o.utils.setOptionNodeSelectionState(a,b)})}},o.expressionRewriting.twoWayBindings.selectedOptions=!0,o.bindingHandlers.style={update:function(a,b){var c=o.utils.unwrapObservable(b()||{});o.utils.objectForEach(c,function(b,c){c=o.utils.unwrapObservable(c),a.style[b]=c||""})}},o.bindingHandlers.submit={init:function(a,b,c,d,e){if("function"!=typeof b())throw new Error("The value for a submit binding must be a function");o.utils.registerEventHandler(a,"submit",function(c){var d,f=b();try{d=f.call(e.$data,a)}finally{d!==!0&&(c.preventDefault?c.preventDefault():c.returnValue=!1)}})}},o.bindingHandlers.text={init:function(){return{controlsDescendantBindings:!0}},update:function(a,b){o.utils.setTextContent(a,b())}},o.virtualElements.allowedBindings.text=!0,o.bindingHandlers.uniqueName={init:function(a,b){if(b()){var c="ko_unique_"+ ++o.bindingHandlers.uniqueName.currentIndex;o.utils.setElementName(a,c)}}},o.bindingHandlers.uniqueName.currentIndex=0,o.bindingHandlers.value={after:["options","foreach"],init:function(a,b,c){var d=["change"],e=c.get("valueUpdate"),f=!1;e&&("string"==typeof e&&(e=[e]),o.utils.arrayPushAll(d,e),d=o.utils.arrayGetDistinctValues(d));var g=function(){f=!1;var d=b(),e=o.selectExtensions.readValue(a);o.expressionRewriting.writeValueToProperty(d,c,"value",e)},h=o.utils.ieVersion&&"input"==a.tagName.toLowerCase()&&"text"==a.type&&"off"!=a.autocomplete&&(!a.form||"off"!=a.form.autocomplete);h&&-1==o.utils.arrayIndexOf(d,"propertychange")&&(o.utils.registerEventHandler(a,"propertychange",function(){f=!0}),o.utils.registerEventHandler(a,"focus",function(){f=!1}),o.utils.registerEventHandler(a,"blur",function(){f&&g()})),o.utils.arrayForEach(d,function(b){var c=g;o.utils.stringStartsWith(b,"after")&&(c=function(){setTimeout(g,0)},b=b.substring("after".length)),o.utils.registerEventHandler(a,b,c)})},update:function(a,b,c){var d=o.utils.unwrapObservable(b()),e=o.selectExtensions.readValue(a),f=d!==e;if(f)if("select"===o.utils.tagNameLower(a)){var g=c.get("valueAllowUnset"),h=function(){o.selectExtensions.writeValue(a,d,g)};h(),g||d===o.selectExtensions.readValue(a)?setTimeout(h,0):o.dependencyDetection.ignore(o.utils.triggerEvent,null,[a,"change"])}else o.selectExtensions.writeValue(a,d)}},o.expressionRewriting.twoWayBindings.value=!0,o.bindingHandlers.visible={update:function(a,b){var c=o.utils.unwrapObservable(b()),d=!("none"==a.style.display);c&&!d?a.style.display="":!c&&d&&(a.style.display="none")}},m("click"),o.templateEngine=function(){},o.templateEngine.prototype.renderTemplateSource=function(a,b,c){throw new Error("Override renderTemplateSource")},o.templateEngine.prototype.createJavaScriptEvaluatorBlock=function(a){throw new Error("Override createJavaScriptEvaluatorBlock")},o.templateEngine.prototype.makeTemplateSource=function(a,b){if("string"==typeof a){b=b||d;var c=b.getElementById(a);if(!c)throw new Error("Cannot find template with ID "+a);return new o.templateSources.domElement(c)}if(1==a.nodeType||8==a.nodeType)return new o.templateSources.anonymousTemplate(a);throw new Error("Unknown template type: "+a)},o.templateEngine.prototype.renderTemplate=function(a,b,c,d){var e=this.makeTemplateSource(a,d);return this.renderTemplateSource(e,b,c)},o.templateEngine.prototype.isTemplateRewritten=function(a,b){return this.allowTemplateRewriting===!1?!0:this.makeTemplateSource(a,b).data("isRewritten")},o.templateEngine.prototype.rewriteTemplate=function(a,b,c){var d=this.makeTemplateSource(a,c),e=b(d.text());d.text(e),d.data("isRewritten",!0)},o.exportSymbol("templateEngine",o.templateEngine),o.templateRewriting=function(){function a(a){for(var b=o.expressionRewriting.bindingRewriteValidators,c=0;c<a.length;c++){var d=a[c].key;if(b.hasOwnProperty(d)){var e=b[d];if("function"==typeof e){var f=e(a[c].value);if(f)throw new Error(f)}else if(!e)throw new Error("This template engine does not support the '"+d+"' binding within its templates")}}}function b(b,c,d,e){var f=o.expressionRewriting.parseObjectLiteral(b);a(f);var g=o.expressionRewriting.preProcessBindings(f,{valueAccessors:!0}),h="ko.__tr_ambtns(function($context,$element){return(function(){return{ "+g+" } })()},'"+d.toLowerCase()+"')";return e.createJavaScriptEvaluatorBlock(h)+c}var c=/(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi,d=/<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;return{ensureTemplateIsRewritten:function(a,b,c){b.isTemplateRewritten(a,c)||b.rewriteTemplate(a,function(a){return o.templateRewriting.memoizeBindingAttributeSyntax(a,b)},c)},memoizeBindingAttributeSyntax:function(a,e){return a.replace(c,function(){return b(arguments[4],arguments[1],arguments[2],e)}).replace(d,function(){return b(arguments[1],"<!-- ko -->","#comment",e)})},applyMemoizedBindingsToNextSibling:function(a,b){return o.memoization.memoize(function(c,d){var e=c.nextSibling;e&&e.nodeName.toLowerCase()===b&&o.applyBindingAccessorsToNode(e,a,d)})}}}(),o.exportSymbol("__tr_ambtns",o.templateRewriting.applyMemoizedBindingsToNextSibling),function(){o.templateSources={},o.templateSources.domElement=function(a){this.domElement=a},o.templateSources.domElement.prototype.text=function(){var a=o.utils.tagNameLower(this.domElement),b="script"===a?"text":"textarea"===a?"value":"innerHTML";if(0==arguments.length)return this.domElement[b];var c=arguments[0];"innerHTML"===b?o.utils.setHtml(this.domElement,c):this.domElement[b]=c};var a=o.utils.domData.nextKey()+"_";o.templateSources.domElement.prototype.data=function(b){return 1===arguments.length?o.utils.domData.get(this.domElement,a+b):void o.utils.domData.set(this.domElement,a+b,arguments[1])};var c=o.utils.domData.nextKey();o.templateSources.anonymousTemplate=function(a){this.domElement=a},o.templateSources.anonymousTemplate.prototype=new o.templateSources.domElement,o.templateSources.anonymousTemplate.prototype.constructor=o.templateSources.anonymousTemplate,o.templateSources.anonymousTemplate.prototype.text=function(){if(0==arguments.length){var a=o.utils.domData.get(this.domElement,c)||{};return a.textData===b&&a.containerData&&(a.textData=a.containerData.innerHTML),a.textData}var d=arguments[0];o.utils.domData.set(this.domElement,c,{textData:d})},o.templateSources.domElement.prototype.nodes=function(){if(0==arguments.length){var a=o.utils.domData.get(this.domElement,c)||{};return a.containerData}var b=arguments[0];o.utils.domData.set(this.domElement,c,{containerData:b})},o.exportSymbol("templateSources",o.templateSources),o.exportSymbol("templateSources.domElement",o.templateSources.domElement),o.exportSymbol("templateSources.anonymousTemplate",o.templateSources.anonymousTemplate)}(),function(){function a(a,b,c){for(var d,e=a,f=o.virtualElements.nextSibling(b);e&&(d=e)!==f;)e=o.virtualElements.nextSibling(d),c(d,e)}function c(b,c){if(b.length){var d=b[0],e=b[b.length-1],f=d.parentNode,g=o.bindingProvider.instance,h=g.preprocessNode;if(h){if(a(d,e,function(a,b){var c=a.previousSibling,f=h.call(g,a);f&&(a===d&&(d=f[0]||b),a===e&&(e=f[f.length-1]||c))}),b.length=0,!d)return;d===e?b.push(d):(b.push(d,e),o.utils.fixUpContinuousNodeArray(b,f))}a(d,e,function(a){(1===a.nodeType||8===a.nodeType)&&o.applyBindings(c,a)}),a(d,e,function(a){(1===a.nodeType||8===a.nodeType)&&o.memoization.unmemoizeDomNodeAndDescendants(a,[c])}),o.utils.fixUpContinuousNodeArray(b,f)}}function d(a){return a.nodeType?a:a.length>0?a[0]:null}function e(a,b,e,f,h){h=h||{};var i=a&&d(a),j=i&&i.ownerDocument,k=h.templateEngine||g;o.templateRewriting.ensureTemplateIsRewritten(e,k,j);var l=k.renderTemplate(e,f,h,j);if("number"!=typeof l.length||l.length>0&&"number"!=typeof l[0].nodeType)throw new Error("Template engine must return an array of DOM nodes");var m=!1;switch(b){case"replaceChildren":o.virtualElements.setDomNodeChildren(a,l),m=!0;break;case"replaceNode":o.utils.replaceDomNodes(a,l),m=!0;break;case"ignoreTargetNode":break;default:throw new Error("Unknown renderMode: "+b)}return m&&(c(l,f),h.afterRender&&o.dependencyDetection.ignore(h.afterRender,null,[l,f.$data])),l}function f(a,c){var d=o.utils.domData.get(a,h);d&&"function"==typeof d.dispose&&d.dispose(),o.utils.domData.set(a,h,c&&c.isActive()?c:b)}var g;o.setTemplateEngine=function(a){if(a!=b&&!(a instanceof o.templateEngine))throw new Error("templateEngine must inherit from ko.templateEngine");g=a},o.renderTemplate=function(a,c,f,h,i){if(f=f||{},(f.templateEngine||g)==b)throw new Error("Set a template engine before calling renderTemplate");if(i=i||"replaceChildren",h){var j=d(h),k=function(){return!j||!o.utils.domNodeIsAttachedToDocument(j)},l=j&&"replaceNode"==i?j.parentNode:j;return o.dependentObservable(function(){var b=c&&c instanceof o.bindingContext?c:new o.bindingContext(o.utils.unwrapObservable(c)),g=o.isObservable(a)?a():"function"==typeof a?a(b.$data,b):a,k=e(h,i,g,b,f);"replaceNode"==i&&(h=k,j=d(h))},null,{disposeWhen:k,disposeWhenNodeIsRemoved:l})}return o.memoization.memoize(function(b){o.renderTemplate(a,c,f,b,"replaceNode")})},o.renderTemplateForEach=function(a,d,f,g,h){var i,j=function(b,c){i=h.createChildContext(b,f.as,function(a){a.$index=c});var d="function"==typeof a?a(b,i):a;return e(null,"ignoreTargetNode",d,i,f)},k=function(a,b,d){c(b,i),f.afterRender&&f.afterRender(b,a)};return o.dependentObservable(function(){var a=o.utils.unwrapObservable(d)||[];"undefined"==typeof a.length&&(a=[a]);var c=o.utils.arrayFilter(a,function(a){return f.includeDestroyed||a===b||null===a||!o.utils.unwrapObservable(a._destroy)});o.dependencyDetection.ignore(o.utils.setDomNodeChildrenFromArrayMapping,null,[g,c,j,f,k])},null,{disposeWhenNodeIsRemoved:g})};var h=o.utils.domData.nextKey();o.bindingHandlers.template={init:function(a,b){var c=o.utils.unwrapObservable(b());if("string"==typeof c||c.name)o.virtualElements.emptyNode(a);else{var d=o.virtualElements.childNodes(a),e=o.utils.moveCleanedNodesToContainerElement(d);new o.templateSources.anonymousTemplate(a).nodes(e)}return{controlsDescendantBindings:!0}},update:function(a,b,c,d,e){var g,h,i=b(),j=o.utils.unwrapObservable(i),k=!0,l=null;if("string"==typeof j?(h=i,j={}):(h=j.name,"if"in j&&(k=o.utils.unwrapObservable(j["if"])),k&&"ifnot"in j&&(k=!o.utils.unwrapObservable(j.ifnot)),g=o.utils.unwrapObservable(j.data)),"foreach"in j){var m=k&&j.foreach||[];l=o.renderTemplateForEach(h||a,m,j,a,e)}else if(k){var n="data"in j?e.createChildContext(g,j.as):e;l=o.renderTemplate(h||a,n,j,a)}else o.virtualElements.emptyNode(a);f(a,l)}},o.expressionRewriting.bindingRewriteValidators.template=function(a){var b=o.expressionRewriting.parseObjectLiteral(a);return 1==b.length&&b[0].unknown?null:o.expressionRewriting.keyValueArrayContainsKey(b,"name")?null:"This template engine does not support anonymous templates nested within its templates"},o.virtualElements.allowedBindings.template=!0}(),o.exportSymbol("setTemplateEngine",o.setTemplateEngine),o.exportSymbol("renderTemplate",o.renderTemplate),o.utils.findMovesInArrayComparison=function(a,b,c){if(a.length&&b.length){var d,e,f,g,h;for(d=e=0;(!c||c>d)&&(g=a[e]);++e){for(f=0;h=b[f];++f)if(g.value===h.value){g.moved=h.index,h.moved=g.index,b.splice(f,1),d=f=0;break}d+=f}}},o.utils.compareArrays=function(){function a(a,e,f){return f="boolean"==typeof f?{dontLimitMoves:f}:f||{},a=a||[],e=e||[],a.length<=e.length?b(a,e,c,d,f):b(e,a,d,c,f)}function b(a,b,c,d,e){var f,g,h,i,j,k,l=Math.min,m=Math.max,n=[],p=a.length,q=b.length,r=q-p||1,s=p+q+1;for(f=0;p>=f;f++)for(i=h,n.push(h=[]),j=l(q,f+r),k=m(0,f-1),g=k;j>=g;g++)if(g)if(f)if(a[f-1]===b[g-1])h[g]=i[g-1];else{var t=i[g]||s,u=h[g-1]||s;h[g]=l(t,u)+1}else h[g]=g+1;else h[g]=f+1;var v,w=[],x=[],y=[];for(f=p,g=q;f||g;)v=n[f][g]-1,g&&v===n[f][g-1]?x.push(w[w.length]={status:c,value:b[--g],index:g}):f&&v===n[f-1][g]?y.push(w[w.length]={status:d,value:a[--f],index:f}):(--g,--f,e.sparse||w.push({status:"retained",value:b[g]}));return o.utils.findMovesInArrayComparison(x,y,10*p),w.reverse()}var c="added",d="deleted";return a}(),o.exportSymbol("utils.compareArrays",o.utils.compareArrays),function(){function a(a,c,d,e,f){var g=[],h=o.dependentObservable(function(){var b=c(d,f,o.utils.fixUpContinuousNodeArray(g,a))||[];g.length>0&&(o.utils.replaceDomNodes(g,b),e&&o.dependencyDetection.ignore(e,null,[d,b,f])),g.length=0,o.utils.arrayPushAll(g,b)},null,{disposeWhenNodeIsRemoved:a,disposeWhen:function(){return!o.utils.anyDomNodeIsAttachedToDocument(g)}});return{mappedNodes:g,dependentObservable:h.isActive()?h:b}}var c=o.utils.domData.nextKey();o.utils.setDomNodeChildrenFromArrayMapping=function(d,e,f,g,h){function i(a,b){k=p[b],u!==b&&(y[a]=k),k.indexObservable(u++),o.utils.fixUpContinuousNodeArray(k.mappedNodes,d),s.push(k),w.push(k)}function j(a,b){if(a)for(var c=0,d=b.length;d>c;c++)b[c]&&o.utils.arrayForEach(b[c].mappedNodes,function(d){a(d,c,b[c].arrayEntry)})}e=e||[],g=g||{};for(var k,l,m,n=o.utils.domData.get(d,c)===b,p=o.utils.domData.get(d,c)||[],q=o.utils.arrayMap(p,function(a){return a.arrayEntry}),r=o.utils.compareArrays(q,e,g.dontLimitMoves),s=[],t=0,u=0,v=[],w=[],x=[],y=[],z=[],A=0;l=r[A];A++)switch(m=l.moved,l.status){case"deleted":m===b&&(k=p[t],k.dependentObservable&&k.dependentObservable.dispose(),v.push.apply(v,o.utils.fixUpContinuousNodeArray(k.mappedNodes,d)),g.beforeRemove&&(x[A]=k,w.push(k))),t++;break;case"retained":i(A,t++);break;case"added":m!==b?i(A,m):(k={arrayEntry:l.value,indexObservable:o.observable(u++)},s.push(k),w.push(k),n||(z[A]=k))}j(g.beforeMove,y),o.utils.arrayForEach(v,g.beforeRemove?o.cleanNode:o.removeNode);for(var B,C,A=0,D=o.virtualElements.firstChild(d);k=w[A];A++){k.mappedNodes||o.utils.extend(k,a(d,f,k.arrayEntry,h,k.indexObservable));for(var E=0;C=k.mappedNodes[E];D=C.nextSibling,B=C,E++)C!==D&&o.virtualElements.insertAfter(d,C,B);!k.initialized&&h&&(h(k.arrayEntry,k.mappedNodes,k.indexObservable),k.initialized=!0)}j(g.beforeRemove,x),j(g.afterMove,y),j(g.afterAdd,z),o.utils.domData.set(d,c,s)}}(),o.exportSymbol("utils.setDomNodeChildrenFromArrayMapping",o.utils.setDomNodeChildrenFromArrayMapping),o.nativeTemplateEngine=function(){this.allowTemplateRewriting=!1},o.nativeTemplateEngine.prototype=new o.templateEngine,o.nativeTemplateEngine.prototype.constructor=o.nativeTemplateEngine,o.nativeTemplateEngine.prototype.renderTemplateSource=function(a,b,c){var d=!(o.utils.ieVersion<9),e=d?a.nodes:null,f=e?a.nodes():null;
if(f)return o.utils.makeArray(f.cloneNode(!0).childNodes);var g=a.text();return o.utils.parseHtmlFragment(g)},o.nativeTemplateEngine.instance=new o.nativeTemplateEngine,o.setTemplateEngine(o.nativeTemplateEngine.instance),o.exportSymbol("nativeTemplateEngine",o.nativeTemplateEngine),function(){o.jqueryTmplTemplateEngine=function(){function a(){if(2>c)throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.")}function b(a,b,c){return f.tmpl(a,b,c)}var c=this.jQueryTmplVersion=function(){if(!f||!f.tmpl)return 0;try{if(f.tmpl.tag.tmpl.open.toString().indexOf("__")>=0)return 2}catch(a){}return 1}();this.renderTemplateSource=function(c,e,g){g=g||{},a();var h=c.data("precompiled");if(!h){var i=c.text()||"";i="{{ko_with $item.koBindingContext}}"+i+"{{/ko_with}}",h=f.template(null,i),c.data("precompiled",h)}var j=[e.$data],k=f.extend({koBindingContext:e},g.templateOptions),l=b(h,j,k);return l.appendTo(d.createElement("div")),f.fragments={},l},this.createJavaScriptEvaluatorBlock=function(a){return"{{ko_code ((function() { return "+a+" })()) }}"},this.addTemplate=function(a,b){d.write("<script type='text/html' id='"+a+"'>"+b+"</script>")},c>0&&(f.tmpl.tag.ko_code={open:"__.push($1 || '');"},f.tmpl.tag.ko_with={open:"with($1) {",close:"} "})},o.jqueryTmplTemplateEngine.prototype=new o.templateEngine,o.jqueryTmplTemplateEngine.prototype.constructor=o.jqueryTmplTemplateEngine;var a=new o.jqueryTmplTemplateEngine;a.jQueryTmplVersion>0&&o.setTemplateEngine(a),o.exportSymbol("jqueryTmplTemplateEngine",o.jqueryTmplTemplateEngine)}()})}()}();var Typertext;!function(a){var b=function(){function a(a,b,c){this.message=a,this.code=b,this.custom=c}return a.prototype.GetCode=function(){return this.code},a.prototype.GetMessage=function(){return this.message},a.prototype.GetCustom=function(){return this.custom},a}();a.BaseException=b}(Typertext||(Typertext={}));var Typertext;!function(a){var b=function(){function a(a,b,c,d){this.status=a,this.headers=b,this.httpStatus=c,this.content=d}return a.prototype.GetContent=function(){return this.content},a.prototype.GetContentType=function(){return this.GetHeader("Content-Type")},a.prototype.GetHeader=function(a){return this.headers(a)},a.prototype.GetHttpStatus=function(){return this.httpStatus},a.prototype.GetStatus=function(){return this.status},a}();a.GenericResponse=b}(Typertext||(Typertext={}));var Typertext;!function(a){!function(a){!function(a){a[a.DELETE=0]="DELETE",a[a.GET=1]="GET",a[a.HEAD=2]="HEAD",a[a.OPTIONS=3]="OPTIONS",a[a.POST=4]="POST",a[a.PUT=5]="PUT",a[a.TRACE=6]="TRACE"}(a.HttpMethod||(a.HttpMethod={}));a.HttpMethod}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=function(){function b(a,c,d,e,f){"undefined"==typeof c&&(c=0),"undefined"==typeof d&&(d="/"),"undefined"==typeof e&&(e={}),"undefined"==typeof f&&(f=0),(1>f||f>65535||isNaN(f))&&(f=b.DefaultPort(c)),0!=d.indexOf("/")&&(d="/"+d),this.domain=a,this.protocol=c,this.path=d,this.queryString=e,this.port=f}return b.DefaultPort=function(a){switch(a){case 0:return 80;case 1:return 443;default:return-1}},b.FromUrl=function(c){var d=document.createElement("a");return d.href=c,d.hostname&&d.protocol&&d.pathname&&d.search&&d.port||(d.href=d.href),new b(d.hostname,a.Http.HttpProtocol[d.protocol.slice(0,-1)],d.pathname,b.DecodeQueryString(d.search),parseInt(d.port))},b.DecodeQueryString=function(a){return 0==a.indexOf("?")&&(a=a.substring(1)),b.UrlDecodeString(a)},b.EncodeQueryString=function(a){var c="?"+b.UrlEncodeObject(a);return 1==c.length?"":c},b.UrlEncodeObject=function(a){var b,c="";for(b in a){var d=a[b];if("object"==typeof d||"function"==typeof d){if(d instanceof Array)for(var e=0;e<d.length;e++)("object"!=typeof d[e]||"function"==typeof d[e])&&(c+=encodeURIComponent(b)+"="+encodeURIComponent(d[e])+"&")}else c+=encodeURIComponent(b)+"="+encodeURIComponent(d)+"&"}return c.slice(0,-1)},b.UrlDecodeString=function(a){for(var c={},d=b.splitString(a,"&"),e=0;e<d.length;e++)if(""!=d[e]){var f=b.splitString(d[e],"=",2),g=decodeURIComponent(f[0]);1!=f.length?c[g]=decodeURIComponent(f[1]):c[g]=""}return c},b.splitString=function(a,b,c){"undefined"==typeof c&&(c=-1),c++;var d=a.split(b);if(c>0&&d.length>c){var e=d.splice(0,c);return e.push(d.join(b)),e}return d},b.prototype.ToString=function(){return a.Http.HttpProtocol[this.protocol]+"://"+this.domain+(this.port==b.DefaultPort(this.protocol)?"":":"+this.port)+this.path+b.EncodeQueryString(this.queryString)},b.prototype.GetPort=function(){return this.port},b.prototype.GetDomain=function(){return this.domain},b.prototype.GetProtocol=function(){return this.protocol},b.prototype.SameOriginCheck=function(a){return this.domain===a.GetDomain()&&this.port===a.GetPort()&&this.protocol===a.GetProtocol()},b}();b.HttpUrl=c}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(a){}(a.Transport||(a.Transport={}));a.Transport}(Typertext||(Typertext={}));var Typertext;!function(a){}(Typertext||(Typertext={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},Typertext;!function(a){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.BaseException);b.HttpException=c}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(a){!function(a){a[a.http=0]="http",a[a.https=1]="https"}(a.HttpProtocol||(a.HttpProtocol={}));a.HttpProtocol}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=a.Http.HttpUrl,d=function(){function b(){}return b.Transport=function(b,d,e,f){var g=document.createElement("div");if(g.innerHTML="<!--[if lte IE 7]><i></i><![endif]-->",1===g.getElementsByTagName("i").length)throw{};g.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->";var h=1===g.getElementsByTagName("i").length,i=c.FromUrl(window.location.href);if(i.SameOriginCheck(i)||!h)return a.Transport.XHR;if(i.GetProtocol()===d.GetProtocol())return a.Transport.XDR;throw{}},b}();b.TransportChooser=d}(a.Transport||(a.Transport={}));a.Transport}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=a.Transport.TransportChooser,d=function(){function a(){}return a.prototype.Delete=function(a,b){this.RawRequest(5,a,{},b)},a.prototype.Get=function(a,b){this.RawRequest(1,a,{},b)},a.prototype.Post=function(a,b,c){this.RawRequest(4,a,b,c)},a.prototype.Put=function(a,b,c){this.RawRequest(5,a,b,c)},a.prototype.RawRequest=function(a,b,d,e,f){"undefined"==typeof d&&(d={}),e||(e=function(a){return null}),f||(f=c.Transport(a,b,d,e));var g=new f(a,b,d,e);g.Send()},a}();b.HttpRequest=d}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=function(a){function b(b,c,d,e){a.call(this,b,c,d,e)}return __extends(b,a),b}(a.GenericResponse);b.HttpResponse=c}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(a){!function(a){a[a.success=0]="success",a[a.serverError=1]="serverError",a[a.clientError=2]="clientError",a[a.responseError=3]="responseError",a[a.unknownError=4]="unknownError",a[a.timeout=5]="timeout"}(a.HttpResponseStatus||(a.HttpResponseStatus={}));a.HttpResponseStatus}(a.Http||(a.Http={}));a.Http}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=function(a){function b(b,c){a.call(this,b,c,null)}return __extends(b,a),b}(a.BaseException);b.JsonException=c}(a.Json||(a.Json={}));a.Json}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=a.Http.HttpRequest,d=(a.Http.HttpMethod,function(){function b(a){"undefined"==typeof a&&(a="application/json"),this.request=new c,this.jsonType=a}return b.prototype.Delete=function(a,b){this.RawRequest(0,a,{},b)},b.prototype.Get=function(a,b){this.RawRequest(1,a,{},b)},b.prototype.Post=function(a,b,c){this.RawRequest(4,a,b,c)},b.prototype.Put=function(a,b,c){this.RawRequest(5,a,b,c)},b.prototype.RawRequest=function(b,c,d,e,f){var g=this;return"undefined"==typeof d&&(d={}),"function"!=typeof e?void this.request.RawRequest(b,c,d,function(){}):void this.request.RawRequest(b,c,d,function(b){return b.GetContentType()!=g.jsonType?void e(a.Json.JsonResponse.fromInvalidHttpResponse(b)):void e(a.Json.JsonResponse.fromHttpResponse(b))},f)},b}());b.JsonRequest=d}(a.Json||(a.Json={}));a.Json}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=(a.Http.HttpResponseStatus,function(a){function b(b,c,d,e,f){a.call(this,b,c,d,e),f=!!f||!1,this.parseSuccess=f}return __extends(b,a),b.fromHttpResponse=function(a){try{return new b(a.GetStatus(),a.GetHeader,a.GetHttpStatus(),window.JSON.parse(a.GetContent()),!0)}catch(c){return new b(a.GetStatus(),a.GetHeader,a.GetHttpStatus(),null)}},b.fromInvalidHttpResponse=function(a){return new b(3,a.GetHeader,a.GetHttpStatus())},b.prototype.GetParseStatus=function(){return this.parseSuccess},b}(a.GenericResponse));b.JsonResponse=c}(a.Json||(a.Json={}));a.Json}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=a.Http.HttpMethod,d=a.Http.HttpUrl,e=(a.Http.HttpResponseStatus,a.Http.HttpResponse),f=function(){function a(a,b,c,d){"undefined"==typeof c&&(c={}),"undefined"==typeof d&&(d=function(a){return null}),this.postData=c,this.method=a,this.request=b,this.callback=d,this.xdr=new XDomainRequest}return a.prototype.Send=function(){var a=this,b=function(b){return"content-type"===b.toLowerCase()?a.xdr.contentType:void 0};return this.xdr.ontimeout=function(){a.callback(new e(5,function(a){return""},-1,""))},this.xdr.onerror=function(){a.callback(new e(4,b,-1,a.xdr.responseText))},this.xdr.onload=function(){a.callback(new e(0,b,200,a.xdr.responseText))},this.xdr.onprogress=function(){return null},this.xdr.open(c[this.method],this.request.ToString()),1==this.method?void this.xdr.send():void this.xdr.send(d.UrlEncodeObject(this.postData))},a.prototype.Destroy=function(){this.xdr.ontimeout=this.xdr.onerror=this.xdr.onload=this.xdr.onprogress=null,this.xdr=null},a}();b.XDR=f}(a.Transport||(a.Transport={}));a.Transport}(Typertext||(Typertext={}));var Typertext;!function(a){!function(b){var c=a.Http.HttpMethod,d=a.Http.HttpUrl,e=(a.Http.HttpResponseStatus,a.Http.HttpResponse),f=function(){function a(a,b,c,d){"undefined"==typeof c&&(c={}),"undefined"==typeof d&&(d=function(a){return null});var f=this;this.postData=c,this.method=a,this.request=b,this.callback=d,this.xhr=new XMLHttpRequest,this.xhr.onreadystatechange=function(){if(4==f.xhr.readyState){var a=function(a){return f.xhr.getResponseHeader(a)};200==f.xhr.status?f.callback(new e(0,a,f.xhr.status,f.xhr.responseText)):f.xhr.status>=400&&f.xhr.status<500?f.callback(new e(2,a,f.xhr.status,f.xhr.responseText)):f.xhr.status>=500&&f.xhr.status<600?f.callback(new e(1,a,f.xhr.status,f.xhr.responseText)):f.callback(new e(4,a,f.xhr.status,f.xhr.responseText))}},this.xhr.ontimeout=function(){f.callback(new e(5,function(a){return""},-1,""))}}return a.prototype.Send=function(){return this.xhr.open(c[this.method],this.request.ToString(),!0),1==this.method?void this.xhr.send():(this.xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),void this.xhr.send(d.UrlEncodeObject(this.postData)))},a.prototype.Destroy=function(){this.xhr.onreadystatechange=this.xhr.ontimeout=null,this.xhr=null},a}();b.XHR=f}(a.Transport||(a.Transport={}));a.Transport}(Typertext||(Typertext={})),function(a,b){"use strict";"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(c,d){return b(a,c,d)}):"object"==typeof exports?module.exports=b(a,require("wolfy87-eventemitter"),require("eventie")):a.imagesLoaded=b(a,a.EventEmitter,a.eventie)}(window,function(a,b,c){"use strict";function d(a,b){for(var c in b)a[c]=b[c];return a}function e(a){return"[object Array]"===m.call(a)}function f(a){var b=[];if(e(a))b=a;else if("number"==typeof a.length)for(var c=0,d=a.length;d>c;c++)b.push(a[c]);else b.push(a);return b}function g(a,b,c){if(!(this instanceof g))return new g(a,b);"string"==typeof a&&(a=document.querySelectorAll(a)),this.elements=f(a),this.options=d({},this.options),"function"==typeof b?c=b:d(this.options,b),c&&this.on("always",c),this.getImages(),j&&(this.jqDeferred=new j.Deferred);var e=this;setTimeout(function(){e.check()})}function h(a){this.img=a}function i(a){this.src=a,n[a]=this}var j=a.jQuery,k=a.console,l="undefined"!=typeof k,m=Object.prototype.toString;g.prototype=new b,g.prototype.options={},g.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;b>a;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);var d=c.nodeType;if(d&&(1===d||9===d||11===d))for(var e=c.querySelectorAll("img"),f=0,g=e.length;g>f;f++){var h=e[f];this.addImage(h)}}},g.prototype.addImage=function(a){var b=new h(a);this.images.push(b)},g.prototype.check=function(){function a(a,e){return b.options.debug&&l&&k.log("confirm",a,e),b.progress(a),c++,c===d&&b.complete(),!0}var b=this,c=0,d=this.images.length;if(this.hasAnyBroken=!1,!d)return void this.complete();for(var e=0;d>e;e++){var f=this.images[e];f.on("confirm",a),f.check()}},g.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a),b.jqDeferred&&b.jqDeferred.notify&&b.jqDeferred.notify(b,a)})},g.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){if(b.emit(a,b),b.emit("always",b),b.jqDeferred){var c=b.hasAnyBroken?"reject":"resolve";b.jqDeferred[c](b)}})},j&&(j.fn.imagesLoaded=function(a,b){var c=new g(this,a,b);return c.jqDeferred.promise(j(this))}),h.prototype=new b,h.prototype.check=function(){var a=n[this.img.src]||new i(this.img.src);if(a.isConfirmed)return void this.confirm(a.isLoaded,"cached was confirmed");if(this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var b=this;a.on("confirm",function(a,c){return b.confirm(a.isLoaded,c),!0}),a.check()},h.prototype.confirm=function(a,b){this.isLoaded=a,this.emit("confirm",this,b)};var n={};return i.prototype=new b,i.prototype.check=function(){if(!this.isChecked){var a=new Image;c.bind(a,"load",this),c.bind(a,"error",this),a.src=this.src,this.isChecked=!0}},i.prototype.handleEvent=function(a){var b="on"+a.type;this[b]&&this[b](a)},i.prototype.onload=function(a){this.confirm(!0,"onload"),this.unbindProxyEvents(a)},i.prototype.onerror=function(a){this.confirm(!1,"onerror"),this.unbindProxyEvents(a)},i.prototype.confirm=function(a,b){this.isConfirmed=!0,this.isLoaded=a,this.emit("confirm",this,b)},i.prototype.unbindProxyEvents=function(a){c.unbind(a.target,"load",this),c.unbind(a.target,"error",this)},g}),function(a){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?a(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],a):a(ko,ko.mapping={})}(function(a,b){function c(a,d){var e,f;for(f in d)if(d.hasOwnProperty(f)&&d[f])if(e=b.getType(a[f]),f&&a[f]&&"array"!==e&&"string"!==e)c(a[f],d[f]);else if("array"===b.getType(a[f])&&"array"===b.getType(d[f])){e=a;for(var g=f,h=a[f],i=d[f],j={},k=h.length-1;k>=0;--k)j[h[k]]=h[k];for(k=i.length-1;k>=0;--k)j[i[k]]=i[k];h=[],i=void 0;for(i in j)h.push(j[i]);e[g]=h}else a[f]=d[f]}function d(a,b){var d={};return c(d,a),c(d,b),d}function e(a,b){for(var c=d({},a),e=u.length-1;e>=0;e--){var g=u[e];c[g]&&(c[""]instanceof Object||(c[""]={}),c[""][g]=c[g],delete c[g])}return b&&(c.ignore=f(b.ignore,c.ignore),c.include=f(b.include,c.include),c.copy=f(b.copy,c.copy),c.observe=f(b.observe,c.observe)),c.ignore=f(c.ignore,x.ignore),c.include=f(c.include,x.include),c.copy=f(c.copy,x.copy),c.observe=f(c.observe,x.observe),c.mappedProperties=c.mappedProperties||{},c.copiedProperties=c.copiedProperties||{},c}function f(c,d){return"array"!==b.getType(c)&&(c="undefined"===b.getType(c)?[]:[c]),"array"!==b.getType(d)&&(d="undefined"===b.getType(d)?[]:[d]),a.utils.arrayGetDistinctValues(c.concat(d))}function g(c,e,f,i,n,o,t){var u="array"===b.getType(a.utils.unwrapObservable(e));if(o=o||"",b.isMapped(c)){var w=a.utils.unwrapObservable(c)[r];f=d(w,f)}var x=t||n,y=function(){return f[i]&&f[i].create instanceof Function},z=function(b){var c=p,d=a.dependentObservable;return a.dependentObservable=function(b,d,e){e=e||{},b&&"object"==typeof b&&(e=b);var f=e.deferEvaluation,g=!1;if(e.deferEvaluation=!0,b=new s(b,d,e),!f){var h=b,f=a.dependentObservable;a.dependentObservable=s,b=a.isWriteableObservable(h),a.dependentObservable=f,f=s({read:function(){return g||(a.utils.arrayRemoveItem(c,h),g=!0),h.apply(h,arguments)},write:b&&function(a){return h(a)},deferEvaluation:!0}),f.__DO=h,b=f,c.push(b)}return b},a.dependentObservable.fn=s.fn,a.computed=a.dependentObservable,b=a.utils.unwrapObservable(n)instanceof Array?f[i].create({data:b||e,parent:x,skip:v}):f[i].create({data:b||e,parent:x}),a.dependentObservable=d,a.computed=a.dependentObservable,b},A=function(){return f[i]&&f[i].update instanceof Function},B=function(b,c){var d={data:c||e,parent:x,target:a.utils.unwrapObservable(b)};return a.isWriteableObservable(b)&&(d.observable=b),f[i].update(d)};if(t=q.get(e))return t;if(i=i||"",u){var u=[],C=!1,D=function(a){return a};f[i]&&f[i].key&&(D=f[i].key,C=!0),a.isObservable(c)||(c=a.observableArray([]),c.mappedRemove=function(a){var b="function"==typeof a?a:function(b){return b===D(a)};return c.remove(function(a){return b(D(a))})},c.mappedRemoveAll=function(b){var d=k(b,D);return c.remove(function(b){return-1!=a.utils.arrayIndexOf(d,D(b))})},c.mappedDestroy=function(a){var b="function"==typeof a?a:function(b){return b===D(a)};return c.destroy(function(a){return b(D(a))})},c.mappedDestroyAll=function(b){var d=k(b,D);return c.destroy(function(b){return-1!=a.utils.arrayIndexOf(d,D(b))})},c.mappedIndexOf=function(b){var d=k(c(),D);return b=D(b),a.utils.arrayIndexOf(d,b)},c.mappedGet=function(a){return c()[c.mappedIndexOf(a)]},c.mappedCreate=function(b){if(-1!==c.mappedIndexOf(b))throw Error("There already is an object with the key that you specified.");var d=y()?z(b):b;return A()&&(b=B(d,b),a.isWriteableObservable(d)?d(b):d=b),c.push(d),d}),t=k(a.utils.unwrapObservable(c),D).sort(),w=k(e,D),C&&w.sort(),C=a.utils.compareArrays(t,w),t={};var E,F=a.utils.unwrapObservable(e),G={},H=!0,w=0;for(E=F.length;E>w;w++){var I=D(F[w]);if(void 0===I||I instanceof Object){H=!1;break}G[I]=F[w]}var F=[],J=0,w=0;for(E=C.length;E>w;w++){var K,I=C[w],L=o+"["+w+"]";switch(I.status){case"added":var M=H?G[I.value]:j(a.utils.unwrapObservable(e),I.value,D);K=g(void 0,M,f,i,c,L,n),y()||(K=a.utils.unwrapObservable(K)),L=h(a.utils.unwrapObservable(e),M,t),K===v?J++:F[L-J]=K,t[L]=!0;break;case"retained":M=H?G[I.value]:j(a.utils.unwrapObservable(e),I.value,D),K=j(c,I.value,D),g(K,M,f,i,c,L,n),L=h(a.utils.unwrapObservable(e),M,t),F[L]=K,t[L]=!0;break;case"deleted":K=j(c,I.value,D)}u.push({event:I.status,item:K})}c(F),f[i]&&f[i].arrayChanged&&a.utils.arrayForEach(u,function(a){f[i].arrayChanged(a.event,a.item)})}else if(m(e)){if(c=a.utils.unwrapObservable(c),!c){if(y())return C=z(),A()&&(C=B(C)),C;if(A())return B(C);c={}}if(A()&&(c=B(c)),q.save(e,c),A())return c;l(e,function(b){var d=o.length?o+"."+b:b;if(-1==a.utils.arrayIndexOf(f.ignore,d))if(-1!=a.utils.arrayIndexOf(f.copy,d))c[b]=e[b];else if("object"!=typeof e[b]&&"array"!=typeof e[b]&&0<f.observe.length&&-1==a.utils.arrayIndexOf(f.observe,d))c[b]=e[b],f.copiedProperties[d]=!0;else{var h=q.get(e[b]),i=g(c[b],e[b],f,b,c,d,c),h=h||i;0<f.observe.length&&-1==a.utils.arrayIndexOf(f.observe,d)?(c[b]=h(),f.copiedProperties[d]=!0):(a.isWriteableObservable(c[b])?(h=a.utils.unwrapObservable(h),c[b]()!==h&&c[b](h)):(h=void 0===c[b]?h:a.utils.unwrapObservable(h),c[b]=h),f.mappedProperties[d]=!0)}})}else switch(b.getType(e)){case"function":A()?a.isWriteableObservable(e)?(e(B(e)),c=e):c=B(e):c=e;break;default:if(a.isWriteableObservable(c))return K=A()?B(c):a.utils.unwrapObservable(e),c(K),K;y()||A(),c=y()?z():a.observable(a.utils.unwrapObservable(e)),A()&&c(B(c))}return c}function h(a,b,c){for(var d=0,e=a.length;e>d;d++)if(!0!==c[d]&&a[d]===b)return d;return null}function i(c,d){var e;return d&&(e=d(c)),"undefined"===b.getType(e)&&(e=c),a.utils.unwrapObservable(e)}function j(b,c,d){b=a.utils.unwrapObservable(b);for(var e=0,f=b.length;f>e;e++){var g=b[e];if(i(g,d)===c)return g}throw Error("When calling ko.update*, the key '"+c+"' was not found!")}function k(b,c){return a.utils.arrayMap(a.utils.unwrapObservable(b),function(a){return c?i(a,c):a})}function l(a,c){if("array"===b.getType(a))for(var d=0;d<a.length;d++)c(d);else for(d in a)c(d)}function m(a){var c=b.getType(a);return("object"===c||"array"===c)&&null!==a}function n(){var b=[],c=[];this.save=function(d,e){var f=a.utils.arrayIndexOf(b,d);f>=0?c[f]=e:(b.push(d),c.push(e))},this.get=function(d){return d=a.utils.arrayIndexOf(b,d),d>=0?c[d]:void 0}}function o(){var a={},b=function(b){var c;try{c=b}catch(d){c="$$$"}return b=a[c],void 0===b&&(b=new n,a[c]=b),b};this.save=function(a,c){b(a).save(a,c)},this.get=function(a){return b(a).get(a)}}var p,q,r="__ko_mapping__",s=a.dependentObservable,t=0,u=["create","update","key","arrayChanged"],v={},w={include:["_destroy"],ignore:[],copy:[],observe:[]},x=w;b.isMapped=function(b){return(b=a.utils.unwrapObservable(b))&&b[r]},b.fromJS=function(a){if(0==arguments.length)throw Error("When calling ko.fromJS, pass the object you want to convert.");try{t++||(p=[],q=new o);var b,c;2==arguments.length&&(arguments[1][r]?c=arguments[1]:b=arguments[1]),3==arguments.length&&(b=arguments[1],c=arguments[2]),c&&(b=d(b,c[r])),b=e(b);var f=g(c,a,b);if(c&&(f=c),!--t)for(;p.length;){var h=p.pop();h&&(h(),h.__DO.throttleEvaluation=h.throttleEvaluation)}return f[r]=d(f[r],b),f}catch(i){throw t=0,i}},b.fromJSON=function(c){var d=a.utils.parseJson(c);return arguments[0]=d,b.fromJS.apply(this,arguments)},b.updateFromJS=function(){throw Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!")},b.updateFromJSON=function(){throw Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!")},b.toJS=function(c,d){if(x||b.resetDefaultOptions(),0==arguments.length)throw Error("When calling ko.mapping.toJS, pass the object you want to convert.");if("array"!==b.getType(x.ignore))throw Error("ko.mapping.defaultOptions().ignore should be an array.");if("array"!==b.getType(x.include))throw Error("ko.mapping.defaultOptions().include should be an array.");if("array"!==b.getType(x.copy))throw Error("ko.mapping.defaultOptions().copy should be an array.");return d=e(d,c[r]),b.visitModel(c,function(b){return a.utils.unwrapObservable(b)},d)},b.toJSON=function(c,d){var e=b.toJS(c,d);return a.utils.stringifyJson(e)},b.defaultOptions=function(){return 0<arguments.length?void(x=arguments[0]):x},b.resetDefaultOptions=function(){x={include:w.include.slice(0),ignore:w.ignore.slice(0),copy:w.copy.slice(0)}},b.getType=function(a){if(a&&"object"==typeof a){if(a.constructor===Date)return"date";if(a.constructor===Array)return"array"}return typeof a},b.visitModel=function(c,d,f){f=f||{},f.visitedObjects=f.visitedObjects||new o;var g,h=a.utils.unwrapObservable(c);if(!m(h))return d(c,f.parentName);f=e(f,h[r]),d(c,f.parentName),g="array"===b.getType(h)?[]:{},f.visitedObjects.save(c,g);var i=f.parentName;return l(h,function(c){if(!f.ignore||-1==a.utils.arrayIndexOf(f.ignore,c)){var e=h[c],j=f,k=i||"";if("array"===b.getType(h)?i&&(k+="["+c+"]"):(i&&(k+="."),k+=c),j.parentName=k,-1!==a.utils.arrayIndexOf(f.copy,c)||-1!==a.utils.arrayIndexOf(f.include,c)||!h[r]||!h[r].mappedProperties||h[r].mappedProperties[c]||!h[r].copiedProperties||h[r].copiedProperties[c]||"array"===b.getType(h))switch(b.getType(a.utils.unwrapObservable(e))){case"object":case"array":case"undefined":j=f.visitedObjects.get(e),g[c]="undefined"!==b.getType(j)?j:b.visitModel(e,d,f);break;default:g[c]=d(e,f.parentName)}}}),g}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}),!function(a){"use strict";var b=function(a,c,d){var e,f,g=document.createElement("img");if(g.onerror=c,g.onload=function(){!f||d&&d.noRevoke||b.revokeObjectURL(f),c&&c(b.scale(g,d))},b.isInstanceOf("Blob",a)||b.isInstanceOf("File",a))e=f=b.createObjectURL(a),g._type=a.type;else{if("string"!=typeof a)return!1;e=a,d&&d.crossOrigin&&(g.crossOrigin=d.crossOrigin)}return e?(g.src=e,g):b.readFile(a,function(a){var b=a.target;b&&b.result?g.src=b.result:c&&c(a)})},c=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;b.isInstanceOf=function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},b.transformCoordinates=function(){},b.getTransformedOptions=function(a,b){var c,d,e,f,g=b.aspectRatio;if(!g)return b;c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);return c.crop=!0,e=a.naturalWidth||a.width,f=a.naturalHeight||a.height,e/f>g?(c.maxWidth=f*g,c.maxHeight=f):(c.maxWidth=e,c.maxHeight=e/g),c},b.renderImageToCanvas=function(a,b,c,d,e,f,g,h,i,j){return a.getContext("2d").drawImage(b,c,d,e,f,g,h,i,j),a},b.hasCanvasOption=function(a){return a.canvas||a.crop||a.aspectRatio},b.scale=function(a,c){c=c||{};var d,e,f,g,h,i,j,k,l,m=document.createElement("canvas"),n=a.getContext||b.hasCanvasOption(c)&&m.getContext,o=a.naturalWidth||a.width,p=a.naturalHeight||a.height,q=o,r=p,s=function(){var a=Math.max((f||q)/q,(g||r)/r);
a>1&&(q*=a,r*=a)},t=function(){var a=Math.min((d||q)/q,(e||r)/r);1>a&&(q*=a,r*=a)};return n&&(c=b.getTransformedOptions(a,c),j=c.left||0,k=c.top||0,c.sourceWidth?(h=c.sourceWidth,void 0!==c.right&&void 0===c.left&&(j=o-h-c.right)):h=o-j-(c.right||0),c.sourceHeight?(i=c.sourceHeight,void 0!==c.bottom&&void 0===c.top&&(k=p-i-c.bottom)):i=p-k-(c.bottom||0),q=h,r=i),d=c.maxWidth,e=c.maxHeight,f=c.minWidth,g=c.minHeight,n&&d&&e&&c.crop?(q=d,r=e,l=h/i-d/e,0>l?(i=e*h/d,void 0===c.top&&void 0===c.bottom&&(k=(p-i)/2)):l>0&&(h=d*i/e,void 0===c.left&&void 0===c.right&&(j=(o-h)/2))):((c.contain||c.cover)&&(f=d=d||f,g=e=e||g),c.cover?(t(),s()):(s(),t())),n?(m.width=q,m.height=r,b.transformCoordinates(m,c),b.renderImageToCanvas(m,a,j,k,h,i,0,0,q,r)):(a.width=q,a.height=r,a)},b.createObjectURL=function(a){return c?c.createObjectURL(a):!1},b.revokeObjectURL=function(a){return c?c.revokeObjectURL(a):!1},b.readFile=function(a,b,c){if(window.FileReader){var d=new FileReader;if(d.onload=d.onerror=b,c=c||"readAsDataURL",d[c])return d[c](a),d}return!1},"function"==typeof define&&define.amd?define(function(){return b}):a.loadImage=b}(this),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";if(window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)){var b=a.renderImageToCanvas;a.detectSubsampling=function(a){var b,c;return a.width*a.height>1048576?(b=document.createElement("canvas"),b.width=b.height=1,c=b.getContext("2d"),c.drawImage(a,-a.width+1,0),0===c.getImageData(0,0,1,1).data[3]):!1},a.detectVerticalSquash=function(a,b){var c,d,e,f,g,h=a.naturalHeight||a.height,i=document.createElement("canvas"),j=i.getContext("2d");for(b&&(h/=2),i.width=1,i.height=h,j.drawImage(a,0,0),c=j.getImageData(0,0,1,h).data,d=0,e=h,f=h;f>d;)g=c[4*(f-1)+3],0===g?e=f:d=f,f=e+d>>1;return f/h||1},a.renderImageToCanvas=function(c,d,e,f,g,h,i,j,k,l){if("image/jpeg"===d._type){var m,n,o,p,q=c.getContext("2d"),r=document.createElement("canvas"),s=1024,t=r.getContext("2d");if(r.width=s,r.height=s,q.save(),m=a.detectSubsampling(d),m&&(e/=2,f/=2,g/=2,h/=2),n=a.detectVerticalSquash(d,m),m||1!==n){for(f*=n,k=Math.ceil(s*k/g),l=Math.ceil(s*l/h/n),j=0,p=0;h>p;){for(i=0,o=0;g>o;)t.clearRect(0,0,s,s),t.drawImage(d,e,f,g,h,-o,-p,g,h),q.drawImage(r,0,0,s,s,i,j,k,l),o+=s,i+=k;p+=s,j+=l}return q.restore(),c}}return b(c,d,e,f,g,h,i,j,k,l)}}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=a.hasCanvasOption,c=a.transformCoordinates,d=a.getTransformedOptions;a.hasCanvasOption=function(c){return b.call(a,c)||c.orientation},a.transformCoordinates=function(b,d){c.call(a,b,d);var e=b.getContext("2d"),f=b.width,g=b.height,h=d.orientation;if(h&&!(h>8))switch(h>4&&(b.width=g,b.height=f),h){case 2:e.translate(f,0),e.scale(-1,1);break;case 3:e.translate(f,g),e.rotate(Math.PI);break;case 4:e.translate(0,g),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-g);break;case 7:e.rotate(.5*Math.PI),e.translate(f,-g),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-f,0)}},a.getTransformedOptions=function(b,c){var e,f,g=d.call(a,b,c),h=g.orientation;if(!h||h>8||1===h)return g;e={};for(f in g)g.hasOwnProperty(f)&&(e[f]=g[f]);switch(g.orientation){case 2:e.left=g.right,e.right=g.left;break;case 3:e.left=g.right,e.top=g.bottom,e.right=g.left,e.bottom=g.top;break;case 4:e.top=g.bottom,e.bottom=g.top;break;case 5:e.left=g.top,e.top=g.left,e.right=g.bottom,e.bottom=g.right;break;case 6:e.left=g.top,e.top=g.right,e.right=g.bottom,e.bottom=g.left;break;case 7:e.left=g.bottom,e.top=g.right,e.right=g.top,e.bottom=g.left;break;case 8:e.left=g.bottom,e.top=g.left,e.right=g.top,e.bottom=g.right}return g.orientation>4&&(e.maxWidth=g.maxHeight,e.maxHeight=g.maxWidth,e.minWidth=g.minHeight,e.minHeight=g.minWidth,e.sourceWidth=g.sourceHeight,e.sourceHeight=g.sourceWidth),e}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image"],a):a(window.loadImage)}(function(a){"use strict";var b=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);a.blobSlice=b&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},a.metaDataParsers={jpeg:{65505:[]}},a.parseMetaData=function(b,c,d){d=d||{};var e=this,f=d.maxMetaDataSize||262144,g={},h=!(window.DataView&&b&&b.size>=12&&"image/jpeg"===b.type&&a.blobSlice);(h||!a.readFile(a.blobSlice.call(b,0,f),function(b){if(b.target.error)return console.log(b.target.error),void c(g);var f,h,i,j,k=b.target.result,l=new DataView(k),m=2,n=l.byteLength-4,o=m;if(65496===l.getUint16(0)){for(;n>m&&(f=l.getUint16(m),f>=65504&&65519>=f||65534===f);){if(h=l.getUint16(m+2)+2,m+h>l.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(i=a.metaDataParsers.jpeg[f])for(j=0;j<i.length;j+=1)i[j].call(e,l,m,h,g,d);m+=h,o=m}!d.disableImageHead&&o>6&&(g.imageHead=k.slice?k.slice(0,o):new Uint8Array(k).subarray(0,o))}else console.log("Invalid JPEG file: Missing JPEG marker.");c(g)},"readAsArrayBuffer"))&&c(g)}}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-meta"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap=function(){return this},a.ExifMap.prototype.map={Orientation:274},a.ExifMap.prototype.get=function(a){return this[a]||this[this.map[a]]},a.getExifThumbnail=function(a,b,c){var d,e,f;if(!c||b+c>a.byteLength)return void console.log("Invalid Exif data: Invalid thumbnail data.");for(d=[],e=0;c>e;e+=1)f=a.getUint8(b+e),d.push((16>f?"0":"")+f.toString(16));return"data:image/jpeg,%"+d.join("%")},a.exifTagTypes={1:{getValue:function(a,b){return a.getUint8(b)},size:1},2:{getValue:function(a,b){return String.fromCharCode(a.getUint8(b))},size:1,ascii:!0},3:{getValue:function(a,b,c){return a.getUint16(b,c)},size:2},4:{getValue:function(a,b,c){return a.getUint32(b,c)},size:4},5:{getValue:function(a,b,c){return a.getUint32(b,c)/a.getUint32(b+4,c)},size:8},9:{getValue:function(a,b,c){return a.getInt32(b,c)},size:4},10:{getValue:function(a,b,c){return a.getInt32(b,c)/a.getInt32(b+4,c)},size:8}},a.exifTagTypes[7]=a.exifTagTypes[1],a.getExifValue=function(b,c,d,e,f,g){var h,i,j,k,l,m,n=a.exifTagTypes[e];if(!n)return void console.log("Invalid Exif data: Invalid tag type.");if(h=n.size*f,i=h>4?c+b.getUint32(d+8,g):d+8,i+h>b.byteLength)return void console.log("Invalid Exif data: Invalid data offset.");if(1===f)return n.getValue(b,i,g);for(j=[],k=0;f>k;k+=1)j[k]=n.getValue(b,i+k*n.size,g);if(n.ascii){for(l="",k=0;k<j.length&&(m=j[k],"\x00"!==m);k+=1)l+=m;return l}return j},a.parseExifTag=function(b,c,d,e,f){var g=b.getUint16(d,e);f.exif[g]=a.getExifValue(b,c,d,b.getUint16(d+2,e),b.getUint32(d+4,e),e)},a.parseExifTags=function(a,b,c,d,e){var f,g,h;if(c+6>a.byteLength)return void console.log("Invalid Exif data: Invalid directory offset.");if(f=a.getUint16(c,d),g=c+2+12*f,g+4>a.byteLength)return void console.log("Invalid Exif data: Invalid directory size.");for(h=0;f>h;h+=1)this.parseExifTag(a,b,c+2+12*h,d,e);return a.getUint32(g,d)},a.parseExifData=function(b,c,d,e,f){if(!f.disableExif){var g,h,i,j=c+10;if(1165519206===b.getUint32(c+4)){if(j+8>b.byteLength)return void console.log("Invalid Exif data: Invalid segment size.");if(0!==b.getUint16(c+8))return void console.log("Invalid Exif data: Missing byte alignment offset.");switch(b.getUint16(j)){case 18761:g=!0;break;case 19789:g=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}if(42!==b.getUint16(j+2,g))return void console.log("Invalid Exif data: Missing TIFF marker.");h=b.getUint32(j+4,g),e.exif=new a.ExifMap,h=a.parseExifTags(b,j,j+h,g,e),h&&!f.disableExifThumbnail&&(i={exif:{}},h=a.parseExifTags(b,j,j+h,g,i),i.exif[513]&&(e.exif.Thumbnail=a.getExifThumbnail(b,j+i.exif[513],i.exif[514]))),e.exif[34665]&&!f.disableExifSub&&a.parseExifTags(b,j,j+e.exif[34665],g,e),e.exif[34853]&&!f.disableExifGps&&a.parseExifTags(b,j,j+e.exif[34853],g,e)}}},a.metaDataParsers.jpeg[65505].push(a.parseExifData)}),function(a){"use strict";"function"==typeof define&&define.amd?define(["load-image","load-image-exif"],a):a(window.loadImage)}(function(a){"use strict";a.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},a.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},a.ExifMap.prototype.getText=function(a){var b=this.get(a);switch(a){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[a][b];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(b[0],b[1],b[2],b[3]);case"ComponentsConfiguration":return this.stringValues[a][b[0]]+this.stringValues[a][b[1]]+this.stringValues[a][b[2]]+this.stringValues[a][b[3]];case"GPSVersionID":return b[0]+"."+b[1]+"."+b[2]+"."+b[3]}return String(b)},function(a){var b,c=a.tags,d=a.map;for(b in c)c.hasOwnProperty(b)&&(d[c[b]]=b)}(a.ExifMap.prototype),a.ExifMap.prototype.getAll=function(){var a,b,c={};for(a in this)this.hasOwnProperty(a)&&(b=this.tags[a],b&&(c[b]=this.getText(b)));return c}}),!function(a){"use strict";var b=a.HTMLCanvasElement&&a.HTMLCanvasElement.prototype,c=a.Blob&&function(){try{return Boolean(new Blob)}catch(a){return!1}}(),d=c&&a.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(a){return!1}}(),e=a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder,f=(c||e)&&a.atob&&a.ArrayBuffer&&a.Uint8Array&&function(a){var b,f,g,h,i,j;for(b=a.split(",")[0].indexOf("base64")>=0?atob(a.split(",")[1]):decodeURIComponent(a.split(",")[1]),f=new ArrayBuffer(b.length),g=new Uint8Array(f),h=0;h<b.length;h+=1)g[h]=b.charCodeAt(h);return i=a.split(",")[0].split(":")[1].split(";")[0],c?new Blob([d?g:f],{type:i}):(j=new e,j.append(f),j.getBlob(i))};a.HTMLCanvasElement&&!b.toBlob&&(b.mozGetAsFile?b.toBlob=function(a,c,d){a(d&&b.toDataURL&&f?f(this.toDataURL(c,d)):this.mozGetAsFile("blob",c))}:b.toDataURL&&f&&(b.toBlob=function(a,b,c){a(f(this.toDataURL(b,c)))})),"function"==typeof define&&define.amd?define(function(){return f}):a.dataURLtoBlob=f}(window),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a(window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var d,e,f,g=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){d=a('<form style="display:none;"></form>'),d.attr("accept-charset",c.formAcceptCharset),f=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+f+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+f+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+f+"_method=PATCH",c.type="POST"),b+=1,e=a('<iframe src="'+g+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,f=a.isArray(c.paramName)?c.paramName:[c.paramName];e.unbind("load").bind("load",function(){var b;try{if(b=e.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+g+'"></iframe>').appendTo(d),window.setTimeout(function(){d.remove()},0)}),d.prop("target",e.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(d)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",f[b]||c.paramName)}),d.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),d.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),d.append(e).appendTo(document.body)},abort:function(){e&&e.unbind("load").prop("src",g),d&&d.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):a(window.jQuery)}(function(a){"use strict";a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:a(document),fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return b.isDefaultPrevented()?!1:void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var d,e=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&e-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=e,d=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=d-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(e,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=d,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(e,d,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var c,d=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(c=this._getFormData(b),b.blob?c.push({name:g,value:b.blob}):a.each(b.files,function(d,e){c.push({name:"array"===a.type(b.paramName)&&b.paramName[d]||g,value:e})})):(d._isInstanceOf("FormData",b.formData)?c=b.formData:(c=new FormData,a.each(this._getFormData(b),function(a,b){c.append(b.name,b.value)})),b.blob?c.append(g,b.blob,e.name):a.each(b.files,function(e,f){(d._isInstanceOf("File",f)||d._isInstanceOf("Blob",f))&&c.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=c):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var d,e,f=this,g=b.files[0],h=g.size,i=b.uploadedBytes,j=b.maxChunkSize||h,k=this._blobSlice,l=a.Deferred(),m=l.promise();return this._isXHRUpload(b)&&k&&(i||h>j)&&!b.data?c?!0:i>=h?(g.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",g.error])):(e=function(){var c=a.extend({},b),m=c._progress.loaded;c.blob=k.call(g,i,i+j,g.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+i+"-"+(i+c.chunkSize-1)+"/"+h,f._initXHRData(c),f._initProgressListener(c),d=(f._trigger("chunksend",null,c)!==!1&&a.ajax(c)||f._getXHRPromise(!1,c.context)).done(function(d,g,j){i=f._getUploadedBytes(j)||i+c.chunkSize,m+c.chunkSize-c._progress.loaded&&f._onProgress(a.Event("progress",{lengthComputable:!0,loaded:i-c.uploadedBytes,total:i-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=i,c.result=d,c.textStatus=g,c.jqXHR=j,f._trigger("chunkdone",null,c),f._trigger("chunkalways",null,c),h>i?e():l.resolveWith(c.context,[d,g,j])}).fail(function(a,b,d){c.jqXHR=a,c.textStatus=b,c.errorThrown=d,f._trigger("chunkfail",null,c),f._trigger("chunkalways",null,c),l.rejectWith(c.context,[a,b,d])})},this._enhancePromise(m),m.abort=function(){return d.abort()},e(),m):!1},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var d,e,f,g,h=this,i=h._getAJAXSettings(c),j=function(){return h._sending+=1,i._bitrateTimer=new h._BitrateTimer,d=d||((e||h._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&h._getXHRPromise(!1,i.context,e)||h._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){h._onDone(a,b,c,i)}).fail(function(a,b,c){h._onFail(a,b,c,i)}).always(function(a,b,c){if(h._onAlways(a,b,c,i),h._sending-=1,h._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>h._sending)for(var d=h._slots.shift();d;){if("pending"===h._getDeferredState(d)){d.resolve();break}d=h._slots.shift()}0===h._active&&h._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(f=a.Deferred(),this._slots.push(f),g=f.pipe(j)):(this._sequence=this._sequence.pipe(j,j),g=this._sequence),g.abort=function(){return e=[void 0,"abort","abort"],d?d.abort():(f&&f.rejectWith(i.context,e),j())},this._enhancePromise(g)):j()},_onAdd:function(b,c){var d,e,f,g,h=this,i=!0,j=a.extend({},this.options,c),k=c.files,l=k.length,m=j.limitMultiFileUploads,n=j.limitMultiFileUploadSize,o=j.limitMultiFileUploadSizeOverhead,p=0,q=this._getParamName(j),r=0;if(!n||l&&void 0!==k[0].size||(n=void 0),(j.singleFileUploads||m||n)&&this._isXHRUpload(j))if(j.singleFileUploads||n||!m)if(!j.singleFileUploads&&n)for(f=[],d=[],g=0;l>g;g+=1)p+=k[g].size+o,(g+1===l||p+k[g+1].size+o>n||m&&g+1-r>=m)&&(f.push(k.slice(r,g+1)),e=q.slice(r,g+1),e.length||(e=q),d.push(e),r=g+1,p=0);else d=q;else for(f=[],d=[],g=0;l>g;g+=m)f.push(k.slice(g,g+m)),e=q.slice(g,g+m),e.length||(e=q),d.push(e);else f=[k],d=[q];return c.originalFiles=k,a.each(f||k,function(e,g){var j=a.extend({},c);return j.files=f?g:[g],j.paramName=d[e],h._initResponseObject(j),h._initProgressObject(j),h._addConvenienceMethods(b,j),i=h._trigger("add",a.Event("add",{delegatedEvent:b}),j)}),i},_replaceFileInput:function(b){var c=b.clone(!0);a("<form></form>").append(c)[0].reset(),b.after(c).detach(),a.cleanData(b.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,d){return d===b[0]?c[0]:d}),b[0]===this.element[0]&&(this.element=c)},_handleFileTreeEntry:function(b,c){var d,e=this,f=a.Deferred(),g=function(a){a&&!a.entry&&(a.entry=b),f.resolve([a])},h=function(a){e._handleFileTreeEntries(a,c+b.name+"/").done(function(a){f.resolve(a)}).fail(g)},i=function(){d.readEntries(function(a){a.length?(j=j.concat(a),i()):h(j)},g)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,f.resolve(b._file)):b.file(function(a){a.relativePath=c,f.resolve(a)},g):b.isDirectory?(d=b.createReader(),i()):f.resolve([]),f.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var c,d,e=b.prop("webkitEntries")||b.prop("entries");if(e&&e.length)return this._handleFileTreeEntries(e);if(c=a.makeArray(b.prop("files")),c.length)void 0===c[0].name&&c[0].fileName&&a.each(c,function(a,b){b.name=b.fileName,b.size=b.fileSize;
});else{if(d=b.prop("value"),!d)return a.Deferred().resolve([]).promise();c=[{name:d.replace(/^.*\\/,"")}]}return a.Deferred().resolve(c).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d.fileInput),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=b.dataTransfer;c&&-1!==a.inArray("Files",c.types)&&this._trigger("dragover",a.Event("dragover",{delegatedEvent:b}))!==!1&&(b.preventDefault(),c.dropEffect="copy")},_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=a(this.element[0].cloneNode(!1));a.each(d.data(),function(a,e){var f="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();d.attr(f)&&(b._isRegExpOption(a,e)&&(e=b._getRegExp(e)),c[a]=e)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var c,d,e=this,f=a.Deferred(),g=f.promise();return g.abort=function(){return d=!0,c?c.abort():(f.reject(null,"abort","abort"),g)},this._getFileInputFiles(b.fileInput).always(function(a){if(!d){if(!a.length)return void f.reject();b.files=a,c=e._onSend(null,b),c.then(function(a,b,c){f.resolve(a,b,c)},function(a,b,c){f.reject(a,b,c)})}}),this._enhancePromise(g)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","./jquery.fileupload"],a):a(window.jQuery)}(function(a){"use strict";var b=a.blueimp.fileupload.prototype.options.add;a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{processQueue:[],add:function(c,d){var e=a(this);d.process(function(){return e.fileupload("process",d)}),b.call(this,c,d)}},processActions:{},_processFile:function(b,c){var d=this,e=a.Deferred().resolveWith(d,[b]),f=e.promise();return this._trigger("process",null,b),a.each(b.processQueue,function(b,e){var g=function(b){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():d.processActions[e.action].call(d,b,e)};f=f.pipe(g,e.always&&g)}),f.done(function(){d._trigger("processdone",null,b),d._trigger("processalways",null,b)}).fail(function(){d._trigger("processfail",null,b),d._trigger("processalways",null,b)}),f},_transformProcessQueue:function(b){var c=[];a.each(b.processQueue,function(){var d={},e=this.action,f=this.prefix===!0?e:this.prefix;a.each(this,function(c,e){"string"===a.type(e)&&"@"===e.charAt(0)?d[c]=b[e.slice(1)||(f?f+c.charAt(0).toUpperCase()+c.slice(1):c)]:d[c]=e}),c.push(d)}),b.processQueue=c},processing:function(){return this._processing},process:function(b){var c=this,d=a.extend({},this.options,b);return d.processQueue&&d.processQueue.length&&(this._transformProcessQueue(d),0===this._processing&&this._trigger("processstart"),a.each(b.files,function(e){var f=e?a.extend({},d):d,g=function(){return b.errorThrown?a.Deferred().rejectWith(c,[b]).promise():c._processFile(f,b)};f.index=e,c._processing+=1,c._processingQueue=c._processingQueue.pipe(g,g).always(function(){c._processing-=1,0===c._processing&&c._trigger("processstop")})})),this._processingQueue},_create:function(){this._super(),this._processing=0,this._processingQueue=a.Deferred().resolveWith(this).promise()}})}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","load-image","load-image-meta","load-image-exif","load-image-ios","canvas-to-blob","./jquery.fileupload-process"],a):a(window.jQuery,window.loadImage)}(function(a,b){"use strict";a.blueimp.fileupload.prototype.options.processQueue.unshift({action:"loadImageMetaData",disableImageHead:"@",disableExif:"@",disableExifThumbnail:"@",disableExifSub:"@",disableExifGps:"@",disabled:"@disableImageMetaDataLoad"},{action:"loadImage",prefix:!0,fileTypes:"@",maxFileSize:"@",noRevoke:"@",disabled:"@disableImageLoad"},{action:"resizeImage",prefix:"image",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",forceResize:"@",disabled:"@disableImageResize"},{action:"saveImage",quality:"@imageQuality",type:"@imageType",disabled:"@disableImageResize"},{action:"saveImageMetaData",disabled:"@disableImageMetaDataSave"},{action:"resizeImage",prefix:"preview",maxWidth:"@",maxHeight:"@",minWidth:"@",minHeight:"@",crop:"@",orientation:"@",thumbnail:"@",canvas:"@",disabled:"@disableImagePreview"},{action:"setImage",name:"@imagePreviewName",disabled:"@disableImagePreview"},{action:"deleteImageReferences",disabled:"@disableImageReferencesDeletion"}),a.widget("blueimp.fileupload",a.blueimp.fileupload,{options:{loadImageFileTypes:/^image\/(gif|jpeg|png|svg\+xml)$/,loadImageMaxFileSize:1e7,imageMaxWidth:1920,imageMaxHeight:1080,imageOrientation:!1,imageCrop:!1,disableImageResize:!0,previewMaxWidth:80,previewMaxHeight:80,previewOrientation:!0,previewThumbnail:!0,previewCrop:!1,previewCanvas:!0},processActions:{loadImage:function(c,d){if(d.disabled)return c;var e=this,f=c.files[c.index],g=a.Deferred();return"number"===a.type(d.maxFileSize)&&f.size>d.maxFileSize||d.fileTypes&&!d.fileTypes.test(f.type)||!b(f,function(a){a.src&&(c.img=a),g.resolveWith(e,[c])},d)?c:g.promise()},resizeImage:function(c,d){if(d.disabled||!c.canvas&&!c.img)return c;d=a.extend({canvas:!0},d);var e,f=this,g=a.Deferred(),h=d.canvas&&c.canvas||c.img,i=function(a){a&&(a.width!==h.width||a.height!==h.height||d.forceResize)&&(c[a.getContext?"canvas":"img"]=a),c.preview=a,g.resolveWith(f,[c])};if(c.exif){if(d.orientation===!0&&(d.orientation=c.exif.get("Orientation")),d.thumbnail&&(e=c.exif.get("Thumbnail")))return b(e,i,d),g.promise();c.orientation?delete d.orientation:c.orientation=d.orientation}return h?(i(b.scale(h,d)),g.promise()):c},saveImage:function(b,c){if(!b.canvas||c.disabled)return b;var d=this,e=b.files[b.index],f=a.Deferred();return b.canvas.toBlob?(b.canvas.toBlob(function(a){a.name||(e.type===a.type?a.name=e.name:e.name&&(a.name=e.name.replace(/\..+$/,"."+a.type.substr(6)))),e.type!==a.type&&delete b.imageHead,b.files[b.index]=a,f.resolveWith(d,[b])},c.type||e.type,c.quality),f.promise()):b},loadImageMetaData:function(c,d){if(d.disabled)return c;var e=this,f=a.Deferred();return b.parseMetaData(c.files[c.index],function(b){a.extend(c,b),f.resolveWith(e,[c])},d),f.promise()},saveImageMetaData:function(a,b){if(!(a.imageHead&&a.canvas&&a.canvas.toBlob)||b.disabled)return a;var c=a.files[a.index],d=new Blob([a.imageHead,this._blobSlice.call(c,20)],{type:c.type});return d.name=c.name,a.files[a.index]=d,a},setImage:function(a,b){return a.preview&&!b.disabled&&(a.files[a.index][b.name||"preview"]=a.preview),a},deleteImageReferences:function(a,b){return b.disabled||(delete a.img,delete a.canvas,delete a.preview,delete a.imageHead),a}}})}),+function(a){"use strict";function b(b){a(d).remove(),a(e).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))})}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}var d=".dropdown-backdrop",e="[data-toggle=dropdown]",f=function(b){a(b).on("click.bs.dropdown",this.toggle)};f.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;f.toggleClass("open").trigger("shown.bs.dropdown",h),e.focus()}return!1}},f.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var f=c(d),g=f.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&f.find(e).focus(),d.click();var h=" li:not(.divider):visible a",i=f.find("[role=menu]"+h+", [role=listbox]"+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).focus()}}}};var g=a.fn.dropdown;a.fn.dropdown=function(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new f(this)),"string"==typeof b&&d[b].call(c)})},a.fn.dropdown.Constructor=f,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=g,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",e,f.prototype.toggle).on("keydown.bs.dropdown.data-api",e+", [role=menu], [role=listbox]",f.prototype.keydown)}(jQuery),function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){return function(c){return k(a.call(this,c),b)}}function d(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function e(){}function f(a){w(a),h(this,a)}function g(a){var b=q(a),c=b.year||0,d=b.month||0,e=b.week||0,f=b.day||0,g=b.hour||0,h=b.minute||0,i=b.second||0,j=b.millisecond||0;this._milliseconds=+j+1e3*i+6e4*h+36e5*g,this._days=+f+7*e,this._months=+d+12*c,this._data={},this._bubble()}function h(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function i(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&qa.hasOwnProperty(b)&&(c[b]=a[b]);return c}function j(a){return 0>a?Math.ceil(a):Math.floor(a)}function k(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function l(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&da.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function m(a){return"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function o(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&s(a[d])!==s(b[d]))&&g++;return g+f}function p(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Ta[a]||Ua[b]||b}return a}function q(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=p(c),b&&(d[b]=a[c]));return d}function r(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}da[b]=function(e,f){var g,h,i=da.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=da().utc().set(d,a);return i.call(da.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function s(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function t(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function u(a){return v(a)?366:365}function v(a){return a%4===0&&a%100!==0||a%400===0}function w(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[ja]<0||a._a[ja]>11?ja:a._a[ka]<1||a._a[ka]>t(a._a[ia],a._a[ja])?ka:a._a[la]<0||a._a[la]>23?la:a._a[ma]<0||a._a[ma]>59?ma:a._a[na]<0||a._a[na]>59?na:a._a[oa]<0||a._a[oa]>999?oa:-1,a._pf._overflowDayOfYear&&(ia>b||b>ka)&&(b=ka),a._pf.overflow=b)}function x(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function y(a){return a?a.toLowerCase().replace("_","-"):a}function z(a,b){return b._isUTC?da(a).zone(b._offset||0):da(a).local()}function A(a,b){return b.abbr=a,pa[a]||(pa[a]=new e),pa[a].set(b),pa[a]}function B(a){delete pa[a]}function C(a){var b,c,d,e,f=0,g=function(a){if(!pa[a]&&ra)try{require("./lang/"+a)}catch(b){}return pa[a]};if(!a)return da.fn._lang;if(!m(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=y(a[f]).split("-"),b=e.length,d=y(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&o(e,d,!0)>=b-1)break;b--}f++}return da.fn._lang}function D(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function E(a){var b,c,d=a.match(va);for(b=0,c=d.length;c>b;b++)d[b]=Ya[d[b]]?Ya[d[b]]:D(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function F(a,b){return a.isValid()?(b=G(b,a.lang()),Va[b]||(Va[b]=E(b)),Va[b](a)):a.lang().invalidDate()}function G(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(wa.lastIndex=0;d>=0&&wa.test(a);)a=a.replace(wa,c),wa.lastIndex=0,d-=1;return a}function H(a,b){var c,d=b._strict;switch(a){case"DDDD":return Ia;case"YYYY":case"GGGG":case"gggg":return d?Ja:za;case"Y":case"G":case"g":return La;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Ka:Aa;case"S":if(d)return Ga;case"SS":if(d)return Ha;case"SSS":if(d)return Ia;case"DDD":return ya;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ca;case"a":case"A":return C(b._l)._meridiemParse;case"X":return Fa;case"Z":case"ZZ":return Da;case"T":return Ea;case"SSSS":return Ba;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ha:xa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return xa;default:return c=new RegExp(P(O(a.replace("\\","")),"i"))}}function I(a){a=a||"";var b=a.match(Da)||[],c=b[b.length-1]||[],d=(c+"").match(Qa)||["-",0,0],e=+(60*d[1])+s(d[2]);return"+"===d[0]?-e:e}function J(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[ja]=s(b)-1);break;case"MMM":case"MMMM":d=C(c._l).monthsParse(b),null!=d?e[ja]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[ka]=s(b));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=s(b));break;case"YY":e[ia]=s(b)+(s(b)>68?1900:2e3);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ia]=s(b);break;case"a":case"A":c._isPm=C(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[la]=s(b);break;case"m":case"mm":e[ma]=s(b);break;case"s":case"ss":e[na]=s(b);break;case"S":case"SS":case"SSS":case"SSSS":e[oa]=s(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=I(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function K(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=M(a),a._w&&null==a._a[ka]&&null==a._a[ja]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ia]?da().weekYear():a._a[ia]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=Z(f(g.GG),g.W||1,g.E,4,1):(i=C(a._l),j=null!=g.d?V(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=Z(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ia]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ia]?d[ia]:a._a[ia],a._dayOfYear>u(e)&&(a._pf._overflowDayOfYear=!0),c=U(e,0,a._dayOfYear),a._a[ja]=c.getUTCMonth(),a._a[ka]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[la]+=s((a._tzm||0)/60),l[ma]+=s((a._tzm||0)%60),a._d=(a._useUTC?U:T).apply(null,l)}}function L(a){var b;a._d||(b=q(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],K(a))}function M(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function N(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=C(a._l),h=""+a._i,i=h.length,j=0;for(d=G(a._f,g).match(va)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(H(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),Ya[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),J(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[la]<12&&(a._a[la]+=12),a._isPm===!1&&12===a._a[la]&&(a._a[la]=0),K(a),w(a)}function O(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function P(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,c=h({},a),c._pf=b(),c._f=a._f[f],N(c),x(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));h(a,d||c)}function R(a){var b,c,d=a._i,e=Ma.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Oa.length;c>b;b++)if(Oa[b][1].exec(d)){a._f=Oa[b][0]+(e[6]||" ");break}for(b=0,c=Pa.length;c>b;b++)if(Pa[b][1].exec(d)){a._f+=Pa[b][0];break}d.match(Da)&&(a._f+="Z"),N(a)}else a._d=new Date(d)}function S(b){var c=b._i,d=sa.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?R(b):m(c)?(b._a=c.slice(0),K(b)):n(c)?b._d=new Date(+c):"object"==typeof c?L(b):b._d=new Date(c)}function T(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function U(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function V(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function W(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function X(a,b,c){var d=ha(Math.abs(a)/1e3),e=ha(d/60),f=ha(e/60),g=ha(f/24),h=ha(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",ha(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,W.apply({},i)}function Y(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=da(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function Z(a,b,c,d,e){var f,g,h=U(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:u(a-1)+g}}function $(a){var b=a._i,c=a._f;return null===b?da.invalid({nullInput:!0}):("string"==typeof b&&(a._i=b=C().preparse(b)),da.isMoment(b)?(a=i(b),a._d=new Date(+b._d)):c?m(c)?Q(a):N(a):S(a),new f(a))}function _(a,b){da.fn[a]=da.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),da.updateOffset(this),this):this._d["get"+c+b]()}}function aa(a){da.duration.fn[a]=function(){return this._data[a]}}function ba(a,b){da.duration.fn["as"+a]=function(){return+this/b}}function ca(a){var b=!1,c=da;"undefined"==typeof ender&&(a?(ga.moment=function(){return!b&&console&&console.warn&&(b=!0,console.warn("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.")),c.apply(null,arguments)},h(ga.moment,c)):ga.moment=da)}for(var da,ea,fa="2.5.1",ga=this,ha=Math.round,ia=0,ja=1,ka=2,la=3,ma=4,na=5,oa=6,pa={},qa={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},ra="undefined"!=typeof module&&module.exports&&"undefined"!=typeof require,sa=/^\/?Date\((\-?\d+)/i,ta=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,ua=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,va=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,wa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,xa=/\d\d?/,ya=/\d{1,3}/,za=/\d{1,4}/,Aa=/[+\-]?\d{1,6}/,Ba=/\d+/,Ca=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Da=/Z|[\+\-]\d\d:?\d\d/gi,Ea=/T/i,Fa=/[\+\-]?\d+(\.\d{1,3})?/,Ga=/\d/,Ha=/\d\d/,Ia=/\d{3}/,Ja=/\d{4}/,Ka=/[+-]?\d{6}/,La=/[+-]?\d+/,Ma=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Na="YYYY-MM-DDTHH:mm:ssZ",Oa=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Pa=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Qa=/([\+\-]|\d\d)/gi,Ra="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Sa={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ta={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ua={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Va={},Wa="DDD w W M D d".split(" "),Xa="M D H h m s w W".split(" "),Ya={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return k(this.year()%100,2)},YYYY:function(){return k(this.year(),4)},YYYYY:function(){return k(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+k(Math.abs(a),6)},gg:function(){return k(this.weekYear()%100,2)},gggg:function(){return k(this.weekYear(),4)},ggggg:function(){return k(this.weekYear(),5)},GG:function(){return k(this.isoWeekYear()%100,2)},GGGG:function(){return k(this.isoWeekYear(),4)},GGGGG:function(){return k(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return s(this.milliseconds()/100)},SS:function(){return k(s(this.milliseconds()/10),2)},SSS:function(){return k(this.milliseconds(),3)},SSSS:function(){return k(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+":"+k(s(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+k(s(a/60),2)+k(s(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},Za=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];Wa.length;)ea=Wa.pop(),Ya[ea+"o"]=d(Ya[ea],ea);for(;Xa.length;)ea=Xa.pop(),Ya[ea+ea]=c(Ya[ea],2);for(Ya.DDDD=c(Ya.DDD,3),h(e.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=da.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=da([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return Y(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),da=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),$(g)},da.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),$(g).utc()},da.unix=function(a){return da(1e3*a)},da.duration=function(a,b){var c,d,e,f=a,h=null;return da.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(h=ta.exec(a))?(c="-"===h[1]?-1:1,f={y:0,d:s(h[ka])*c,h:s(h[la])*c,m:s(h[ma])*c,s:s(h[na])*c,ms:s(h[oa])*c}):(h=ua.exec(a))&&(c="-"===h[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(h[2]),M:e(h[3]),d:e(h[4]),h:e(h[5]),m:e(h[6]),s:e(h[7]),w:e(h[8])}),d=new g(f),da.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},da.version=fa,da.defaultFormat=Na,da.updateOffset=function(){},da.lang=function(a,b){var c;return a?(b?A(y(a),b):null===b?(B(a),a="en"):pa[a]||C(a),c=da.duration.fn._lang=da.fn._lang=C(a),c._abbr):da.fn._lang._abbr},da.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),C(a)},da.isMoment=function(a){return a instanceof f||null!=a&&a.hasOwnProperty("_isAMomentObject")},da.isDuration=function(a){return a instanceof g},ea=Za.length-1;ea>=0;--ea)r(Za[ea]);for(da.normalizeUnits=function(a){return p(a)},da.invalid=function(a){var b=da.utc(NaN);return null!=a?h(b._pf,a):b._pf.userInvalidated=!0,b},da.parseZone=function(a){return da(a).parseZone()},h(da.fn=f.prototype,{clone:function(){return da(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=da(this).utc();return 0<a.year()&&a.year()<=9999?F(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):F(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return x(this)},isDSTShifted:function(){return this._a?this.isValid()&&o(this._a,(this._isUTC?da.utc(this._a):da(this._a)).toArray())>0:!1},parsingFlags:function(){return h({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=F(this,a||da.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?da.duration(+b,a):da.duration(a,b),l(this,c,-1),this},diff:function(a,b,c){var d,e,f=z(a,this),g=6e4*(this.zone()-f.zone());return b=p(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-da(this).startOf("month")-(f-da(f).startOf("month")))/d,e-=6e4*(this.zone()-da(this).startOf("month").zone()-(f.zone()-da(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:j(e)},from:function(a,b){return da.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(da(),a)},calendar:function(){var a=z(da(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";
return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return v(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=V(a,this.lang()),this.add({d:a-b})):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),da.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=p(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=p(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+da(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+da(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+z(a,this).startOf(b)},min:function(a){return a=da.apply(null,arguments),this>a?this:a},max:function(a){return a=da.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=I(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&l(this,da.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?da(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return t(this.year(),this.month())},dayOfYear:function(a){var b=ha((da(this).startOf("day")-da(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(){return Math.ceil((this.month()+1)/3)},weekYear:function(a){var b=Y(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=Y(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=Y(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=p(a),this[a]()},set:function(a,b){return a=p(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=C(b),this)}}),ea=0;ea<Ra.length;ea++)_(Ra[ea].toLowerCase().replace(/s$/,""),Ra[ea]);_("year","FullYear"),da.fn.days=da.fn.day,da.fn.months=da.fn.month,da.fn.weeks=da.fn.week,da.fn.isoWeeks=da.fn.isoWeek,da.fn.toJSON=da.fn.toISOString,h(da.duration.fn=g.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=j(e/1e3),h.seconds=a%60,b=j(a/60),h.minutes=b%60,c=j(b/60),h.hours=c%24,f+=j(c/24),h.days=f%30,g+=j(f/30),h.months=g%12,d=j(g/12),h.years=d},weeks:function(){return j(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*s(this._months/12)},humanize:function(a){var b=+this,c=X(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=da.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=da.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=p(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=p(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:da.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(ea in Sa)Sa.hasOwnProperty(ea)&&(ba(ea,Sa[ea]),aa(ea.toLowerCase()));ba("Weeks",6048e5),da.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},da.lang("en",{ordinal:function(a){var b=a%10,c=1===s(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),ra?(module.exports=da,ca(!0)):"function"==typeof define&&define.amd?define("moment",function(b,c,d){return d.config&&d.config()&&d.config().noGlobal!==!0&&ca(d.config().noGlobal===a),da}):ca()}.call(this),!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.Autolinker=b()}):"object"==typeof exports?module.exports=b():a.Autolinker=b()}(this,function(){var a=function(b){a.Util.assign(this,b);var c=this.hashtag;if(c!==!1&&"twitter"!==c&&"facebook"!==c)throw new Error("invalid `hashtag` cfg - see docs")};return a.prototype={constructor:a,urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,newWindow:!0,stripPrefix:!0,truncate:void 0,className:"",htmlParser:void 0,matchParser:void 0,tagBuilder:void 0,link:function(a){if(!a)return"";for(var b=this.getHtmlParser(),c=b.parse(a),d=0,e=[],f=0,g=c.length;g>f;f++){var h=c[f],i=h.getType(),j=h.getText();if("element"===i)"a"===h.getTagName()&&(h.isClosing()?d=Math.max(d-1,0):d++),e.push(j);else if("entity"===i||"comment"===i)e.push(j);else if(0===d){var k=this.linkifyStr(j);e.push(k)}else e.push(j)}return e.join("")},linkifyStr:function(a){return this.getMatchParser().replace(a,this.createMatchReturnVal,this)},createMatchReturnVal:function(b){var c;if(this.replaceFn&&(c=this.replaceFn.call(this,this,b)),"string"==typeof c)return c;if(c===!1)return b.getMatchedText();if(c instanceof a.HtmlTag)return c.toAnchorString();var d=this.getTagBuilder(),e=d.build(b);return e.toAnchorString()},getHtmlParser:function(){var b=this.htmlParser;return b||(b=this.htmlParser=new a.htmlParser.HtmlParser),b},getMatchParser:function(){var b=this.matchParser;return b||(b=this.matchParser=new a.matchParser.MatchParser({urls:this.urls,email:this.email,twitter:this.twitter,phone:this.phone,hashtag:this.hashtag,stripPrefix:this.stripPrefix})),b},getTagBuilder:function(){var b=this.tagBuilder;return b||(b=this.tagBuilder=new a.AnchorTagBuilder({newWindow:this.newWindow,truncate:this.truncate,className:this.className})),b}},a.link=function(b,c){var d=new a(c);return d.link(b)},a.match={},a.htmlParser={},a.matchParser={},a.Util={abstractMethod:function(){throw"abstract"},trimRegex:/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,assign:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},extend:function(b,c){var d=b.prototype,e=function(){};e.prototype=d;var f;f=c.hasOwnProperty("constructor")?c.constructor:function(){d.constructor.apply(this,arguments)};var g=f.prototype=new e;return g.constructor=f,g.superclass=d,delete c.constructor,a.Util.assign(g,c),f},ellipsis:function(a,b,c){return a.length>b&&(c=null==c?"..":c,a=a.substring(0,b-c.length)+c),a},indexOf:function(a,b){if(Array.prototype.indexOf)return a.indexOf(b);for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},splitAndCapture:function(a,b){if(!b.global)throw new Error("`splitRegex` must have the 'g' flag set");for(var c,d=[],e=0;c=b.exec(a);)d.push(a.substring(e,c.index)),d.push(c[0]),e=c.index+c[0].length;return d.push(a.substring(e)),d},trim:function(a){return a.replace(this.trimRegex,"")}},a.HtmlTag=a.Util.extend(Object,{whitespaceRegex:/\s+/,constructor:function(b){a.Util.assign(this,b),this.innerHtml=this.innerHtml||this.innerHTML},setTagName:function(a){return this.tagName=a,this},getTagName:function(){return this.tagName||""},setAttr:function(a,b){var c=this.getAttrs();return c[a]=b,this},getAttr:function(a){return this.getAttrs()[a]},setAttrs:function(b){var c=this.getAttrs();return a.Util.assign(c,b),this},getAttrs:function(){return this.attrs||(this.attrs={})},setClass:function(a){return this.setAttr("class",a)},addClass:function(b){for(var c,d=this.getClass(),e=this.whitespaceRegex,f=a.Util.indexOf,g=d?d.split(e):[],h=b.split(e);c=h.shift();)-1===f(g,c)&&g.push(c);return this.getAttrs()["class"]=g.join(" "),this},removeClass:function(b){for(var c,d=this.getClass(),e=this.whitespaceRegex,f=a.Util.indexOf,g=d?d.split(e):[],h=b.split(e);g.length&&(c=h.shift());){var i=f(g,c);-1!==i&&g.splice(i,1)}return this.getAttrs()["class"]=g.join(" "),this},getClass:function(){return this.getAttrs()["class"]||""},hasClass:function(a){return-1!==(" "+this.getClass()+" ").indexOf(" "+a+" ")},setInnerHtml:function(a){return this.innerHtml=a,this},getInnerHtml:function(){return this.innerHtml||""},toAnchorString:function(){var a=this.getTagName(),b=this.buildAttrsStr();return b=b?" "+b:"",["<",a,b,">",this.getInnerHtml(),"</",a,">"].join("")},buildAttrsStr:function(){if(!this.attrs)return"";var a=this.getAttrs(),b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c+'="'+a[c]+'"');return b.join(" ")}}),a.AnchorTagBuilder=a.Util.extend(Object,{constructor:function(b){a.Util.assign(this,b)},build:function(b){var c=new a.HtmlTag({tagName:"a",attrs:this.createAttrs(b.getType(),b.getAnchorHref()),innerHtml:this.processAnchorText(b.getAnchorText())});return c},createAttrs:function(a,b){var c={href:b},d=this.createCssClass(a);return d&&(c["class"]=d),this.newWindow&&(c.target="_blank"),c},createCssClass:function(a){var b=this.className;return b?b+" "+b+"-"+a:""},processAnchorText:function(a){return a=this.doTruncate(a)},doTruncate:function(b){return a.Util.ellipsis(b,this.truncate||Number.POSITIVE_INFINITY)}}),a.htmlParser.HtmlParser=a.Util.extend(Object,{htmlRegex:function(){var a=/!--([\s\S]+?)--/,b=/[0-9a-zA-Z][0-9a-zA-Z:]*/,c=/[^\s\0"'>\/=\x01-\x1F\x7F]+/,d=/(?:"[^"]*?"|'[^']*?'|[^'"=<>`\s]+)/,e=c.source+"(?:\\s*=\\s*"+d.source+")?";return new RegExp(["(?:","<(!DOCTYPE)","(?:","\\s+","(?:",e,"|",d.source+")",")*",">",")","|","(?:","<(/)?","(?:",a.source,"|","(?:","("+b.source+")","(?:","\\s+",e,")*","\\s*/?",")",")",">",")"].join(""),"gi")}(),htmlCharacterEntitiesRegex:/(&nbsp;|&#160;|&lt;|&#60;|&gt;|&#62;|&quot;|&#34;|&#39;)/gi,parse:function(a){for(var b,c,d=this.htmlRegex,e=0,f=[];null!==(b=d.exec(a));){var g=b[0],h=b[3],i=b[1]||b[4],j=!!b[2],k=a.substring(e,b.index);k&&(c=this.parseTextAndEntityNodes(k),f.push.apply(f,c)),f.push(h?this.createCommentNode(g,h):this.createElementNode(g,i,j)),e=b.index+g.length}if(e<a.length){var l=a.substring(e);l&&(c=this.parseTextAndEntityNodes(l),f.push.apply(f,c))}return f},parseTextAndEntityNodes:function(b){for(var c=[],d=a.Util.splitAndCapture(b,this.htmlCharacterEntitiesRegex),e=0,f=d.length;f>e;e+=2){var g=d[e],h=d[e+1];g&&c.push(this.createTextNode(g)),h&&c.push(this.createEntityNode(h))}return c},createCommentNode:function(b,c){return new a.htmlParser.CommentNode({text:b,comment:a.Util.trim(c)})},createElementNode:function(b,c,d){return new a.htmlParser.ElementNode({text:b,tagName:c.toLowerCase(),closing:d})},createEntityNode:function(b){return new a.htmlParser.EntityNode({text:b})},createTextNode:function(b){return new a.htmlParser.TextNode({text:b})}}),a.htmlParser.HtmlNode=a.Util.extend(Object,{text:"",constructor:function(b){a.Util.assign(this,b)},getType:a.Util.abstractMethod,getText:function(){return this.text}}),a.htmlParser.CommentNode=a.Util.extend(a.htmlParser.HtmlNode,{comment:"",getType:function(){return"comment"},getComment:function(){return this.comment}}),a.htmlParser.ElementNode=a.Util.extend(a.htmlParser.HtmlNode,{tagName:"",closing:!1,getType:function(){return"element"},getTagName:function(){return this.tagName},isClosing:function(){return this.closing}}),a.htmlParser.EntityNode=a.Util.extend(a.htmlParser.HtmlNode,{getType:function(){return"entity"}}),a.htmlParser.TextNode=a.Util.extend(a.htmlParser.HtmlNode,{getType:function(){return"text"}}),a.matchParser.MatchParser=a.Util.extend(Object,{urls:!0,email:!0,twitter:!0,phone:!0,hashtag:!1,stripPrefix:!0,matcherRegex:function(){var a=/(^|[^\w])@(\w{1,15})/,b=/(^|[^\w])#(\w{1,15})/,c=/(?:[\-;:&=\+\$,\w\.]+@)/,d=/(?:\+?\d{1,3}[-\s.])?\(?\d{3}\)?[-\s.]?\d{3}[-\s.]\d{4}/,e=/(?:[A-Za-z][-.+A-Za-z0-9]+:(?![A-Za-z][-.+A-Za-z0-9]+:\/\/)(?!\d+\/?)(?:\/\/)?)/,f=/(?:www\.)/,g=/[A-Za-z0-9\.\-]*[A-Za-z0-9\-]/,h=/\.(?:international|construction|contractors|enterprises|photography|productions|foundation|immobilien|industries|management|properties|technology|christmas|community|directory|education|equipment|institute|marketing|solutions|vacations|bargains|boutique|builders|catering|cleaning|clothing|computer|democrat|diamonds|graphics|holdings|lighting|partners|plumbing|supplies|training|ventures|academy|careers|company|cruises|domains|exposed|flights|florist|gallery|guitars|holiday|kitchen|neustar|okinawa|recipes|rentals|reviews|shiksha|singles|support|systems|agency|berlin|camera|center|coffee|condos|dating|estate|events|expert|futbol|kaufen|luxury|maison|monash|museum|nagoya|photos|repair|report|social|supply|tattoo|tienda|travel|viajes|villas|vision|voting|voyage|actor|build|cards|cheap|codes|dance|email|glass|house|mango|ninja|parts|photo|shoes|solar|today|tokyo|tools|watch|works|aero|arpa|asia|best|bike|blue|buzz|camp|club|cool|coop|farm|fish|gift|guru|info|jobs|kiwi|kred|land|limo|link|menu|mobi|moda|name|pics|pink|post|qpon|rich|ruhr|sexy|tips|vote|voto|wang|wien|wiki|zone|bar|bid|biz|cab|cat|ceo|com|edu|gov|int|kim|mil|net|onl|org|pro|pub|red|tel|uno|wed|xxx|xyz|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cu|cv|cw|cx|cy|cz|de|dj|dk|dm|do|dz|ec|ee|eg|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|za|zm|zw)\b/,i=/[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]?!:,.;]*[\-A-Za-z0-9+&@#\/%=~_()|'$*\[\]]/;return new RegExp(["(",a.source,")","|","(",c.source,g.source,h.source,")","|","(","(?:","(",e.source,g.source,")","|","(?:","(.?//)?",f.source,g.source,")","|","(?:","(.?//)?",g.source,h.source,")",")","(?:"+i.source+")?",")","|","(",d.source,")","|","(",b.source,")"].join(""),"gi")}(),charBeforeProtocolRelMatchRegex:/^(.)?\/\//,constructor:function(b){a.Util.assign(this,b),this.matchValidator=new a.MatchValidator},replace:function(a,b,c){var d=this;return a.replace(this.matcherRegex,function(a,e,f,g,h,i,j,k,l,m,n,o,p){var q=d.processCandidateMatch(a,e,f,g,h,i,j,k,l,m,n,o,p);if(q){var r=b.call(c,q.match);return q.prefixStr+r+q.suffixStr}return a})},processCandidateMatch:function(b,c,d,e,f,g,h,i,j,k,l,m,n){var o,p=i||j,q="",r="";if(g&&!this.urls||f&&!this.email||k&&!this.phone||c&&!this.twitter||l&&!this.hashtag||!this.matchValidator.isValidMatch(g,h,p))return null;if(this.matchHasUnbalancedClosingParen(b)&&(b=b.substr(0,b.length-1),r=")"),f)o=new a.match.Email({matchedText:b,email:f});else if(c)d&&(q=d,b=b.slice(1)),o=new a.match.Twitter({matchedText:b,twitterHandle:e});else if(k){var s=b.replace(/\D/g,"");o=new a.match.Phone({matchedText:b,number:s})}else if(l)m&&(q=m,b=b.slice(1)),o=new a.match.Hashtag({matchedText:b,serviceName:this.hashtag,hashtag:n});else{if(p){var t=p.match(this.charBeforeProtocolRelMatchRegex)[1]||"";t&&(q=t,b=b.slice(1))}o=new a.match.Url({matchedText:b,url:b,protocolUrlMatch:!!h,protocolRelativeMatch:!!p,stripPrefix:this.stripPrefix})}return{prefixStr:q,suffixStr:r,match:o}},matchHasUnbalancedClosingParen:function(a){var b=a.charAt(a.length-1);if(")"===b){var c=a.match(/\(/g),d=a.match(/\)/g),e=c&&c.length||0,f=d&&d.length||0;if(f>e)return!0}return!1}}),a.MatchValidator=a.Util.extend(Object,{invalidProtocolRelMatchRegex:/^[\w]\/\//,hasFullProtocolRegex:/^[A-Za-z][-.+A-Za-z0-9]+:\/\//,uriSchemeRegex:/^[A-Za-z][-.+A-Za-z0-9]+:/,hasWordCharAfterProtocolRegex:/:[^\s]*?[A-Za-z]/,isValidMatch:function(a,b,c){return b&&!this.isValidUriScheme(b)||this.urlMatchDoesNotHaveProtocolOrDot(a,b)||this.urlMatchDoesNotHaveAtLeastOneWordChar(a,b)||this.isInvalidProtocolRelativeMatch(c)?!1:!0},isValidUriScheme:function(a){var b=a.match(this.uriSchemeRegex)[0].toLowerCase();return"javascript:"!==b&&"vbscript:"!==b},urlMatchDoesNotHaveProtocolOrDot:function(a,b){return!(!a||b&&this.hasFullProtocolRegex.test(b)||-1!==a.indexOf("."))},urlMatchDoesNotHaveAtLeastOneWordChar:function(a,b){return a&&b?!this.hasWordCharAfterProtocolRegex.test(a):!1},isInvalidProtocolRelativeMatch:function(a){return!!a&&this.invalidProtocolRelMatchRegex.test(a)}}),a.match.Match=a.Util.extend(Object,{constructor:function(b){a.Util.assign(this,b)},getType:a.Util.abstractMethod,getMatchedText:function(){return this.matchedText},getAnchorHref:a.Util.abstractMethod,getAnchorText:a.Util.abstractMethod}),a.match.Email=a.Util.extend(a.match.Match,{getType:function(){return"email"},getEmail:function(){return this.email},getAnchorHref:function(){return"mailto:"+this.email},getAnchorText:function(){return this.email}}),a.match.Hashtag=a.Util.extend(a.match.Match,{getType:function(){return"hashtag"},getHashtag:function(){return this.hashtag},getAnchorHref:function(){var a=this.serviceName,b=this.hashtag;switch(a){case"twitter":return"https://twitter.com/hashtag/"+b;case"facebook":return"https://www.facebook.com/hashtag/"+b;default:throw new Error("Unknown service name to point hashtag to: ",a)}},getAnchorText:function(){return"#"+this.hashtag}}),a.match.Phone=a.Util.extend(a.match.Match,{getType:function(){return"phone"},getNumber:function(){return this.number},getAnchorHref:function(){return"tel:"+this.number},getAnchorText:function(){return this.matchedText}}),a.match.Twitter=a.Util.extend(a.match.Match,{getType:function(){return"twitter"},getTwitterHandle:function(){return this.twitterHandle},getAnchorHref:function(){return"https://twitter.com/"+this.twitterHandle},getAnchorText:function(){return"@"+this.twitterHandle}}),a.match.Url=a.Util.extend(a.match.Match,{urlPrefixRegex:/^(https?:\/\/)?(www\.)?/i,protocolRelativeRegex:/^\/\//,protocolPrepended:!1,getType:function(){return"url"},getUrl:function(){var a=this.url;return this.protocolRelativeMatch||this.protocolUrlMatch||this.protocolPrepended||(a=this.url="http://"+a,this.protocolPrepended=!0),a},getAnchorHref:function(){var a=this.getUrl();return a.replace(/&amp;/g,"&")},getAnchorText:function(){var a=this.getUrl();return this.protocolRelativeMatch&&(a=this.stripProtocolRelativePrefix(a)),this.stripPrefix&&(a=this.stripUrlPrefix(a)),a=this.removeTrailingSlash(a)},stripUrlPrefix:function(a){return a.replace(this.urlPrefixRegex,"")},stripProtocolRelativePrefix:function(a){return a.replace(this.protocolRelativeRegex,"")},removeTrailingSlash:function(a){return"/"===a.charAt(a.length-1)&&(a=a.slice(0,-1)),a}}),a}),ko.bindingHandlers.stopBinding={init:function(){return{controlsDescendantBindings:!0}}},ko.virtualElements.allowedBindings.stopBinding=!0,ko.bindingHandlers.helper={init:function(a,b){var c=ko.unwrap(b()),d=[a];return"function"==typeof c?void c.apply(c,d):(c.args&&(d=d.concat(clearObservables(c.args))),void(c.init&&c.init.apply(c.init,d)))},update:function(a,b){var c=ko.unwrap(b()),d=[a];"function"!=typeof c&&(c.args&&(d=d.concat(clearObservables(c.args))),c.update&&c.update.apply(c.update,d))}},ko.bindingHandlers.editableText={init:function(a,b,c){function d(){var b=a.innerHTML;b!==f()&&a.isContentEditable&&ko.isWriteableObservable(g)&&(f(b),g(b))}function e(){window.setTimeout(d,0)}var f=b(),g=c().editableText,h=$(a);h.on("keyup",d),h.on("cut",e),h.on("paste",e)},update:function(a,b){var c=ko.unwrap(b());a.innerHTML!=c&&(a.innerHTML=c)}},ko.bindingHandlers.autosize={init:function(a,b){var c=jQuery(a);c.autosize({callback:b(),append:""})}},ko.bindingHandlers.activityContent={init:function(a,b,c,d,e){function f(a,b){return b="undefined"==typeof b?"":'\\s+href\\s*=\\s*"(#ps(u|r)_[a-z]+/)?'+b+'"',new RegExp('<a(\\s+([a-zA-Z\\-]+)\\s*=\\s*"[a-zA-Z0-9#_/]*")*'+b+'(\\s+([a-zA-Z\\-]+)\\s*=\\s*"[a-zA-Z0-9#_/]*")*>'+a+"<\\/a>")}var g=document.createElement("span"),h=ko.unwrap(b());h=h.replace(f(d.UserName(),d.UserId()),'<a href="javascript:void(0)" data-bind="text: UserName, click: $parent.NavigatePage.bind($parent, \'profile\', UserId)"></a>'),h=h.replace(f(d.PageName(),d.PageId()),'<a href="javascript:void(0)" data-bind="text: PageName, click: $parent.NavigatePage.bind($parent, \'profile\', PageId)"></a>'),h=h.replace(f("message"),'<a href="javascript:void(0)" data-bind="click: $parent.OpenOverlayById.bind($parent, Id)">message</a>'),h=h.replace(f("post"),'<a href="javascript:void(0)" data-bind="click: $parent.OpenOverlayById.bind($parent, Id)">post</a>'),h=h.replace(f("photo(\\.)?\\s*"),'<a href="javascript:void(0)" data-bind="click: $parent.OpenOverlayById.bind($parent, Id)">photo</a>'),h=h.replace(f("profile picture(\\.)?"),'<a href="javascript:void(0)" data-bind="click: $parent.OpenOverlayById.bind($parent, Id)">profile picture</a>'),h=h.replace(f("cover image(\\.)?"),'<a href="javascript:void(0)" data-bind="click: $parent.OpenOverlayById.bind($parent, Id)">cover image</a>'),h=h.replace(f("You"),"You"),h=h.replace(f("your"),"your"),g.innerHTML=h,a.appendChild(g),ko.applyBindings(e,g)},update:function(a,b,c,d,e){}},ko.bindingHandlers.linkHtml={init:function(a,b){var c=ko.unwrap(b()),d=findLinks(c);c=cleanTags(c);var e=parseLinks(d,c);a.innerHTML=e.replace(/\n/g,"<br />")},update:function(a,b,c,d,e){}},ko.bindingHandlers.navigation={init:function(a,b){var c=$(a);this.$boundLinks=c.find(".navigation-link"),this.$boundSections=c.find(".navigation-section"),c.on("click",".navigation-link",function(){b()({section:$(this).data("section"),tab:$(this).data("tab")})})},update:function(a,b){var c=b()(),d=this.$boundLinks,e=this.$boundSections,f='[data-tab="'+c.tab+'"][data-section="'+c.section+'"]';d.removeClass("selected").filter(f).addClass("selected"),e.find(".navigation-section").hide(),e.hide().filter("[data-section='"+c.section+"']").show().find("[data-tab='"+c.tab+"']").show()}},function(){"use strict";ko.bindingHandlers.autoLink={update:function(a,b,c,d,e){var f=b(),g=ko.unwrap(f),h=window.Autolinker.link(g);a.innerHTML=h}}}();var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this.eventHandlers=[],this.sender=a}return a.prototype.Fire=function(a){for(var b=0;b<this.eventHandlers.length;b++)this.eventHandlers[b](this.sender,a)},a.prototype.Attach=function(a,b){for(var c=0;c<this.eventHandlers.length;c++)if(this.eventHandlers[c]==a)return;if(b){var d=a;a=function(a,c){d.call(b,a,c)}}this.eventHandlers.push(a)},a.prototype.Remove=function(a){for(var b=0;b<this.eventHandlers.length;b++)if(this.eventHandlers[b]==a){this.eventHandlers.splice(b,1);break}},a.prototype.NumHandlers=function(){return this.eventHandlers.length},a}();a.Event=b}(a.Events||(a.Events={}));a.Events}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){a[a.Trace=0]="Trace",a[a.Debug=1]="Debug",a[a.Info=2]="Info",a[a.Warn=3]="Warn",a[a.Error=4]="Error",a[a.Slient=5]="Slient"}(a.LogLevel||(a.LogLevel={}));a.LogLevel}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){a[a.Loader=0]="Loader",a[a.Component=1]="Component",a[a.Router=2]="Router",a[a.Messenger=3]="Messenger",a[a.ViewModel=4]="ViewModel",a[a.Model=5]="Model",a[a.Widget=6]="Widget"}(a.LogCategory||(a.LogCategory={}));a.LogCategory}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){if(null==a.instance){this.logLevel=5;var b=window.console||{log:function(){return null}};this.log=function(a){return b.log(a)},this.trace="undefined"==typeof b.trace?function(){}:function(){return b.trace()},this.dumpObject="undefined"==typeof b.dir?function(a){return b.log(a)}:function(a){return b.dir(a)},this.info="undefined"==typeof b.info?function(a){return b.log(a)}:function(a){return b.info(a)},this.warn="undefined"==typeof b.warn?function(a){return b.log(a)}:function(a){return b.warn(a)},this.error="undefined"==typeof b.error?function(a){return b.log(a)}:function(a){return b.error(a)},a.instance=this}}return a.GetInstance=function(){return null==a.instance&&(a.instance=new a),a.instance},a.SetLogLevel=function(b){a.GetInstance().logLevel=b},a.EnableAll=function(){a.GetInstance().logLevel=0},a.DisableAll=function(){a.GetInstance().logLevel=5},a.Trace=function(b){var c=a.GetInstance();c.logLevel>0||c.trace()},a.Debug=function(b,c){var d=a.GetInstance();d.logLevel>1||d.dumpObject(b)},a.Info=function(b,c){var d=a.GetInstance();d.logLevel>2||d.info(b)},a.Warn=function(b,c){var d=a.GetInstance();d.logLevel>3||d.warn(b)},a.Error=function(b,c){var d=a.GetInstance();d.logLevel>4||d.error(b)},a.instance=null,a}();a.Logger=b}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a}();a.MessageException=b;var c=function(){function a(a,c){if(this.type=a,this.data=c,void 0===this.data)throw new b}return a.prototype.GetData=function(){return this.data},a.prototype.GetType=function(){return this.type},a}();a.Message=c}(a.Routing||(a.Routing={}));a.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){}(a.Routing||(a.Routing={}));a.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.Utils.Logger,e=(a.Framework.Utils.LogCategory,function(){function b(b){var c=this;this.handlers={},this.ready=!1,this.targetOrigin=b;var e=function(a){d.Info("Got raw message in PushupMessenger:",3),d.Debug(a,3),c.HandleMessage(a)};window.addEventListener?window.addEventListener("message",e,!1):window.attachEvent&&window.attachEvent("onmessage",e),this.uniqueId="Messenger"+Math.floor(1e8*Math.random());var f=function(a,b){if(d.Info("Testing parent cap",0),b.GetData().uniqueId==c.uniqueId){for(var e=b.GetData().capabilities,f=e.length-1;f>=0;f--)c.parentCapabilities[e[f]]="";c.ready=!0}};this.Register("ParentCapabilities",f,this),this.parentCapabilities={MessengerAdded:""},this.SendMessage(new a.Framework.Routing.Message("MessengerAdded",{uniqueId:this.uniqueId}))}return b.prototype.IsReady=function(){return this.ready},b.prototype.SendMessage=function(a){a.GetType()in this.parentCapabilities&&parent.postMessage(JSON.stringify({ident:"PushupEvent",type:a.GetType(),data:a.GetData()}),this.targetOrigin)},b.prototype.Register=function(a,b,d){"undefined"==typeof d&&(d=null),this.handlers.hasOwnProperty(a)||(this.handlers[a]=new c.Event(this)),null==d&&(d={}),this.handlers[a].Attach(b)},b.prototype.HandleMessage=function(b){try{var c=JSON.parse(b.data);if(b.origin!==this.targetOrigin||"object"!=typeof c||"PushupEvent"!==c.ident||"undefined"==typeof c.data||"string"!=typeof c.type)return;if(this.handlers.hasOwnProperty(c.type)){var d=new a.Framework.Routing.Message(c.type,c.data);this.handlers[c.type].Fire(d)}}catch(e){}},b}());b.Messenger=e}(b.Routing||(b.Routing={}));b.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a,b){this.pageName=a,this.pageParams=b}return a.FromString=function(b){for(var c,d=b.split("/"),e={},f=d.shift();void 0!=(c=d.shift());){var g=c.split(":");g.length>1&&(e[g.shift()]=g.join(":"))}return new a(f,e)},a.CompareHistoryItems=function(a,b){if(a.GetPageName()!=b.GetPageName())return!1;var c,d=a.GetPageParams(),e=b.GetPageParams();for(c in d)if(d.hasOwnProperty(c)&&(!e.hasOwnProperty(c)||e[c]!=d[c]))return!1;for(c in b)if(b.hasOwnProperty(c)&&!a.hasOwnProperty(c))return!1;return!0},a.prototype.GetPageName=function(){return this.pageName},a.prototype.GetPageParams=function(){return this.pageParams},a.prototype.ToString=function(){var a,b=this.pageName;for(a in this.pageParams)b+="/"+a+":"+this.pageParams[a];return b},a.prototype.CompareTo=function(b){return a.CompareHistoryItems(this,b)},a}();a.HistoryItem=b}(a.Routing||(a.Routing={}));a.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a.PushState=function(b){a._pastStates.push(b),a._pastStates.length>this._maxPastStates&&a._pastStates.unshift()},a.GetPastStates=function(){return a._pastStates},a._pastStates=[],a._maxPastStates=20,a}();a.History=b}(a.Routing||(a.Routing={}));a.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.Routing.HistoryItem,e=function(){function a(a,b){if("undefined"==typeof b&&(b=!0),this.bound=!1,this.Navigate=new c.Event(this),"undefined"!=typeof a){switch(typeof a){case"string":a=jQuery(a);break;case"undefined":a=jQuery("<div>")}this.rootElement=a,b&&this.ApplyBindings()}}return a.prototype.ApplyBindings=function(){this.bound||(ko.applyBindings(this,this.rootElement[0]),this.bound=!0)},a.prototype.GetElement=function(){return this.rootElement},a.prototype.SetElement=function(a){this.rootElement=a},a.prototype.NavigatePage=function(a,b){this.Navigate.Fire(new d(a,b))},a.prototype.Destroy=function(){},a}();b.ViewModel=e}(b.UI||(b.UI={}));b.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){var c=a.Framework.Events,d=a.Framework.Utils.Logger,e=(a.Framework.Utils.LogCategory,a.Framework.Routing.HistoryItem),f=function(){function a(){this.currentPage=null,this.previousPage=null,this.interceptors=[],this.started=!1,this.numberRegisteredManagers=0,this.numberChangedPageManagers=0,this.changing=!1,this.routerPages={},this.routerPages[a.DefaultState]="DefaultState",this.PageChange=new c.Event(this),this.PageChanged=new c.Event(this),this.WidgetAdded=new c.Event(this),this.WidgetRemoved=new c.Event(this)}return a.prototype.AddWidget=function(){this.WidgetAdded.Fire()},a.prototype.AddInterceptor=function(a,b){for(var c=0;c<this.interceptors.length;c++)if(this.interceptors[c]==a)return;if(b){var d=a;a=function(a){return d.call(b,a)}}this.interceptors.push(a)},a.prototype.ChangePage=function(a){return this.CanChange()?void 0==a||null==a?void d.Info("Router refused to change to null page",2):(d.Info("Router page change request recieved: "+a.GetPageName(),2),d.Info("Router page change parameters:",2),d.Debug(a.GetPageParams(),2),a=this.CheckIntercepts(a),a.GetPageName()in this.routerPages?(d.Info("Router changing to "+a.GetPageName()+" after intercepts",2),d.Info("Router page change parameters:",2),d.Debug(a.GetPageParams(),2),this.numberRegisteredManagers=this.PageChange.NumHandlers(),this.changing=!0,void this.PageChange.Fire(a)):void d.Info("Router refused to change to an invalid page",2)):void d.Info("Router refused to change the page while some other action is active",2)},a.prototype.GoBack=function(){this.ChangePage(this.PreviousPage());
},a.prototype.ManagerChangedPage=function(a){this.numberChangedPageManagers++,this.numberChangedPageManagers==this.numberRegisteredManagers&&(this.previousPage=this.currentPage,this.currentPage=a,this.numberChangedPageManagers=0,this.changing=!1,this.PageChanged.Fire(this.currentPage))},a.prototype.CanChange=function(){return!this.changing},a.prototype.CheckIntercepts=function(a){for(var b=0;10>b;b++){for(var c=a,d=0;d<this.interceptors.length;d++)a=this.interceptors[d](a);if(null==a||a.CompareTo(c))return a}return null},a.prototype.CurrentPage=function(){return this.currentPage},a.prototype.PreviousPage=function(){return this.previousPage},a.prototype.OverridePreviousPage=function(a){this.previousPage=a},a.prototype.RegisterPages=function(a){var b;for(b in a)a.hasOwnProperty(b)&&(this.routerPages[a[b]]=b)},a.prototype.RemoveWidget=function(){this.WidgetRemoved.Fire()},a.prototype.StartRouting=function(b){"undefined"==typeof b&&(b=null),this.started||(null==b&&(b=new e(a.DefaultState,{})),this.ChangePage(b),this.started=!0)},a.DefaultState="default",a}();b.Router=f}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var __extends=this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c},PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Framework.Routing.HistoryItem,e=a.Framework.Events,f=function(a){function b(b,c){"undefined"==typeof c&&(c=!0),this.NetworkName=ko.observable("PushUp Social"),this.OverlayName=ko.observable(b),this.Navigate=new e.Event(this),this.Close=new e.Event(this),a.call(this,jQuery("#pushup-overlay-manager").clone(),!1),c&&this.ApplyBindings()}return __extends(b,a),b.prototype.ApplyBindings=function(){a.prototype.ApplyBindings.call(this),this.SetElement(this.GetElement().children())},b.prototype.CloseOverlay=function(){this.Close.Fire()},b.prototype.NavigatePage=function(a){this.Navigate.Fire(new d(a,{}))},b}(c);b.AbstractOverlayViewModel=f}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this._viewModel=a}return a.prototype.GetViewModel=function(){return this._viewModel},a}();a.Widget=b}(a.UI||(a.UI={}));a.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){return a instanceof Array?ko.observableArray(a):"function"==typeof a?ko.computed(a):ko.observable(a)}return a}();a.Observable=b}(a.UI||(a.UI={}));a.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(b,c,d){a.call(this,b);var e=this;b.GetElement().on(c,d||"",function(a){e.Fire({event:a,element:jQuery(this)})})}return __extends(b,a),b}(a.Framework.Events.Event);b.DOMEvent=c}(b.Events||(b.Events={}));b.Events}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.Widget,d=a.Framework.Events,e=a.Framework.Events.DOMEvent,f=function(a){function b(b,c,f,g,h,i){"undefined"==typeof c&&(c=!1),"undefined"==typeof f&&(f=!0),"undefined"==typeof g&&(g=!0),"undefined"==typeof h&&(h=null),"undefined"==typeof i&&(i=!1),this.autoOpen=c,this.autoRemove=f,this.autoZIndex=g,this.backgroundClass=h,this.Navigate=new d.Event(this),this.Opening=new e(b,"jquery-popup-overlay.onopen"),this.Opened=new e(b,"jquery-popup-overlay.opentransitionend"),this.Closing=new e(b,"jquery-popup-overlay.onclose"),this.Closed=new e(b,"jquery-popup-overlay.closetransitionend"),a.call(this,b),b.Close.Attach(this.Close,this),b.Navigate.Attach(this.NavigatePage,this),this.Initialize()}return __extends(b,a),b.prototype.Initialize=function(){this.GetViewModel().GetElement().popup({autoOpen:this.autoOpen,scrollLock:!0,escape:!1,blur:!1,detach:this.autoRemove,notransitiondetach:this.autoRemove,autozindex:this.autoZIndex,keepfocus:!1,backgroundclass:this.backgroundClass||!1})},b.prototype.Open=function(){this.GetViewModel().GetElement().popup("show")},b.prototype.Close=function(){this.GetViewModel().GetElement().popup("hide")},b.prototype.NavigatePage=function(a,b){this.Navigate.Fire(b)},b}(c);b.AbstractOverlayWidget=f}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,e=function(a){function b(){var b=this;this.SliderClose=new c.Event(this),this.SliderScroll=new c.Event(this),this.SliderPage=ko.observable(""),a.call(this,"ps-slider"),this.GetElement().on("mousewheel",function(a){return b.SliderScroll.Fire(a),!1})}return __extends(b,a),b.prototype.CloseSlider=function(){this.SliderClose.Fire()},b}(d);b.SliderViewModel=e}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,d=function(a){function b(){a.call(this,"ps-loading-overlay")}return __extends(b,a),b}(c);b.LoadingIndicatorViewModel=d}(b.Common||(b.Common={}));b.Common}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Overlays.Common.LoadingIndicatorViewModel,e=function(a){function b(){a.call(this,new d,!1,!1,!0),this.useCount=0,this.disableCount=0,this.isEnabled=!0,this.GetViewModel().GetElement().parent().prev().addClass("pushup-loading-indicator-background")}return __extends(b,a),b.GetInstance=function(){return null==b.instance&&(b.instance=new b),b.instance},b.Enable=function(){var a=b.GetInstance();a.disableCount=a.disableCount>0?a.disableCount-1:0,0==a.disableCount&&(a.isEnabled=!0,a.useCount>0&&a.Open())},b.Disable=function(){var a=b.GetInstance();a.isEnabled=!1,a.disableCount++,a.Close()},b.Show=function(){var a=b.GetInstance();a.useCount++,a.isEnabled&&a.Open()},b.Hide=function(){var a=b.GetInstance();a.useCount=a.useCount>0?a.useCount-1:0,0==a.useCount&&a.Close()},b.instance=null,b}(c);b.LoadingIndicatorOverlayWidget=e}(b.Common||(b.Common={}));b.Common}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Slider.SliderViewModel,e=a.Framework.Routing.HistoryItem,f=a.Framework.Events,g=function(b){function c(){var c=this;this.Navigate=new f.Event(this),this.isOpen=!1,this.isTransitioning=!1,b.call(this,new d,!1,!0,!1),this.GetViewModel().Navigate.Attach(this.NavigatePage,this),this.GetViewModel().SliderClose.Attach(function(){c.Navigate.Fire(new e(a.Client.Router.DefaultState,{}))},this);var g=this.GetViewModel().GetElement();this.background=jQuery("#"+g.attr("id")+"_background"),this.wrapper=jQuery("#"+g.attr("id")+"_wrapper"),this.background.addClass("pushup-slider-background"),this.wrapper.addClass("pushup-slider-wrapper"),g.add(this.background).add(this.wrapper).css("top","100%"),b.prototype.Open.call(this)}return __extends(c,b),c.prototype.ChangePage=function(a){this.GetViewModel().SliderPage("ps-slider-"+a)},c.prototype.NavigatePage=function(a,b){this.Navigate.Fire(b)},c.prototype.BeginOpenTransition=function(a,b){return Modernizr.csstransitions?void setTimeout(function(){a.addClass("pushup-slider-animated-component").on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(a){$(a.target).is(this)&&(b(),$(this).off("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd").removeClass("pushup-slider-animated-component"))}).css("top","0%")},20):void a.animate({top:"0%"},850,function(){"function"==typeof b&&b()})},c.prototype.BeginCloseTransition=function(a,b){return Modernizr.csstransitions?void setTimeout(function(){a.addClass("pushup-slider-animated-component").on("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(a){$(a.target).is(this)&&(b(),$(this).off("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd").removeClass("pushup-slider-animated-component"))}).css("top","100%")},20):void a.animate({top:"100%"},850,function(){"function"==typeof b&&b()})},c.prototype.Open=function(b){var c=this;if(this.isOpen)return void("function"==typeof b&&b());var d=this.GetViewModel().GetElement(),e=!1;this.isTransitioning=!0,a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Disable(),d.popup("show"),this.background.css("opacity","0.8");var f=function(){e!==!0&&(e=!0,c.isOpen=!0,c.isTransitioning=!1,a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Enable(),"function"==typeof b&&b())};this.BeginOpenTransition(d,f),this.BeginOpenTransition(this.wrapper,f),this.BeginOpenTransition(this.background,f)},c.prototype.CloseAndOpen=function(a){var b=this;this.Close(function(){a.onClose&&a.onClose(),b.Open(a.onClose)})},c.prototype.Close=function(b){var c=this;if(!this.isOpen)return void("function"==typeof b&&b(!1));this.isTransitioning=!0,a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Disable();var d=this.GetViewModel().GetElement(),e=!1,f=function(){e!==!0&&(e=!0,c.isOpen=!1,c.isTransitioning=!1,a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Enable(),d.popup("hide"),"function"==typeof b&&b(!0))};this.BeginCloseTransition(d,f),this.BeginCloseTransition(jQuery("#"+d.attr("id")+"_wrapper"),f),this.BeginCloseTransition(jQuery("#"+d.attr("id")+"_background"),f)},c}(c);b.SliderOverlayWidget=g}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this.Name="Error",this.Message="",this.Message=a,this.Target=arguments.callee.caller}return a}();a.Error=b}(a.Core||(a.Core={}));a.Core}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Framework.Core.Error);b.InvalidPathError=c}(b.Errors||(b.Errors={}));b.Errors}(b.Core||(b.Core={}));b.Core}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Framework.Core.Error);b.UninitializedAccessError=c}(b.Errors||(b.Errors={}));b.Errors}(b.Core||(b.Core={}));b.Core}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a.Get=function(b){if(a.localStorageEnabled)try{return JSON.parse(window.localStorage.getItem(b))}catch(c){}return a.fallback[b]},a.Set=function(b,c){if(a.localStorageEnabled)try{window.localStorage.setItem(b,JSON.stringify(c))}catch(d){}a.fallback[b]=c},a.Iterate=function(b){var c;if(a.localStorageEnabled)for(var d=0;d<window.localStorage.length;d++){var e=window.localStorage.key(d);c=b(window.localStorage.getItem(e)),c?window.localStorage.setItem(e,c):window.localStorage.removeItem(e)}c=b(a.fallback),c?a.fallback=c:a.fallback={}},a.NativeEnabled=function(){return a.localStorageEnabled},a.localStorageEnabled=function(){try{var a="test";return window.localStorage.setItem(a,a),window.localStorage.getItem(a),window.localStorage.removeItem(a),!0}catch(b){return!1}}(),a.fallback={},a}();a.Storage=b}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){var c=a.Framework.Core.Errors.InvalidPathError,d=a.Framework.Utils.Storage,e=a.Framework.Events,f=function(){function b(){}return b.GetObservable=function(a,c,d){"undefined"==typeof c&&(c=!1);var e=b.GetData(a,d),f=c?ko.observableArray(e):ko.observable(e);return b.Subscribe(a,function(a,b){f(b)}),f},b.GetData=function(a,c){if(null==a||""==a)throw{};var d=b.SplitPath(a);try{return b.GetPath(d,b.GetSessionData(b.ResolveScope(c)))}catch(e){return null}},b.SetData=function(a,c,d){if(null==a||""==a)throw{};d=b.ResolveScope(d);var e=b.GetSessionData(d),f=b.CreateAndSetPath(b.SplitPath(a),c,e);b.NotifyOfUpdates(a,f),b.StoreSessionData(d,f)},b.SetDefaultScope=function(a){b.defaultScope=a},b.Subscribe=function(a,c){var d;d=b.updateSubscriptions.hasOwnProperty(a)?b.updateSubscriptions[a]:new e.Event(b),d.Attach(c),b.updateSubscriptions[a]=d},b.DeleteAuthTokenGlobally=function(){b.Iterate(function(a){try{var b=JSON.parse(a);return"object"==typeof b&&b.hasOwnProperty("PDC")&&"object"==typeof b.PDC&&b.PDC.hasOwnProperty("API")&&(b.PDC.API={}),JSON.stringify(b)}catch(c){}return a})},b.Purge=function(){b.Iterate(function(a){return!1})},b.Iterate=function(a){d.Iterate(a)},b.GetDefaultScope=function(){if(null==b.defaultScope)throw new a.Framework.Core.Errors.UninitializedAccessError("defaultScope");return b.defaultScope},b.ResolveScope=function(a){var c=a||b.GetDefaultScope();return b.storageKey+"."+c},b.GetSessionData=function(a){return d.Get(a)},b.StoreSessionData=function(a,b){return d.Set(a,b)},b.SplitPath=function(a){return a.split(".")},b.CreateAndSetPath=function(a,d,e){"undefined"==typeof e&&(e={});var f=a.shift();if(a.length>0){if(null==e&&(e={}),e.hasOwnProperty(f)||(e[f]={}),"object"!=typeof e||"object"!=typeof e[f])throw new c(f);e[f]=b.CreateAndSetPath(a,d,e[f])}else e[f]=d;return e},b.NotifyOfUpdates=function(a,c){var d=b.SplitPath(a);d.pop(),b.NotifyParents(d,c),b.NotifyChildren(a,c)},b.NotifyParents=function(a,c){var d=a.join(".");b.SendNotification(d,b.GetPath(a,c)),void 0!=a.pop()&&b.NotifyParents(a,c)},b.NotifyChildren=function(a,c){var d=b.GetPath(b.SplitPath(a),c);if(b.SendNotification(a,d),!("object"!=typeof d||d instanceof Array))for(var e in d){var f=a+"."+e;b.NotifyChildren(f,c)}},b.SendNotification=function(a,c){b.updateSubscriptions.hasOwnProperty(a)&&b.updateSubscriptions[a].Fire(c)},b.GetPath=function(a,d){var e=a.shift();if(!d.hasOwnProperty(e))throw new c(e);return a.length>0?b.GetPath(a,d[e]):d[e]},b.GlobalScope="global",b.defaultScope=null,b.storageKey="pushupSession",b.updateSubscriptions={},b}();b.Session=f}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a.IsUpperCase=function(a){return null!=a.match(/^[A-Z]+$/)},a.MakeInitialLowerCase=function(a){return a.substring(0,1).toLowerCase()+a.substring(1)},a.ToPascalCase=function(b,c){if("undefined"==typeof c&&(c=!0),null==b||""==b)return b;b=b.replace("_"," ");var d=b.split(" ");if(d.length>1||a.IsUpperCase(d[0])){for(var e=0;e<d.length;e++)if(d[e].length>0){var f=d[e],g=f.substring(1);a.IsUpperCase(g)&&(g=g.toLowerCase()),d[e]=f.substring(0,1).toUpperCase()+g}return d.join(c?"":"_")}return d[0].substring(0,1).toUpperCase()+d[0].substring(1)},a.ToCamelCase=function(b){return a.MakeInitialLowerCase(a.ToPascalCase(b,!0))},a.AddUnderscores=function(a){return a.replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/[-\s]/g,"_")},a.AddDashes=function(a){return a.replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(/[\s]/g,"-")},a.AddUnderscorePrefix=function(a){return"_"+a},a.GetNameVariants=function(b){return[b,a.ToCamelCase(b),b.toLowerCase(),a.AddUnderscores(b),a.AddUnderscores(b).toLowerCase(),a.AddDashes(b),a.AddDashes(b).toLowerCase(),a.AddUnderscorePrefix(b),a.AddUnderscorePrefix(a.ToCamelCase(b))]},a}();a.StringExtensions=b}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Utils.StringExtensions,d=function(){function a(){}return a.IsPropertyPrimitive=function(a){return["string","number","boolean"].indexOf(typeof a)>=0},a.IsPropertyArray=function(a){return a instanceof Array},a.IsPropertyModel=function(b){return"object"==typeof b&&null!=b&&b.constructor&&b instanceof a},a.prototype.CreateObservable=function(a,b){return["string","number","boolean"].indexOf(typeof a)?ko.observable(a):void 0},a.prototype.ToObject=function(){return ko.toJS(this)},a.prototype.Serialize=function(){var b=JSON.parse(ko.toJSON(this)),d={};for(var e in b){var f=ko.utils.unwrapObservable(this[e]);this[e]._preventSerialze||(this[e]._dataName||(this[e]._dataName=c.AddUnderscores(e).toLowerCase()),a.IsPropertyPrimitive(f)||a.IsPropertyArray(f)||!a.IsPropertyModel(f)?d[this[e]._dataName]=b[e]:d[this[e]._dataName]=f.Serialize())}return d},a.prototype.Deserialize=function(b,d){if("undefined"==typeof d&&(d=!1),null!=b){var e=this;for(var f in e)if(ko.isObservable(e[f])&&!ko.isComputed(e[f])){var g;g="object"==typeof e[f]?this.UnwrapObject(e[f]):ko.utils.unwrapObservable(e[f]);for(var h=c.GetNameVariants(f),i=0;i<h.length;i++)if(b.hasOwnProperty(h[i])){if(e[f]._dataName=h[i],a.IsPropertyPrimitive(g)){e[f](b[h[i]]);break}if(a.IsPropertyArray(g)){for(var j=g[0],k=[],l=0;l<b[h[i]].length;l++){var m=new j.constructor;m.Update(b[h[i]][l]),k.push(m)}e[f](k);break}if(a.IsPropertyModel(g)){var n=new g.constructor;n.Update(b[h[i]]),e[f](n);break}}}if(d)for(var f in b){var o=c.ToPascalCase(f);e[o]||(e[o]=ko[f instanceof Array?"observableArray":"observable"](b[f]),e[o]._dataName=f)}}},a.prototype.Update=function(a,b){return"undefined"==typeof b&&(b=!1),this.Deserialize(a,b)},a.prototype.UnwrapObject=function(a){var b={};for(var c in a)"object"==typeof c[a]?b[c]=this.UnwrapObject(c[a]):b[c]=ko.utils.unwrapObservable(c[a]);return b},a}();b.Model=d}(b.Data||(b.Data={}));b.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){!function(a){a[a.Success=0]="Success",a[a.ServerError=1]="ServerError",a[a.ClientError=2]="ClientError",a[a.UnknownError=3]="UnknownError"}(a.ProxyStatus||(a.ProxyStatus={}));a.ProxyStatus}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){var b=function(){function a(a,b,c){"undefined"==typeof b&&(b={}),"undefined"==typeof c&&(c=null),this.status=a,this.data=b,this.raw=c}return a.prototype.GetStatus=function(){return this.status},a.prototype.GetData=function(){return this.data},a.prototype.GetRawRequest=function(){return this.raw},a}();a.ProxyResponse=b}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a,b){"undefined"==typeof b&&(b=[]),this.proxy=a,this.data=b}return a.prototype.PerformRequest=function(a,b){var c=this,d=function(){b(c.data)};return null!=this.data?void d():void this.proxy.RawRequest(a,function(a){c.data=a.GetData(),d()})},a}();a.DataSource=b}(a.Data||(a.Data={}));a.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){var b=(Typertext.Http.HttpProtocol,function(){function a(a,b,c,d){"undefined"==typeof b&&(b=1),"undefined"==typeof c&&(c=""),"undefined"==typeof d&&(d=0),this.domain=a,this.protocol=b,this.path=c,this.port=d}return a.prototype.GetDomain=function(){return this.domain},a.prototype.GetProtocol=function(){return this.protocol},a.prototype.GetPath=function(){return this.path},a.prototype.GetPort=function(){return this.port},a}());a.ProxyEndpoint=b}(a.Proxies||(a.Proxies={}));a.Proxies}(a.Data||(a.Data={}));a.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Framework.Core.Error);b.UnauthenticatedAccessError=c}(b.Errors||(b.Errors={}));b.Errors}(b.Core||(b.Core={}));b.Core}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(a.Framework.Core.Error);b.AuthenticationError=c}(b.Errors||(b.Errors={}));b.Errors}(b.Core||(b.Core={}));b.Core}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.Data.Proxies.ProxyResponse,d=(a.Framework.Data.Proxies.ProxyStatus,Typertext.Json.JsonRequest),e=Typertext.Http.HttpUrl,f=a.Framework.Events,g=a.Framework.Core.Errors.UnauthenticatedAccessError,h=function(){function a(a,b,c){this._AccessToken="",this._AccessTokenExpiration=0,this._Endpoint=a,this._AccessToken=b,this._AccessTokenExpiration=c,this.AuthenticationUpdate=new f.Event(this)}return a.prototype.RawResponse=function(a){var b=a.GetHttpStatus();401==b&&this.Authenticated()&&(this._AccessToken=null,this._AccessTokenExpiration=0,this.AuthenticationUpdate.Fire(this));var d;return d=0==a.GetStatus()?0:b>=500&&600>b?1:b>=400&&500>b?2:3,new c(d,a.GetContent(),a)},a.prototype.RawRequest=function(a,b){var f=this,h=function(a){b(f.RawResponse(a))};if("object"!=typeof a&&(a={}),"queryString"in a){if("object"!=typeof a.queryString)throw{}}else a.queryString={};if("undefined"==typeof a.queryString.access_token||a.queryString.access_token!==!1)try{if(!this.Authenticated())throw new g(a);a.queryString.access_token=this.GetAccessToken()}catch(i){if(!a.queryString.supress_access)throw new g(a);delete a.queryString.access_token}else delete a.queryString.access_token;if("postData"in a){if("object"!=typeof a.postData)throw{}}else a.postData={};if("GET"==a.method){var j=a.postData;delete a.postData;for(var k in a.queryString)j[k]=a.queryString[k];a.queryString=j}"path"in a&&"string"==typeof a.path?0!=a.path.indexOf("/")&&(a.path="/"+a.path):a.path="/",a.path.lastIndexOf("/")!=a.path.length-1&&(a.path=a.path+"/");try{var l=new d,m=e.FromUrl(this._Endpoint.ToString()+a.path+Typertext.Http.HttpUrl.EncodeQueryString(a.queryString));switch(a.method){case"DELETE":l.Delete(m,h);break;case"POST":l.Post(m,a.postData,h);break;case"PUT":l.Put(m,a.postData,h);break;case"GET":default:l.Get(m,h)}}catch(i){b(new c(1))}},a.prototype.Authenticate=function(a,b){this._AccessToken=a,this._AccessTokenExpiration=b,this.AuthenticationUpdate.Fire(this)},a.prototype.Authenticated=function(){return""!=this._AccessToken&&this._AccessTokenExpiration>(new Date).getTime()/1e3},a.prototype.Deauthenticate=function(){this._AccessToken="",this._AccessTokenExpiration=0,this.AuthenticationUpdate.Fire(this)},a.prototype.GetAccessToken=function(){if(!this.Authenticated())throw{};return this._AccessToken},a.prototype.GetAccessTokenExpiration=function(){if(!this.Authenticated())throw{};return this._AccessTokenExpiration},a.prototype.GetEndpoint=function(){return this._Endpoint},a}();b.PushUpAPI=h}(b.Proxies||(b.Proxies={}));b.Proxies}(b.Data||(b.Data={}));b.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a}();a.GlobalProxies=b}(a.Data||(a.Data={}));a.Data}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(b){function c(){b.call(this),this.AboutMe=ko.observable(""),this.Birthday=ko.observable(""),this.Work=ko.observable(""),this.StudiedAt=ko.observable(""),this.Speaks=ko.observable(""),this.Name=ko.observable(""),this.City=ko.observable(""),this.Country=ko.observable(""),this.CoverImage=ko.observable(""),this.ProfilePic=ko.observable(""),this.Followers=ko.observable(0),this.Following=ko.observable(0),this.JoinTs=ko.observable(0),this.NumPosts=ko.observable(0),this.UserId=ko.observable(""),this.IsFollowing=ko.observable(!1),this.IsFollower=ko.observable(!1),this.IsUser=ko.observable(!1),this.IsAdmin=ko.observable(!1),this.IsSelf=ko.computed(function(){return this.UserId()===a.Client.Session.GetData("PDC.UserProfile.UserId")},this)}return __extends(c,b),c}(a.Framework.Data.Model);b.UserProfileModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.AccessToken=ko.observable(""),this.ExpiresIn=ko.observable(0),this.RefreshToken=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.SignInModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.Blacklisted=ko.observableArray([])}return __extends(b,a),b}(a.Framework.Data.Model);b.BlacklistModel=c}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.ProfilePic=ko.observable(""),this.CoverImage=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.ImagesModel=c}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.Notifyconnections=ko.observable(""),this.Notifyevents=ko.observable(""),this.Notifytopic=ko.observable(""),this.Notifyposts=ko.observable(""),this.Notifyprofilelikes=ko.observable(""),this.Notifypostlike=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.NotificationsModel=c}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.Privacyphotos=ko.observable(""),this.Privacyvideos=ko.observable(""),this.Privacyevents=ko.observable(""),this.Privacytopics=ko.observable(""),this.Privacybasicinfo=ko.observable(""),this.Privacyaboutme=ko.observable(""),this.Privacycontactinfo=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.PrivacyModel=c}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.Email=ko.observable(""),this.Password=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.SecurityModel=c}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.Settings.BlacklistModel,d=a.Client.Models.Account.Settings.ImagesModel,e=a.Client.Models.Account.Settings.NotificationsModel,f=a.Client.Models.Account.Settings.PrivacyModel,g=a.Client.Models.Account.Settings.SecurityModel,h=function(a){function b(){a.apply(this,arguments),this.Blacklist=ko.observable(new c),this.Images=ko.observable(new d),this.Notifications=ko.observable(new e),this.Privacy=ko.observable(new f),this.Security=ko.observable(new g)}return __extends(b,a),b}(a.Framework.Data.Model);b.FullSettingsModel=h}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.call(this),this.FirstName=ko.observable(""),this.LastName=ko.observable(""),this.Sex=ko.observable(""),this.Birthday=ko.observable(""),this.Elementary=ko.observable(""),this.HighSchool=ko.observable(""),this.College=ko.observable(""),this.Work=ko.observable(""),this.FullName=ko.computed(function(){return this.FirstName()+" "+this.LastName()},this)}return __extends(b,a),b}(a.Framework.Data.Model);b.BasicInfoModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Religion=ko.observable(""),this.InterestedIn=ko.observable(""),this.Languages=ko.observable(""),this.Politics=ko.observable(""),this.Description=ko.observable(""),this.Twitter=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.AboutMeModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.ProfilePic=ko.observable(""),this.CoverImage=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.UserProfileImages=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Email=ko.observable(""),this.Phone=ko.observable(""),this.Address=ko.observable(""),this.City=ko.observable(""),this.State=ko.observable(""),this.Zip=ko.observable(""),this.Country=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.ContactInfoModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.BasicInfoModel,d=a.Client.Models.Account.AboutMeModel,e=a.Client.Models.Account.ContactInfoModel,f=function(a){function b(){a.apply(this,arguments),this.BasicInfo=ko.observable(new c),this.AboutMe=ko.observable(new d),this.ContactInfo=ko.observable(new e),this.IsUser=ko.observable(!1)}return __extends(b,a),b}(a.Framework.Data.Model);b.FullUserProfileModel=f}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.FirstName=ko.observable(""),this.LastName=ko.observable(""),this.Email=ko.observable(""),this.Password=ko.observable(""),this.Birthday=ko.observable(""),this.Sex=ko.observable(""),this.FacebookUserId=ko.observable(""),this.Legal=ko.observable(!1)}return __extends(b,a),b}(a.Framework.Data.Model);b.RegistrationModel=c}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.CommentId=ko.observable(""),this.Date=ko.observable(""),this.HasLiked=ko.observable(!1),this.Message=ko.observable(""),this.Name=ko.observable(""),this.NumLikes=ko.observable(0),this.Ts=ko.observable(0),this.ProfilePic=ko.observable(""),this.UserId=ko.observable(""),this.CanDelete=ko.observable(!1);
}return __extends(b,a),b}(a.Framework.Data.Model);b.CommentModel=c}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.Update=function(b){var c={};try{c=JSON.parse(b)}catch(d){c=b}a.prototype.Update.call(this,c,!0)},b}(a.Framework.Data.Model);b.JsonStringModel=c}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Type=ko.observable("")}return __extends(b,a),b}(a.Client.Models.JsonStringModel);b.EmbedObjectModel=c}(b.Embeds||(b.Embeds={}));b.Embeds}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Success=ko.observable(null)}return __extends(b,a),b}(a.Framework.Data.Model);b.SuccessModel=c}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this.response=a}return a.prototype.GetStatusCode=function(){return this.response.GetRawRequest().GetHttpStatus()},a.prototype.GetCode=function(){try{var a=this.response.GetData().error_code;if("undefined"==typeof a||isNaN(parseInt(a)))throw{};return parseInt(a)}catch(b){return 0}},a.prototype.GetError=function(){try{var a=this.response.GetData().error;if("undefined"==typeof a||""==a)throw{};return a}catch(b){return""}},a.prototype.GetDescription=function(){try{var a=this.response.GetData().error_description;if("undefined"==typeof a||""==a)throw{};return a}catch(b){return""}},a}();a.PushUpAPIServiceError=b}(a.Services||(a.Services={}));a.Services}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Models.SuccessModel,d=a.Client.Models.Activity.Embeds.EmbedObjectModel,e=a.Client.Session,f=function(b){function f(){b.apply(this,arguments);var c=this;this.Comments=ko.observableArray([new a.Client.Models.Activity.CommentModel]),this.GroupedImages=ko.observableArray([]),this.Date=ko.observable(""),this.HasLiked=ko.observable(!1),this.IsStarred=ko.observable(!1),this.IsSticky=ko.observable(!1),this.Message=ko.observable(""),this.Name=ko.observable(""),this.NetworkId=ko.observable(""),this.NumComments=ko.observable(0),this.DisplayedComments=ko.observable(0),this.NumLikes=ko.observable(0),this.PostId=ko.observable(""),this.PageId=ko.observable(""),this.PageName=ko.observable(""),this.PhotoId=ko.observable(""),this.UserId=ko.observable(""),this.ProfilePic=ko.observable(""),this.PostTs=ko.observable(0),this.Ts=ko.observable(0),this.Type=ko.observable(""),this.Thumbnail=ko.observable(""),this.Image=ko.observable(""),this.LargeImage=ko.observable(""),this.MetaData=ko.observable(new d),this.IsAdmin=ko.observable(!1),this.IsUser=ko.observable(!1),this.ShowLoginForm=ko.observable(!1),this.CommunityIntroPost=ko.observable(!1),this.LikeAction=ko.computed(function(){return c.HasLiked()?"Unlike":"Like"})}return __extends(f,b),f.prototype.GetProviderName=function(){var a=this.MetaData(),b=a.Provider?a.Provider():"";return"facebook"===b?"via Facebook":"twitter"===b?"via Twitter":"instagram"===b?"via Instagram":""},f.prototype.Create=function(a,b,c,d,f){var g=new Date,h=g.getTime()/1e3;this.PhotoId(a),this.PostId(a),this.Date(["January","February","March","April","May","June","July","August","September","October","November","December"][g.getMonth()]+" "+g.getDate()),this.Message(b||""),this.Name(e.GetData("PDC.UserProfile.Name")),this.ProfilePic(e.GetData("PDC.UserProfile.ProfilePic")),this.Type(c),this.UserId(e.GetData("PDC.UserProfile.UserId")),this.PageName(this.Name()),this.PageId(this.UserId()),this.IsAdmin(this.UserId()==e.GetData("PDC.UserProfile.UserId")||e.GetData("PDC.UserProfile.IsAdmin")||f),this.IsUser(this.UserId()==e.GetData("PDC.UserProfile.UserId")&&d==e.GetData("PDC.UserProfile.UserId")),this.Comments([]),this.PostTs(h),this.Ts(h)},f.prototype.ToggleSticky=function(b){var d=this,e=!this.IsSticky();a.Client.Services.PushUpAPIService.GetInstance().MakeRequest("PUT","/status/updates",{post_id:this.PostId(),sticky:e},function(a,c){return a?void b(a,d):(d.IsSticky(e),void b(null,d))},c)},f.prototype.Like=function(b){var d=this;"function"!=typeof b&&(b=function(){return null});var e=this.PostId(),f=!this.HasLiked(),g=this.Type(),h="/status/likes",i={post_id:e},j="POST";"feedimage"==g&&(h="/media/likes",i={photo_id:e}),f||(j="DELETE",i={queryString:i}),a.Client.Services.PushUpAPIService.GetInstance().MakeRequest(j,h,i,function(a,c){return a?void b(a,d):(d.HasLiked(f),d.NumLikes(d.NumLikes()+(f?1:-1)),void b(null,d))},c)},f}(a.Framework.Data.Model);b.PostModel=f}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.UserId=ko.observable(""),this.UserName=ko.observable(""),this.PageId=ko.observable(""),this.PageName=ko.observable(""),this.Id=ko.observable(""),this.NetworkId=ko.observable(""),this.ProfilePic=ko.observable(""),this.Operation=ko.observable(""),this.Content=ko.observable(""),this.Ts=ko.observable(0),this.Date=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.RecentActivityModel=c}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.PrimaryColor=ko.observable(""),this.ForegroundColor=ko.observable("")}return __extends(b,a),b}(a.Client.Models.JsonStringModel);b.CommunityCssModel=c}(b.Network||(b.Network={}));b.Network}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Models.Network.CommunityCssModel,d=function(a){function b(){a.apply(this,arguments),this.NetworkId=ko.observable(""),this.Name=ko.observable(""),this.Description=ko.observable(""),this.Thumbnail=ko.observable(""),this.CoverImage=ko.observable(""),this.Members=ko.observable(0),this.Location=ko.observable(""),this.Url=ko.observable(""),this.CommunityMessage=ko.observable(""),this.MobileEnabled=ko.observable(!1),this.Teaser=ko.observable(!0),this.Preview=ko.observable(0),this.Privacy=ko.observable(""),this.WhiteLabelLogo=ko.observable(""),this.Posts=ko.observable(0),this.Ts=ko.observable(0),this.Css=ko.observable(new c)}return __extends(b,a),b}(a.Framework.Data.Model);b.CommunityModel=d}(b.Network||(b.Network={}));b.Network}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Session,d=function(a){function b(){a.apply(this,arguments);var b=this;this.UserId=ko.observable(""),this.Name=ko.observable(""),this.AboutMe=ko.observable(""),this.City=ko.observable(""),this.ProfilePic=ko.observable(""),this.NumPosts=ko.observable(0),this.Followers=ko.observable(0),this.Following=ko.observable(0),this.IsFollowing=ko.observable(!1),this.IsFollower=ko.observable(!1),this.JoinTs=ko.observable(0),this.FollowAction=ko.computed(function(){return b.IsFollower()?"Unfollow":"Follow"}),this.IsSelf=ko.computed(function(){return b.UserId()===c.GetData("PDC.UserProfile.UserId")})}return __extends(b,a),b}(a.Framework.Data.Model);b.MemberModel=d}(b.Network||(b.Network={}));b.Network}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.PhotoId=ko.observable(""),this.Image=ko.observable(""),this.Ts=ko.observable(0)}return __extends(b,a),b}(a.Framework.Data.Model);b.RecentPhotos=c}(b.Media||(b.Media={}));b.Media}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.VideoId=ko.observable(""),this.VideoProvider=ko.observable("")}return __extends(b,a),b}(a.Framework.Data.Model);b.VideoInfo=c}(b.Media||(b.Media={}));b.Media}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Client.Session,d=a.Framework.Events,e=a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget,f=a.Client.Services.PushUpAPIServiceError,g=(a.Framework.Data.Proxies.ProxyStatus,function(){function b(){}return b.GetInstance=function(){return null==b.instance&&(b.instance=new b),b.instance},b.prototype.MergeOptions=function(){for(var a=[],b=0;b<arguments.length-0;b++)a[b]=arguments[b+0];for(var c={},d=0;d<a.length;d++){var e=a[d];for(var f in e)e.hasOwnProperty(f)&&(c[f]=e[f])}return c},b.prototype.extractInfo=function(a){var b={};for(var c in a){var d=a[c];ko.isObservable(d)&&!ko.isComputed(d)&&(b[c.replace(/([A-Z])/g,"_$1").toLocaleLowerCase().substring(1)]=ko.utils.unwrapObservable(d))}return JSON.parse(JSON.stringify(b))},b.prototype.ParseResponse=function(a,b){var c;if(a instanceof Array){c=[];for(var d=0;d<a.length;d++)c[d]=new b,c[d].Update(a[d])}else c=new b,c.Update(a);return c},b.prototype.ParseRawResponse=function(b){var c=null,d=function(a){return b.getResponseHeader(a)};return c=200==b.status?Typertext.Json.JsonResponse.fromHttpResponse(new Typertext.Http.HttpResponse(0,d,b.status,b.responseText)):b.status>=400&&b.status<500?Typertext.Json.JsonResponse.fromHttpResponse(new Typertext.Http.HttpResponse(2,d,b.status,b.responseText)):b.status>=500&&b.status<600?Typertext.Json.JsonResponse.fromHttpResponse(new Typertext.Http.HttpResponse(1,d,b.status,b.responseText)):Typertext.Json.JsonResponse.fromHttpResponse(new Typertext.Http.HttpResponse(4,d,b.status,b.responseText)),a.Framework.Data.GlobalProxies.Pushup.RawResponse(c)},b.prototype.ParseProxyResponse=function(a,b,c){if(0!=a.GetStatus())return c(new f(a),null);var d=a.GetData();return null!=d&&"undefined"!=typeof d.success||null==b?c(null,d):c(null,this.ParseResponse(a.GetData(),b))},b.prototype.MakeRequest=function(b,d,f,g,h){var i,j,k=this;switch(b){case"PUT":case"POST":case"DELETE":i=f.postData||f||{},j=f.queryString||{};break;case"GET":j=f.queryString||f||{},i={}}var l={method:b,path:d,postData:i,queryString:j},m=l.queryString.network_id===!1?!1:l.queryString.network_id||c.GetData("PDC.CommunityID");m===!1?delete l.queryString.network_id:l.queryString.network_id=m,l.queryString=this.MergeOptions({access_token:!0},l.queryString),e.Show();try{a.Framework.Data.GlobalProxies.Pushup.RawRequest(l,function(a){e.Hide(),k.ParseProxyResponse(a,h,g)})}catch(n){e.Hide()}},b.prototype.Authenticate=function(d,f,g){if("undefined"==typeof g&&(g=null),!d.AccessToken())throw new Error("Invalid authentication parameters.");a.Framework.Data.GlobalProxies.Pushup.Authenticate(d.AccessToken(),(new Date).getTime()/1e3+d.ExpiresIn()),e.Disable(),b.GetProfileInformation(null,function(a,d){return e.Enable(),a?void f(a,d):(c.SetData("PDC.UserProfile",d.ToObject()),f(a,d),void b.LoggedIn.Fire(g||""))})},b.TokenAuthenticate=function(c,d,e){var f=b.GetInstance(),g=f.ParseResponse({access_token:c,expires_in:d,refresh_token:null},a.Client.Models.Account.SignInModel);return f.Authenticate(g,e)},b.AssociateFacebookAccount=function(c,d,e){var f=b.GetInstance();f.MakeRequest("PUT","/account/user",{postData:{auth_facebook:c,facebook_token:d}},e,a.Client.Models.SuccessModel)},b.LoginWithFacebook=function(c,d,e,f){var g=b.GetInstance();g.MakeRequest("POST","/account/signin",{postData:{auth_facebook:c,facebook_token:d},queryString:{access_token:!1}},function(a,b){return a?f(a,null):g.Authenticate(b,f,e)},a.Client.Models.Account.SignInModel)},b.Login=function(c,d,e,f){"undefined"==typeof f&&(f=null);var g=b.GetInstance();g.MakeRequest("POST","/account/signin",{queryString:{access_token:!1},postData:{username:c,password:d,expires:2592e3}},function(a,b){return a?e(a,null):g.Authenticate(b,e,f)},a.Client.Models.Account.SignInModel)},b.FacebookLogin=function(c,d,e,f,g){"undefined"==typeof g&&(g=null);var h=b.GetInstance();h.MakeRequest("POST","/account/signin",{queryString:{access_token:!1},postData:{email:c,password:d,facebook_token:e,expires:2592e3}},function(a,b){return a?f(a,null):h.Authenticate(b,f,g)},a.Client.Models.Account.SignInModel)},b.GetCommunity=function(c,d){var e=b.GetInstance();e.MakeRequest("GET","/network/communities",{network_id:c,access_token:!1},d,a.Client.Models.Network.CommunityModel)},b.ScrapeLink=function(c,d){var e=b.GetInstance();e.MakeRequest("GET","/scrapper",{url:c,access_token:!1},d,a.Client.Models.Media.VideoInfo)},b.JoinCommunity=function(c,d,e){b.GetInstance().MakeRequest("POST","network/members",{queryString:{access_token:!1},postData:{email:c,password:d}},e,a.Client.Models.SuccessModel)},b.ConfirmAccount=function(c,d,e){var f=b.GetInstance();f.MakeRequest("POST","account/confirm",{queryString:{access_token:!1},postData:{user_id:c,code:d}},function(a,b){return a?e(a,null):e(null,b)},a.Client.Models.Account.SignInModel)},b.Register=function(c,d){var e=b.GetInstance(),f={firstname:c.FirstName(),lastname:c.LastName(),email:c.Email(),password:c.Password(),sex:c.Sex(),birthday:moment(c.Birthday()).format("YYYY-MM-DD")};""!=c.FacebookUserId()&&(f.auth_facebook=c.FacebookUserId()),e.MakeRequest("POST","/account/user",{queryString:{access_token:!1},postData:f},d,a.Client.Models.SuccessModel)},b.RegisterWithFacebook=function(c,d){var e=b.GetInstance();e.MakeRequest("POST","/account/user",{queryString:{access_token:!1},postData:{facebook_token:c}},d,a.Client.Models.SuccessModel)},b.GetSocialFeed=function(c,d){var e={limit:15,"comments.limit":3};c>0&&(e.ts=c),b.GetInstance().MakeRequest("GET","/activity/social_feed",{access_token:a.Framework.Data.GlobalProxies.Pushup.Authenticated(),fields:JSON.stringify(e)},d,a.Client.Models.Activity.PostModel)},b.GetStickyPosts=function(c){b.GetInstance().MakeRequest("GET","/activity/sticky",{access_token:a.Framework.Data.GlobalProxies.Pushup.Authenticated(),fields:JSON.stringify({limit:5,"comments.limit":3})},c,a.Client.Models.Activity.PostModel)},b.GetRecentPhotos=function(c,d,e){b.GetInstance().MakeRequest("GET","/media/photos",{user_id:c,fields:JSON.stringify({limit:18,ts:d})},e,a.Client.Models.Media.RecentPhotos)},b.GetWall=function(c,d,e){var f={};null!=c&&(f.user_id=c);var g={limit:12,"comments.limit":3};d>0&&(g.ts=d),f.fields=JSON.stringify(g),b.GetInstance().MakeRequest("GET","/activity/wall",f,e,a.Client.Models.Activity.PostModel)},b.GetUserActivity=function(c,d){var e={fields:'{"display.links": true}'};null!=c&&(e.user_id=c),b.GetInstance().MakeRequest("GET","/activity/recent",e,d,a.Client.Models.Activity.RecentActivityModel)},b.GetProfileInformation=function(c,d){var e={},f={};(null==c||a.Client.Session.GetData("PDC.UserProfile.UserId")==c)&&(f["display.is_admin"]=!0),null!=c&&(e.user_id=c),f!={}&&(e.fields=JSON.stringify(f)),b.GetInstance().MakeRequest("GET","/account/profile",e,d,a.Client.Models.Account.UserProfileModel)},b.SaveFullProfileInformation=function(c,d,e){function f(a){var b={};for(var c in a){var d=a[c];ko.isObservable(d)&&!ko.isComputed(d)&&(b[c.replace(/([A-Z])/g,"_$1").toLocaleLowerCase().substring(1)]=ko.utils.unwrapObservable(d))}return JSON.parse(JSON.stringify(b))}var g=b.GetInstance(),h=g.MergeOptions(f(d.BasicInfo()),f(d.ContactInfo()),f(d.AboutMe()));h.birthday=moment(h.birthday,"MM-DD-YYYY").format("YYYY-MM-DD"),g.MakeRequest("PUT","/account/profile",{queryString:{user_id:c},postData:h},e,a.Client.Models.SuccessModel)},b.GetFullProfileInformation=function(c,d){var e={};null!=c&&(e.user_id=c),b.GetInstance().MakeRequest("GET","/account/full_profile",e,d,a.Client.Models.Account.FullUserProfileModel)},b.GetFullAccountSettings=function(c){b.GetInstance().MakeRequest("GET","/account/full_settings",{},c,a.Client.Models.Account.FullSettingsModel)},b.SaveFullAccountSettings=function(c,d){var e=b.GetInstance(),f=e.MergeOptions(e.extractInfo(c.Privacy),e.extractInfo(c.Blacklist),e.extractInfo(c.Notifications));b.GetInstance().MakeRequest("PUT","/account/full_settings",{queryString:{},postData:f},d,a.Client.Models.Account.FullSettingsModel)},b.GetAccountSettings=function(a){b.GetInstance().MakeRequest("GET","/account/settings",{queryString:{},postData:{}},a,null)},b.SaveAccountSettings=function(a,c){b.GetInstance().MakeRequest("PUT","/account/settings",{queryString:{},postData:a},c,null)},b.RequestPasswordReset=function(c,d){b.GetInstance().MakeRequest("POST","/account/request_password",{queryString:{access_token:!1},postData:{email:c}},d,a.Client.Models.SuccessModel)},b.ResetPassword=function(c,d,e,f){b.GetInstance().MakeRequest("POST","/account/password",{queryString:{access_token:!1},postData:{email:c,password:d,code:e}},f,a.Client.Models.SuccessModel)},b.GetMemberNetworks=function(c){b.GetInstance().MakeRequest("GET","/account/networks",{},c,a.Client.Models.Network.CommunityModel)},b.GetNetworkMembers=function(d){b.GetInstance().MakeRequest("GET","/network/members",{access_token:a.Framework.Data.GlobalProxies.Pushup.Authenticated(),network_id:c.GetData("PDC.CommunityID"),fields:'{"limit":"'+(null==c.GetData("PDC.API.AccessToken")?"3":"all")+'"}'},d,a.Client.Models.Account.UserProfileModel)},b.LikeComment=function(c,d,e,f,g){var h,i,j;i={comment_id:f},"feedimage"==c?(h="/media/like_comments",i.photo_id=e):(h="/status/like_comments",i.post_id=e),d?j="POST":(j="DELETE",i={queryString:i}),b.GetInstance().MakeRequest(j,h,i,g,a.Client.Models.SuccessModel)},b.CommentPost=function(c,d,e,f){var g,h;"feedimage"==c?(g="/media/comments",h={photo_id:e}):(g="/status/comments",h={post_id:e}),h.message=d,b.GetInstance().MakeRequest("POST",g,h,f,a.Client.Models.SuccessModel)},b.DeleteComment=function(c,d,e,f){var g,h={postData:{},queryString:{comment_id:e}};"feedimage"==c?(g="/media/comments",h.queryString.photo_id=d):(g="/status/comments",h.queryString.post_id=d),b.GetInstance().MakeRequest("DELETE",g,h,f,a.Client.Models.SuccessModel)},b.PostMessage=function(c,d,e){""!=c&&null!=c&&b.GetInstance().MakeRequest("POST","/status/updates",{message:c,user_id:d},e,a.Client.Models.SuccessModel)},b.PostVideo=function(c,d,e,f,g,h){""!=c&&null!=c&&b.GetInstance().MakeRequest("POST","/status/embed",{message:c,user_id:g,meta_data:JSON.stringify({provider:d,id:e,src_url:f,type:"video"})},h,a.Client.Models.SuccessModel)},b.PostImage=function(c,d,f){var g=function(a,c){e.Hide();var d=b.GetInstance();d.ParseProxyResponse(d.ParseRawResponse(c.jqXHR),null,f)},h=[{name:"network_id",value:a.Client.Session.GetData("PDC.CommunityID")}];null!=d&&""!=d&&"undefined"!=typeof d&&h.push({name:"description",value:d}),jQuery("<form>").fileupload({url:a.Framework.Data.GlobalProxies.Pushup.GetEndpoint().ToString()+"/media/photos/?output=text&access_token="+a.Client.Session.GetData("PDC.API.AccessToken"),autoUpload:!1,dataType:"text",formData:h,send:function(){return e.Show()},fail:g,done:g}).fileupload("send",{fileInput:c})},b.UploadCoverImage=function(c,d){var f=function(a,c){e.Hide();var f=b.GetInstance();f.ParseProxyResponse(f.ParseRawResponse(c.jqXHR),null,d);var g=$(a.target);g.replaceWith(g=g.clone(!0))},g={url:a.Framework.Data.GlobalProxies.Pushup.GetEndpoint().ToString()+"/account/cover_image?output=text&access_token="+a.Client.Session.GetData("PDC.API.AccessToken"),dataType:"text",formData:[{name:"network_id",value:a.Client.Session.GetData("PDC.CommunityID")}],send:function(){return e.Show()},fail:f,done:f};c.fileupload(g)},b.UploadProfilePicture=function(c,d,f){var g=function(a,c){e.Hide();var d=b.GetInstance();d.ParseProxyResponse(d.ParseRawResponse(c.jqXHR),null,f);var g=$(a.target);g.replaceWith(g=g.clone(!0))},h={url:a.Framework.Data.GlobalProxies.Pushup.GetEndpoint().ToString()+"/account/profile_pic/?output=text&access_token="+a.Client.Session.GetData("PDC.API.AccessToken"),dataType:"text",formData:[{name:"network_id",value:a.Client.Session.GetData("PDC.CommunityID")}],send:function(){return e.Show()},fail:g,done:g};h.disableImageResize=/Android(?!.*Chrome)|Opera/.test(window.navigator&&navigator.userAgent),h.imageMaxWidth=400,h.imageMaxHeight=400,h.imageCrop=!0,c.fileupload(h)},b.FollowUser=function(c,d){b.GetInstance().MakeRequest("POST","/account/follow",{user_id:c},d,a.Client.Models.SuccessModel)},b.UnfollowUser=function(c,d){b.GetInstance().MakeRequest("DELETE","/account/follow",{postData:{},queryString:{user_id:c}},d,a.Client.Models.SuccessModel)},b.DeletePost=function(c,d){b.GetInstance().MakeRequest("DELETE","/status/updates",{postData:{},queryString:{post_id:c}},d,a.Client.Models.SuccessModel)},b.StarPost=function(c,d,e){b.GetInstance().MakeRequest("PUT","/status/updates",{post_id:d,star:c},e,a.Client.Models.SuccessModel)},b.GetPost=function(c,d,e){b.GetInstance().MakeRequest("GET","activity/details",{post_id:c,fields:'{"comments.limit": '+d+"}",supress_access:!0},e,a.Client.Models.Activity.PostModel)},b.DeleteCoverImage=function(c){b.GetInstance().MakeRequest("DELETE","account/cover_image",{},c,a.Client.Models.SuccessModel)},b.DeleteProfilePic=function(c){b.GetInstance().MakeRequest("DELETE","account/profile_pic",{},c,a.Client.Models.SuccessModel)},b.GetLikes=function(c,d,e){var f,g;"feedimage"==c?(f="/media/likes",g={photo_id:d}):(f="/status/likes",g={post_id:d}),b.GetInstance().MakeRequest("GET",f,g,e,a.Client.Models.Network.MemberModel)},b.instance=null,b.LoggedIn=new d.Event(b),b.LoggedOut=new d.Event(b),b}());b.PushUpAPIService=g}(b.Services||(b.Services={}));b.Services}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Events,d=function(){function a(a,b){var d=this;"undefined"==typeof b&&(b=0),this.element=a,this.padding=b,this.ScrollLimitReached=new c.Event(this),this.element.onscroll=function(a){d.OnElementScroll(a)},this.Enable()}return a.prototype.OnElementScroll=function(a){var b,c,d;b=this.element.scrollHeight,c=this.element.scrollTop,d=this.element.clientHeight,b-(c+d)<this.padding&&this.isEnabled===!0&&this.ScrollLimitReached.Fire()},a.prototype.Enable=function(){this.isEnabled=!0,this.OnElementScroll(null)},a.prototype.Disable=function(){this.isEnabled=!1},a.prototype.Destroy=function(){this.element.onscroll=null},a}();b.ScrollWatcher=d}(b.UI||(b.UI={}));b.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,d=a.Framework.Events,e=function(a){function b(){a.call(this,"ps-delete-confirm-overlay"),this.Confirmed=new d.Event(this)}return __extends(b,a),b.prototype.Confirm=function(){this.Confirmed.Fire()},b}(c);b.DeleteObjectViewModel=e}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Overlays.Registered.DeleteObjectViewModel,e=function(a){function b(b){a.call(this,new d),this.GetViewModel().Confirmed.Attach(this.Confirmed,this),this.callback=b,this.Open()}return __extends(b,a),b.prototype.Confirmed=function(){this.callback(),this.Close()},b}(c);b.DeleteConfirmOverlayWidget=e}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.Routing.HistoryItem,e=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,f=a.Client.Session,g=a.Client.Models.Network.MemberModel,h=a.Client.Services.PushUpAPIService,i=function(b){function e(d){var e=this;this.Post=d,this.OverlayHeight=ko.observable(0),this.OverlayWidth=ko.observable(1176),this.DisplayImage=ko.observable(""),this.Members=ko.observableArray([]),this.Post.IsAdmin(this.Post.UserId()==f.GetData("PDC.UserProfile.UserId")),this.Post.IsUser(this.Post.UserId()==f.GetData("PDC.UserProfile.UserId")),this.OverlayClose=new c.Event(this),b.call(this,"pushup-like-list-overlay"),a.Client.Services.PushUpAPIService.GetLikes(this.Post.Type(),this.Post.PostId(),function(a,b){e.UpdateMembers(e,b)})}return __extends(e,b),e.prototype.OpenOverlay=function(){jQuery("#"+this.GetElement().attr("id")+"_background").addClass("pushup-feed-object-overlay-background")},e.prototype.CloseOverlay=function(){this.OverlayClose.Fire()},e.prototype.Destroy=function(){b.prototype.Destroy.call(this)},e.prototype.UpdateMembers=function(a,b){this.Members.removeAll(),null!=b&&(ko.utils.arrayPushAll(this.Members(),b),this.Members.valueHasMutated())},e.prototype.GoToProfile=function(a){this.Navigate.Fire(new d("profile",{userId:a}))},e.prototype.LikePost=function(){var a=this,b=!this.Post.HasLiked();this.Post.Like(function(c,d){if(!c){var e=f.GetData("PDC.UserProfile"),h=e.UserId,i=a.Members();if(b){var j=new g;j.Name(e.Name),j.ProfilePic(e.ProfilePic),j.UserId(h),i.push(j)}else for(var k=i.length;k-->0;)if(i[k].UserId()===h){i.splice(k,1);break}a.Members.valueHasMutated()}})},e.prototype.FollowUser=function(a){var b=function(b,c){b||a.IsFollower(!a.IsFollower())},c=a.IsFollower();c?h.UnfollowUser(a.UserId(),b):h.FollowUser(a.UserId(),b)},e}(e);b.LikeListViewModel=i}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Overlays.Registered.LikeListViewModel,e=a.Framework.Events,f=function(a){function b(b){var c=this;this.Navigate=new e.Event(this),this.LayoutUpdated=new e.Event(this),a.call(this,new d(b)),this.GetViewModel().Navigate.Attach(this.NavigatePage,this),this.GetViewModel().OverlayClose.Attach(this.OverlayClose,this),this.GetViewModel().OverlayClose.Attach(function(){return c.LayoutUpdated.Fire()},this),this.Open()}return __extends(b,a),b.prototype.NavigatePage=function(a,b){this.Close(),this.Navigate.Fire(b)},b.prototype.OverlayClose=function(a){this.Close()},b}(c);b.LikeListOverlayWidget=f}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,d=function(a){function b(b,c){this.Title=ko.observable(b||""),this.Content=ko.observable(c||""),a.call(this,"ps-alert-overlay")}return __extends(b,a),b}(c);b.AlertViewModel=d}(b.Common||(b.Common={}));b.Common}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Overlays.Common.AlertViewModel,e=function(a){function b(b,c){a.call(this,new d(b,c),!1,!0,!0,"pushup-alert-overlay-background")}return __extends(b,a),b.Show=function(a,c){new b(a,c).Open()},b}(c);b.AlertOverlayWidget=e}(b.Common||(b.Common={}));b.Common}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this.rootElement=a||document.createElement("div")}return a.prototype.GetElement=function(){return this.rootElement},a}();a.Helper=b}(a.UI||(a.UI={}));a.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.UI.Helper,d=a.Client.Session,e=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.Facebook=function(a,b,c){"undefined"==typeof c&&(c=null);var e=this.GetPostName(b),f=this.GetCommunityDescription(),g=this.GetPostImage(b),h=d.GetData("PDC.CommunityInfo").Url,i={method:"feed",display:"popup",link:h+"#ps-post/post:"+b.PostId(),picture:g,name:e,description:f,caption:"Join our Community! Click the link above."};c&&(i.from=c),window.FB.ui(i,function(a){})},b.prototype.Twitter=function(a,b){window.open("https://twitter.com/share?text="+encodeURIComponent(null==b.Message()?"":b.Message())+"&url="+encodeURIComponent(d.GetData("PDC.ParentOrigin")+"/#ps-post/post:"+b.PostId()),"","width=600,height=400")},b.prototype.Google=function(a,b){window.open("https://plus.google.com/share?url="+encodeURIComponent(d.GetData("PDC.ParentOrigin")+"/#ps-post/post:"+b.PostId()),"","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600")},b.prototype.GetPostName=function(a){var b=d.GetData("PDC.CommunityInfo"),c="status"===a.MetaData().Type()||"photo"===a.MetaData().Type();return c?a.MetaData().Message():""!==a.Message()?a.Message():b.Name},b.prototype.GetCommunityDescription=function(){var a=d.GetData("PDC.CommunityInfo");return""!=a.Description?a.Name+" - "+a.Description:a.Name},b.prototype.GetPostImage=function(a){return a.Image()?a.Image():"photo"===a.MetaData().Type()?a.MetaData().SrcUrl():"feedembed"==a.Type()?"http://img.youtube.com/vi/"+a.MetaData().Id()+"/hqdefault.jpg":"https://8988ae2adffa1e70c1be-11fb47457486c774da6409c1700eb468.ssl.cf2.rackcdn.com/squarelogo.jpg"},b}(c);b.SocialShareHelper=e}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.ShowTimeago=function(a,b){var c=jQuery(a);c.attr("title",moment(new Date(1e3*parseInt(b))).toISOString()),c.timeago()},b}(a.Framework.UI.Helper);b.TimeHelper=c}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.UI.ViewModel,e=a.Client.Models.Activity.CommentModel,f=a.Client.Services.PushUpAPIService,g=a.Client.Session,h=a.Client.Helpers.SocialShareHelper,i=a.Client.Helpers.TimeHelper,j=function(a,b){this.category=ko.observable(a.category),this.name=ko.observable(a.name),this.access_token=ko.observable(a.access_token),this.perms=ko.observableArray(a.perms),this.id=ko.observable(a.id),this.post=b;var c=new h;this.ShareToFacebookGroup=function(a){c.Facebook(null,a,this.id())}},k=function(b){function d(d,e,f,g){var j=this;this.Navigate=new c.Event(this),this.LayoutUpdated=new c.Event(this),this.PostAdded=new c.Event(this),this.PostRemvoed=new c.Event(this),this.ElementsAdded=new c.Event(this),this.ElementsPrepended=new c.Event(this),this.ElementsInserted=new c.Event(this),this.ElementsRemoved=new c.Event(this),this.PostStickied=new c.Event(this),this.PostUnsticked=new c.Event(this),this.Posts=ko.observableArray([]),this.StickyPosts=ko.observableArray([]),this.UserId=ko.observable(d),this.IsAdmin=ko.observable(e),this.DisplayLinks=ko.observable(g),this.Authenticated=ko.observable(a.Framework.Data.GlobalProxies.Pushup.Authenticated()),this.SocialShare=new h,this.TimeHelper=new i,this.PageListState=ko.observable(""),this.PageList=ko.observableArray([]),
this.uniqueFeedIds={},this.LastTimestamp=0,this.groupingEnabled=!1,jQuery("body").on("click",function(a){var b=$(a.target);b.hasClass("pushup-post-settings-actions")||b.parents(".pushup-post-settings-actions").length>0||j.HideHeaderContext()}),b.call(this)}return __extends(d,b),d.prototype.CloseAllLogins=function(){for(var a=0;a<this.Posts().length;a++)this.Posts()[a].ShowLoginForm(!1)},d.prototype.AddPostModel=function(a){this.Posts()[0];this.RegisterPost(a),this.Posts.unshift(a),this.ElementsPrepended.Fire(Array.prototype.slice.call(this.GetElement()[0].children,0,1)),this.PostAdded.Fire(a)},d.prototype.HideHeaderContext=function(){jQuery(".pushup-post-settings-actions.opened").stop().animate({"max-height":"15px"},function(){jQuery(this).css("display","none").removeClass("opened")}),this.headerContextVisible=!1},d.prototype.ShowHeaderContext=function(a,b){jQuery(b.currentTarget).next().css("display","block").stop().focus().animate({"max-height":"800px"},function(){jQuery(this).addClass("opened")}),this.headerContextVisible=!0},d.prototype.ToggleHeaderContext=function(a,b){jQuery(b.currentTarget).next().hasClass("opened")?this.HideHeaderContext():this.ShowHeaderContext(a,b)},d.prototype.ResetHidePostActionsTimeout=function(a){var b=this;clearTimeout(this.hidePostActionsTimeout),this.hidePostActionsTimeout=setTimeout(function(){return a.find(":hover").length>0?void b.ResetHidePostActionsTimeout(a):void b.HidePostActions(a)},500)},d.prototype.HidePostActions=function(a){a.find(".pushup-post-share-actions").stop().animate({width:"0%"},function(){jQuery(this).css("display","none")})},d.prototype.ShowPostActions=function(a,b){var c=this,d=jQuery(b.currentTarget).next();d.stop().css("display","block").animate({width:"100%"},function(){return c.ResetHidePostActionsTimeout(d.parent())})},d.prototype.StarPost=function(b){var c=this;this.HideHeaderContext();var d=b.PostId(),e=!b.IsStarred();a.Client.Services.PushUpAPIService.StarPost(e,d,function(a,b){if(!a)for(var f=c.Posts(),g=0;g<f.length;g++)if(f[g].PostId()==d){f[g].IsStarred(e),c.LayoutUpdated.Fire();break}})},d.prototype.ShareToFacebook=function(a){var b=this;this.ObtainLoginStatus(function(){b.ObtainPages(function(a){b.PageList([]);for(var c=0;c<a.data.length;c++)b.PageList.push(new j(a.data[c],b));b.PageListState("loaded")})})},d.prototype.ObtainPages=function(a){FB.api("/me/accounts",function(b){a(b)})},d.prototype.ObtainLoginStatus=function(a){FB.login(function(){a()},{scope:"manage_pages"})},d.prototype.StickyPost=function(a){var b=this;this.HideHeaderContext(),a.ToggleSticky(function(a,c){a||(c.IsSticky()?b.PostStickied.Fire(c):b.PostUnsticked.Fire(c))})},d.prototype.DeleteComment=function(b,c){var d=this;new a.Client.Widgets.Overlays.Registered.DeleteConfirmOverlayWidget(function(){f.DeleteComment(b.Type(),"feedobject"==b.Type()?b.PostId():b.PhotoId(),c.CommentId(),function(a,e){for(var f=b.Comments(),g=0;g<f.length;g++)if(f[g].CommentId()==c.CommentId()){b.Comments().splice(g,1),b.Comments.valueHasMutated(),b.NumComments(b.NumComments()-1),d.LayoutUpdated.Fire();break}})})},d.prototype.FacebookShare=function(a){var b={method:"feed",display:"popup",link:g.GetData("PDC.ParentOrigin")+"/#ps-post/post:"+a.PostId(),caption:"Join our Community! Click the link above. ",picture:"https://8988ae2adffa1e70c1be-11fb47457486c774da6409c1700eb468.ssl.cf2.rackcdn.com/squarelogo.jpg",description:""!=a.Message()||null!=a.Message()?a.Message():""};""!=a.Image()&&(b.picture=a.Image()),FB.ui(b,function(a){}),this.HideHeaderContext()},d.prototype.TwitterShare=function(b){window.open("https://twitter.com/share?text="+encodeURIComponent(b.Image()+" "+(null==b.Message()?"":b.Message()))+"&url="+encodeURIComponent(a.Client.Session.GetData("PDC.ParentOrigin")+"/#ps-post/post:"+b.PostId()),"","width=600,height=400")},d.prototype.ReportPost=function(a){this.HideHeaderContext()},d.prototype.DeletePost=function(b){var c=this;this.HideHeaderContext(),new a.Client.Widgets.Overlays.Registered.DeleteConfirmOverlayWidget(function(){var d=b.PostId();c.Posts();a.Client.Services.PushUpAPIService.DeletePost(d,function(a,b){1==b.success&&c.RemovePost(d)})})},d.prototype.RegisterPost=function(a){this.uniqueFeedIds[a.PostId()]=a},d.prototype.RemovePost=function(a,b){"undefined"==typeof b&&(b=!1);var c=this.Posts(),d=this.uniqueFeedIds[a];if("undefined"!=typeof d){for(var e=0;e<c.length;e++)if(c[e].PostId()==a){c.splice(e,1);var f=this.GetElement()[0].children;this.ElementsRemoved.Fire(Array.prototype.slice.call(f,e,e+1)),b||(this.Posts.valueHasMutated(),this.LayoutUpdated.Fire()),this.PostRemvoed.Fire(d);break}delete this.uniqueFeedIds[a]}},d.prototype.UpdateCommentTextAreas=function(a,b){var c=jQuery(b.currentTarget);c.parent().addClass("focused"),this.LayoutUpdated.Fire()},d.prototype.RemoveCommentTextAreas=function(a,b){var c=jQuery(b.currentTarget);setTimeout(function(){c.parent().removeClass("focused")},500),this.LayoutUpdated.Fire()},d.prototype.UpdatePosts=function(a){if(a&&0!=a.length){for(var b=[],c=0;c<a.length;c++){var d=a[c].PostId(),e=a[c];if(this.LastTimestamp=a[c].Ts(),"undefined"==typeof this.uniqueFeedIds[d]){a[c].IsAdmin(a[c].UserId()==g.GetData("PDC.UserProfile.UserId")||g.GetData("PDC.UserProfile.IsAdmin")||this.IsAdmin()),a[c].IsUser(a[c].UserId()==g.GetData("PDC.UserProfile.UserId")&&this.UserId()==g.GetData("PDC.UserProfile.UserId")),a[c].Comments.reverse(),a[c].DisplayedComments(a[c].Comments().length>3?3:a[c].Comments().length);for(var f=0;f<a[c].Comments().length;f++)a[c].Comments()[f].CanDelete(a[c].IsAdmin()||a[c].Comments()[f].UserId()==g.GetData("PDC.UserProfile.UserId"));this.RegisterPost(e),b.push(e)}}ko.utils.arrayPushAll(this.Posts(),b),this.Posts.valueHasMutated();var h=this.GetElement().children().toArray();this.ElementsAdded.Fire(Array.prototype.slice.call(h,h.length-b.length))}},d.prototype.LikeComment=function(b,c){var d=!c.HasLiked(),e=b.PostId();a.Client.Services.PushUpAPIService.LikeComment(b.Type(),d,e,c.CommentId(),function(a,e){if(1==e.success)for(var f=b.Comments(),g=0;g<f.length;g++)if(f[g].CommentId()==c.CommentId()){f[g].HasLiked(d),f[g].NumLikes(f[g].NumLikes()+(d?1:-1));break}})},d.prototype.ShowAllComments=function(b){var c=this;if(b.NumComments()==b.Comments().length)return b.DisplayedComments(b.NumComments()),void this.LayoutUpdated.Fire();a.Client.Services.PushUpAPIService.GetPost(b.PostId(),0,function(a,d){var e=b.Comments();e.splice(0,e.length);for(var f=0;f<d.Comments().length;f++)d.Comments()[f].CanDelete(b.IsAdmin()||d.Comments()[f].UserId()==g.GetData("PDC.UserProfile.UserId"));d.Comments.reverse(),ko.utils.arrayPushAll(e,d.Comments()),b.Comments.valueHasMutated(),b.DisplayedComments(b.NumComments()),c.LayoutUpdated.Fire()})},d.prototype.ToggleComments=function(a){a.DisplayedComments()==a.NumComments()?this.HideComments(a):this.ShowAllComments(a)},d.prototype.HideComments=function(a){var b=3;a.NumComments()<3&&(b=a.NumComments()),a.DisplayedComments(b),this.LayoutUpdated.Fire()},d.prototype.CommentKeyUp=function(a,b){13==b.keyCode&&this.SubmitCommentToApi(a,jQuery(b.target))},d.prototype.AddCommentClicked=function(a,b){this.SubmitCommentToApi(a,jQuery(b.target).parents().eq(4).find("textarea"))},d.prototype.SubmitCommentToApi=function(a,b){var c=b.val();b.blur(),this.AddComment(a,c,function(a){a||b.val("")})},d.prototype.OpenOverlay=function(){},d.prototype.NavigateToUser=function(a){this.NavigatePage("profile",{userId:a})},d.prototype.Destroy=function(){jQuery("body").off("click","*",this.HideHeaderContext),b.prototype.Destroy.call(this),jQuery("abbr.timeago").timeago("dispose")},d.prototype.OpenLikeList=function(b){var c=this,d=new a.Client.Widgets.Overlays.Registered.LikeListOverlayWidget(b);d.Navigate.Attach(function(a,b){c.Navigate.Fire(b)})},d.prototype.AddComment=function(b,c,d){var f=this,h=c.indexOf("\n");if(c.length>0&&h==c.length-1&&(c=c.substr(0,c.length-1)),""==c)return a.Client.Widgets.Overlays.Common.AlertOverlayWidget.Show("Application Warning","You must enter a valid comment."),void d(Error("You must enter a valid comment."));var i=function(h,i){if(h)return a.Client.Widgets.Overlays.Common.AlertOverlayWidget.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later."),void d(Error("Unknown error from server. Please try again."));var j=new Date,k=new e;k.Update({comment_id:i.success.comment_id,date:["January","February","March","April","May","June","July","August","September","October","November","December"][j.getMonth()]+" "+j.getDate(),has_liked:!1,message:c,name:g.GetData("PDC.UserProfile.Name"),num_likes:0,profile_pic:g.GetData("PDC.UserProfile.ProfilePic"),user_id:g.GetData("PDC.UserProfile.UserId"),can_delete:!0,ts:j.getTime()/1e3}),b.Comments.push(k),b.DisplayedComments(b.DisplayedComments()+1),b.NumComments(b.NumComments()+1),f.LayoutUpdated.Fire(),d(null)};a.Client.Services.PushUpAPIService.CommentPost(b.Type(),c,b.PostId(),i)},d}(d);b.PostsViewModel=k}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Client.ViewModels.Overlays.AbstractOverlayViewModel,e=a.Client.ViewModels.Widgets.PostsViewModel,f=a.Client.Session,g=function(a){function b(b){function d(){i.feedImage={width:this.naturalWidth,height:this.naturalHeight},i.GetSize(),i.OverlayWidth(i.overlayWidth),i.GetElement().find(".pushup-post-inner").css("height",i.overlayHeight-165+"px"),i.GetElement().animate({height:i.overlayHeight+"px"},function(){jQuery(this).css("overflow","initial").css("padding","15px"),i.GetElement().find(".pushup-post").css("overflow","initial")})}var g=this;this.OverlayHeight=ko.observable(0),this.OverlayWidth=ko.observable(1176),this.DisplayImage=ko.observable(""),this.feedImage={width:0,height:0};var h=new Image,i=this;h.onerror=function(){i.DisplayImage(i.GetPostImage(b));var a=new Image;a.onload=d,a.src=b.Image()},h.onload=function(){setTimeout(function(){i.DisplayImage(i.GetPostImage(b))},0),d.call(this)},h.src=this.GetPostImage(b),b.IsAdmin(b.UserId()==f.GetData("PDC.UserProfile.UserId")),b.IsUser(b.UserId()==f.GetData("PDC.UserProfile.UserId")),b.Comments.reverse(),b.DisplayedComments(b.Comments().length);for(var j=0;j<b.Comments().length;j++)b.Comments()[j].CanDelete(b.IsAdmin()||b.Comments()[j].UserId()==f.GetData("PDC.UserProfile.UserId"));this.OverlayClose=new c.Event(this),this.ProfileInformation=ko.observable(f.GetData("PDC.UserProfile")),this.PostControl=new e(f.GetData("PDC.UserProfile.UserId"),b.IsAdmin(),!1,!0),this.PostControl.Navigate.Attach(function(a,b){return g.Navigate.Fire(b)},this),a.call(this,"pushup-feed-object-overlay",!1),this.post=b,window.addEventListener?window.addEventListener("resize",this.Resize.bind(this),!1):window.attachEvent?window.attachEvent("onresize",this.Resize.bind(this)):window.onresize=this.Resize.bind(this)}return __extends(b,a),b.prototype.ApplyBindings=function(){a.prototype.ApplyBindings.call(this),this.GetElement().css({height:"0px",overflow:"hidden",padding:"0px"}),this.GetElement().find(".pushup-post").css("overflow","hidden"),this.PostControl.SetElement(this.GetElement()),this.PostControl.UpdatePosts([this.post])},b.prototype.GetSize=function(){var a=window,b=document,c=b.documentElement,d=b.getElementsByTagName("body")[0],e=a.innerWidth||c.clientWidth||d.clientWidth,f=a.innerHeight||c.clientHeight||d.clientHeight,g=this.feedImage.width,h=this.feedImage.height,i=e,j=f,k=370,l=150;this.overlayHeight=h>j-l?j-l:h,this.overlayHeight<600&&(this.overlayHeight=600),this.overlayWidth=g+k>i-l?i-l:g+k,this.overlayWidth<770&&(this.overlayWidth=770)},b.prototype.Resize=function(){this.GetSize(),this.OverlayHeight(this.overlayHeight),this.OverlayWidth(this.overlayWidth),this.GetElement().find(".pushup-post-inner").css("height",this.overlayHeight-165+"px")},b.prototype.OpenOverlay=function(){jQuery("#"+this.GetElement().attr("id")+"_background").addClass("pushup-feed-object-overlay-background")},b.prototype.CloseOverlay=function(){this.OverlayClose.Fire()},b.prototype.Destroy=function(){a.prototype.Destroy.call(this),this.PostControl.Destroy()},b.prototype.GetPostImage=function(a){if(a.MetaData){var b=a.MetaData();if(b.SrcUrl)return b.SrcUrl()}return a.LargeImage?a.LargeImage():a.Image()},b}(d);b.FeedObjectViewModel=g}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Widgets.Overlays.AbstractOverlayWidget,d=a.Client.ViewModels.Overlays.Registered.FeedObjectViewModel,e=a.Framework.Events,f=function(b){function c(a){var c=this;this.canOpen=!1,this.openRequest=0,this.Navigate=new e.Event(this),this.LayoutUpdated=new e.Event(this);var f=new Image;f.onload=f.onerror=function(){c.canOpen=!0,c.openRequest>0&&(c.Open(),c.GetViewModel().GetElement().show())},f.src=this.GetPostImage(a),b.call(this,new d(a),!1,!0,!0,null,!0),b.prototype.Open.call(this);var g=this.GetViewModel().GetElement().parent();this.GetViewModel().ApplyBindings(),this.Initialize();var h=this;b.prototype.Open.call(this),this.GetViewModel().GetElement().hide(),this.GetViewModel().GetElement().parent().on("click",function(a){jQuery(a.target).is(jQuery(this))&&h.OverlayClose(null)}),g.prev().remove(),g.remove(),this.GetViewModel().Navigate.Attach(this.NavigatePage,this),this.GetViewModel().OverlayClose.Attach(this.OverlayClose,this),this.GetViewModel().PostControl.LayoutUpdated.Attach(function(){return c.LayoutUpdated.Fire()},this),this.GetViewModel().OverlayClose.Attach(function(){return c.LayoutUpdated.Fire()},this)}return __extends(c,b),c.prototype.NavigatePage=function(a,b){this.Close(),this.Navigate.Fire(b)},c.prototype.Open=function(){return this.canOpen===!1?(a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Show(),void this.openRequest++):(b.prototype.Open.call(this),this.GetViewModel().OpenOverlay(),void(this.openRequest>0&&(a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget.Hide(),this.openRequest--)))},c.prototype.OverlayClose=function(a){this.Close()},c.prototype.GetPostImage=function(a){if(a.MetaData){var b=a.MetaData();if(b.SrcUrl)return b.SrcUrl()}return a.LargeImage?a.LargeImage():""},c}(c);b.FeedObjectOverlayWidget=f}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(b.Widgets||(b.Widgets={}));b.Widgets}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Events.Event,d=function(a){function b(b,d){var e=this;a.call(this,b),this.LayoutComplete=new c(this),this.masonryInstance=new Isotope(b,d),this.masonryInstance.on("layoutComplete",function(a,b){return e.LayoutComplete.Fire(b)})}return __extends(b,a),b.prototype.RefreshLayout=function(){var a=this;this.masonryInstance.reloadItems(),this.masonryInstance.arrange(),imagesLoaded(this.GetElement(),function(){return a.masonryInstance.layout()})},b.prototype.StampElements=function(a){this.masonryInstance.stamp(a),this.RefreshLayout()},b.prototype.UnstampElements=function(a){this.masonryInstance.unstamp(a),this.RefreshLayout()},b.prototype.AppendElements=function(a){this.RefreshLayout()},b.prototype.InsertElements=function(a){this.RefreshLayout()},b.prototype.PrependElements=function(a){this.RefreshLayout()},b.prototype.RemoveElements=function(a){this.RefreshLayout()},b.prototype.Destroy=function(){this.masonryInstance.destroy()},b}(a.Framework.UI.Helper);b.MasonryHelper=d}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Client.Session,d=a.Framework.UI.ViewModel,e=a.Client.Models.Activity.PostModel,f=a.Client.Widgets.Overlays.Common.AlertOverlayWidget,g=a.Framework.Events,h=function(b){function d(a){var d=this;this.ProfileInformation=ko.observable(c.GetData("PDC.UserProfile")),this.CurrentComposer=ko.observable("status"),this.PhotoMessage=ko.observable(""),this.StatusMessage=ko.observable(""),this.VideoProvider=ko.observable(""),this.VideoId=ko.observable(""),this.VideoUrl=ko.observable(""),this.LinkFound=ko.observable(!1),this.PhotoComposerEnabled=ko.observable(!1),this.StatusFocused=ko.observable(!1),this.PhotoFocused=ko.observable(!1),this.ComposerActivated=ko.observable(!1),this.LayoutUpdated=new g.Event(this),this.StatusMessage.subscribe(function(){return d.InterpretStatus()}),this.CurrentComposer.subscribe(function(){return d.LayoutUpdated.Fire()}),this.ComposerActivated.subscribe(function(){return d.LayoutUpdated.Fire()}),(null!=a||null!=this.ProfileInformation())&&(this.userId=a||ko.utils.unwrapObservable(this.ProfileInformation().UserId)),this.MessagePosted=new g.Event(this),this.PhotoPosted=new g.Event(this),b.call(this)}return __extends(d,b),d.prototype.SwitchComposer=function(a){this.CurrentComposer(a),this.ComposerActivated(!0)},d.prototype.ParseMessage=function(a){var b=jQuery("<div>").html(a);return b.find("div").each(function(){jQuery(this).replaceWith("\n"+jQuery(this).text())}),b.text()},d.prototype.PostMessage=function(){var b=this,c=this.ParseMessage(this.StatusMessage()),d=this.VideoProvider(),g=this.VideoId(),h=this.VideoUrl();return c=c.trim(),this.StatusMessage(""),this.VideoId(""),this.VideoProvider(""),this.VideoUrl(""),""==c&&f.Show("Application Warning","The status is empty. Please write a status."),""!=d&&""!=g?void a.Client.Services.PushUpAPIService.PostVideo(c,d,g,h,this.userId,function(a,i){if(a||!i||!i.success)return void f.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later.");var j=new e;j.Create(i.success.post_id,c,"feedembed",b.userId,!0),j.MetaData().Update(JSON.stringify({id:g,provider:d,src_url:h,type:"video"})),b.MessagePosted.Fire(j),b.ResetComposer()}):void a.Client.Services.PushUpAPIService.PostMessage(c,this.userId,function(a,d){if(a||!d||!d.success)return void f.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later.");var g=new e;g.Create(d.success.post_id,c,"feedobject",b.userId,!0),b.MessagePosted.Fire(g),b.ResetComposer()})},d.prototype.PostImage=function(){var b=this,c=jQuery(".pushup-composer-file-input");if(""==c.val())return void new f("Application Warning","Please select a photo to upload.").Open();var d=this.ParseMessage(this.PhotoMessage());this.PhotoMessage(""),a.Client.Services.PushUpAPIService.PostImage(c,d,function(a,g){if(!a&&!g)return void f.Show("Application Warning","The photo you are attempting to upload is too large.");if(a||!g||!g.success)return void(413===a.GetStatusCode()?f.Show("Application Warning","The photo you are attempting to upload is too large."):f.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later."));c.wrap("<form>").closest("form").get(0).reset(),c.unwrap();var h=g.success,i=new e;i.Create(h.photo_id,d,"feedimage",b.userId,!0),i.Image(h.image),i.Thumbnail(h.thumbnail),i.LargeImage(h.large_image),b.PhotoPosted.Fire(i),b.ResetComposer()})},d.prototype.InterpretStatus=function(){var b=this,c=new RegExp("((?:(http|https|Http|Https|rtsp|Rtsp):\\/\\/(?:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,64}(?:\\:(?:[a-zA-Z0-9\\$\\-\\_\\.\\+\\!\\*\\'\\(\\)\\,\\;\\?\\&\\=]|(?:\\%[a-fA-F0-9]{2})){1,25})?\\@)?)?((?:(?:[a-zA-Z0-9][a-zA-Z0-9\\-]{0,64}\\.)+(?:(?:aero|arpa|asia|a[cdefgilmnoqrstuwxz])|(?:biz|b[abdefghijmnorstvwyz])|(?:cat|com|coop|c[acdfghiklmnoruvxyz])|d[ejkmoz]|(?:edu|e[cegrstu])|f[ijkmor]|(?:gov|g[abdefghilmnpqrstuwy])|h[kmnrtu]|(?:info|int|i[delmnoqrst])|(?:jobs|j[emop])|k[eghimnrwyz]|l[abcikrstuvy]|(?:mil|mobi|museum|m[acdghklmnopqrstuvwxyz])|(?:name|net|n[acefgilopruz])|(?:org|om)|(?:pro|p[aefghklmnrstwy])|qa|r[eouw]|s[abcdeghijklmnortuvyz]|(?:tel|travel|t[cdfghjklmnoprtvwz])|u[agkmsyz]|v[aceginu]|w[fs]|y[etu]|z[amw]))|(?:(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9])\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[1-9]|0)\\.(?:25[0-5]|2[0-4][0-9]|[0-1][0-9]{2}|[1-9][0-9]|[0-9])))(?:\\:\\d{1,5})?)(\\/(?:(?:[a-zA-Z0-9\\;\\/\\?\\:\\@\\&\\=\\#\\~\\-\\.\\+\\!\\*\\'\\(\\)\\,\\_])|(?:\\%[a-fA-F0-9]{2}))*)?(?:\\b|$)"),d=this.StatusMessage().match(c),e="";d&&this.LinkFound()!==!0&&(this.LinkFound(!!d),d.length>0&&(e=d[0]),a.Client.Services.PushUpAPIService.ScrapeLink(e,function(a,c){a||""==c.VideoProvider()||(b.VideoProvider(c.VideoProvider()),b.VideoId(c.VideoId()),b.VideoUrl(e),b.LayoutUpdated.Fire())}))},d.prototype.CheckResize=function(a,b){var c=jQuery(b.currentTarget).height();this.lastHeight!=c&&this.LayoutUpdated.Fire(),this.lastHeight=c},d.prototype.PostStatus=function(){this.StatusFocused(!1),this.PhotoFocused(!1),"status"==this.CurrentComposer()&&this.PostMessage(),"photo"==this.CurrentComposer()&&this.PostImage()},d.prototype.ResetComposer=function(){this.CurrentComposer("status"),this.StatusMessage(""),this.LinkFound(!1),this.VideoId(""),this.VideoProvider(""),this.PhotoMessage(""),this.StatusFocused(!1),this.PhotoFocused(!1),this.ComposerActivated(!1)},d.prototype.OpenStatus=function(){this.SwitchComposer("status"),this.FocusStatus()},d.prototype.FocusStatus=function(){this.StatusFocused(!0)},d.prototype.FocusPhoto=function(){this.PhotoFocused(!0)},d.prototype.OpenPhoto=function(){this.SwitchComposer("photo"),this.FocusPhoto()},d.prototype.NavigateToUser=function(){this.NavigatePage("profile",{userId:this.ProfileInformation().UserId()})},d}(d);b.ComposerViewModel=h}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Framework.Events.Event,e=a.Framework.Routing.HistoryItem,f=a.Client.Session,g=function(a){function b(b,c,e,g){this.SliderPage=ko.observable(c),this.UserId=ko.observable(e||f.GetData("PDC.UserProfile.UserId")),this.IsAdmin=ko.observable(f.GetData("PDC.UserProfile.IsAdmin")||this.UserId()==f.GetData("PDC.UserProfile.UserId")),this.IsUser=ko.observable(this.UserId()==f.GetData("PDC.UserProfile.UserId")),this.Inserted=new d(this),this.Opening=new d(this),this.Opened=new d(this),this.Closing=new d(this),this.Closed=new d(this),this.Opened.Attach(this.OnOpened.bind(this)),a.call(this,b,g)}return __extends(b,a),b.prototype.ScrollTo=function(a){this.GetElement().getNiceScroll().doScrollPos(0,this.GetElement().scrollTop()+-3.5*a,80)},b.prototype.ResizeScrollBar=function(){this.GetElement().getNiceScroll().resize()},b.prototype.OnOpened=function(){var a=this;this.GetElement().niceScroll({cursorcolor:"#264663",cursorwidth:"7px",cursorborderradius:"0",cursorborder:"none",bouncescroll:!1,railoffset:{left:10,top:30},background:"#E8E8E8",horizrailenabled:!1,autohidemode:!1}),this.ResizeScrollBar(),setTimeout(function(){return a.ResizeScrollBar()},1e3)},b.prototype.OnInserted=function(){},b.prototype.NavigateToPage=function(a,b){this.Navigate.Fire(new e(a,b||{}))},b.prototype.Update=function(){},b}(c);b.AbstractSliderPageViewModel=g}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.UserProfileModel,d=a.Framework.UI.ScrollWatcher,e=a.Client.Session,f=a.Framework.Events.Event,g=a.Client.Widgets.Overlays.Registered.FeedObjectOverlayWidget,h=a.Client.ViewModels.Widgets.PostsViewModel,i=a.Client.ViewModels.Widgets.ComposerViewModel,j=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,k=a.Client.Helpers.MasonryHelper,l=function(b){function j(a,d,g,h,i,j){"undefined"==typeof j&&(j=!0),this.localBound=!1,this.timelineSelector=g,this.masonryArgs=h,this.PaginateLimit=12,this.ProfileInformation=ko.observable(new c),this.NetworkName=e.GetObservable("PDC.CommunityInfo.Name"),this.EndOfFeed=ko.observable(!1),this.Navigate=new f(this),b.call(this,a,d,i,!1),this.Opening.Attach(this.UpdateLayout.bind(this)),this.Opened.Attach(this.UpdateLayout.bind(this)),this.Inserted.Attach(this.OnInserted.bind(this)),j&&this.ApplyBindings()}return __extends(j,b),j.prototype.ApplyBindings=function(){this.localBound||(this.PostsControl=this.InitializePostControl(new h(this.UserId(),this.IsAdmin(),!0,!1)),this.Composer=this.InitializeComposer(new i(this.UserId())),b.prototype.ApplyBindings.call(this),this.IsAdmin=ko.observable(this.IsAdmin()||this.UserId()==e.GetData("PDC.UserProfile.UserId")),this.PostsControl.SetElement(this.GetElement().find(this.timelineSelector)),this.Masonry=new k(this.PostsControl.GetElement()[0],this.masonryArgs),this.scrollWatcher=new d(this.GetElement()[0],250),this.UserId()!=e.GetData("PDC.UserProfile.UserId")&&(this.PostsControl.StarPost=null),this.localBound=!0)},j.prototype.InitializeComposer=function(a){var b=this;return a.MessagePosted.Attach(this.AddPost,this),a.PhotoPosted.Attach(this.AddPost,this),a.LayoutUpdated.Attach(function(){return setTimeout(function(){return b.UpdateLayout()},1)}),a},j.prototype.InitializePostControl=function(a){var b=this;return a.LayoutUpdated.Attach(this.UpdateLayout,this),a.ElementsAdded.Attach(this.UpdateLayout,this),a.ElementsPrepended.Attach(this.UpdateLayout,this),a.ElementsInserted.Attach(this.UpdateLayout,this),a.ElementsRemoved.Attach(this.UpdateLayout,this),a.Navigate.Attach(function(a,c){return b.Navigate.Fire(c)}),a},j.prototype.AddPost=function(a,b){this.PostsControl.AddPostModel(b)},j.prototype.GetScrollWatcher=function(){return this.scrollWatcher},j.prototype.UpdateLayout=function(){this.Masonry.RefreshLayout(),this.ResizeScrollBar()},j.prototype.StampElements=function(a){this.Masonry.StampElements(a)},j.prototype.UnstampElements=function(a){this.Masonry.UnstampElements(a)},j.prototype.UpdatePosts=function(a,b){return b.length>0&&(this.PostsControl.UpdatePosts(b),b.length==this.PaginateLimit)?(this.scrollWatcher.Enable(),void this.ResizeScrollBar()):(this.EndOfFeed(!0),void this.scrollWatcher.Disable())},j.prototype.OpenOverlayById=function(b){var c=this;a.Client.Services.PushUpAPIService.GetPost(b(),3,function(a,b){return c.OpenOverlay(b)})},j.prototype.OpenOverlay=function(a){var b=this,c=new g(a);c.Navigate.Attach(function(a,c){return b.Navigate.Fire(c)},this),c.LayoutUpdated.Attach(function(){return b.UpdateLayout()},this),c.Open()},j.prototype.OnInserted=function(){this.UpdateLayout(),this.scrollWatcher.Enable(),b.prototype.OnInserted.call(this)},j.prototype.Destroy=function(){b.prototype.Destroy.call(this),this.Masonry.Destroy(),this.PostsControl.Destroy(),this.scrollWatcher.Destroy()},j}(j);b.AbstractTimelineViewModel=l}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){!function(a){a[a.CLIENT_UNKNOWN=0]="CLIENT_UNKNOWN",a[a.MEDIA_UPLOAD=1e4]="MEDIA_UPLOAD",a[a.MEDIA_UPLOAD_WRITE=10002]="MEDIA_UPLOAD_WRITE",a[a.MEDIA_UPLOAD_MOVE=10003]="MEDIA_UPLOAD_MOVE",a[a.MEDIA_UPLOAD_TRANSFER=10004]="MEDIA_UPLOAD_TRANSFER",a[a.MEDIA_FILE_EXIST=10005]="MEDIA_FILE_EXIST",a[a.MEDIA_ALBUM_PHOTO=10006]="MEDIA_ALBUM_PHOTO",a[a.ACCOUNT_SIGNIN_PASSWORD=2e4]="ACCOUNT_SIGNIN_PASSWORD",a[a.ACCOUNT_REMOVE_COVER=20001]="ACCOUNT_REMOVE_COVER",a[a.ACCOUNT_PHOTO=20002]="ACCOUNT_PHOTO",a[a.ACCOUNT_REGISTRATION=20003]="ACCOUNT_REGISTRATION",a[a.ACCOUNT_RESET_PASSWORD=20004]="ACCOUNT_RESET_PASSWORD",a[a.ACCOUNT_CONFIRMATION=20005]="ACCOUNT_CONFIRMATION",a[a.ACCOUNT_REQUEST_PASSWORD=20006]="ACCOUNT_REQUEST_PASSWORD",a[a.ACCOUNT_SIGNIN_CONFIRMATION=20007]="ACCOUNT_SIGNIN_CONFIRMATION",a[a.ACCOUNT_ALREADY_CONFIRMED=20008]="ACCOUNT_ALREADY_CONFIRMED",a[a.ACCOUNT_SIGNIN_REQUIRES_APPROVAL=20009]="ACCOUNT_SIGNIN_REQUIRES_APPROVAL",a[a.ACCOUNT_SIGNIN_PARAMETER=20010]="ACCOUNT_SIGNIN_PARAMETER",a[a.ACCOUNT_SIGNIN_WRONG_NETWORK=20011]="ACCOUNT_SIGNIN_WRONG_NETWORK",a[a.ACCOUNT_JOIN_NETWORK_PARAMETER=20012]="ACCOUNT_JOIN_NETWORK_PARAMETER",a[a.ACCOUNT_JOIN_NETWORK=20013]="ACCOUNT_JOIN_NETWORK",a[a.ACCOUNT_DUPLICATE_USER_REGISTRATION=20014]="ACCOUNT_DUPLICATE_USER_REGISTRATION",a[a.ACCOUNT_DUPLICATE_USER_REGISTRATION_NETWORK=20015]="ACCOUNT_DUPLICATE_USER_REGISTRATION_NETWORK",a[a.ACCOUNT_CHANGE_PASSWORD=20016]="ACCOUNT_CHANGE_PASSWORD",a[a.ACCOUNT_SET_PROFILE_USER=20017]="ACCOUNT_SET_PROFILE_USER",a[a.ACCOUNT_INCORRECT_REQUEST_CODE=20018]="ACCOUNT_INCORRECT_REQUEST_CODE",a[a.NETWORK_SIGNIN_ADMIN=3e4]="NETWORK_SIGNIN_ADMIN",a[a.NETWORK_ID=30001]="NETWORK_ID",a[a.NETWORK_DUPLICATE_NETWORK=30002]="NETWORK_DUPLICATE_NETWORK",a[a.NETWORK_SET_ADMIN=30003]="NETWORK_SET_ADMIN",a[a.NETWORK_NETWORK_IP=30004]="NETWORK_NETWORK_IP",a[a.NETWORK_ADD_CAPACITY=30005]="NETWORK_ADD_CAPACITY",a[a.NETWORK_RESET_API=30006]="NETWORK_RESET_API",a[a.NETWORK_RESET_PASSWORD=30007]="NETWORK_RESET_PASSWORD",a[a.NETWORK_DUPLICATE_NETWORK_REQUEST=30008]="NETWORK_DUPLICATE_NETWORK_REQUEST",a[a.NETWORK_CONFIRMATION=30009]="NETWORK_CONFIRMATION",a[a.NETWORK_ADMIN=30010]="NETWORK_ADMIN",a[a.NETWORK_ADD_CUSTOMER_SUBSCRIPTION=30011]="NETWORK_ADD_CUSTOMER_SUBSCRIPTION",a[a.NETWORK_ADD_CREDIT_CARD_SUBSCRIPTION=30012]="NETWORK_ADD_CREDIT_CARD_SUBSCRIPTION",a[a.NETWORK_ADD_RESET_SUBSCRIPTION=30013]="NETWORK_ADD_RESET_SUBSCRIPTION",a[a.NETWORK_ADD_BANK_ACCOUNT_SUBSCRIPTION=30014]="NETWORK_ADD_BANK_ACCOUNT_SUBSCRIPTION",a[a.NETWORK_ADD_SUBSCRIPTION=30015]="NETWORK_ADD_SUBSCRIPTION",a[a.NETWORK_SUBSCRIBE=30016]="NETWORK_SUBSCRIBE",a[a.NETWORK_ROLLBACK_SUBSCRIPTION=30017]="NETWORK_ROLLBACK_SUBSCRIPTION",a[a.NETWORK_ROLLBACK_PAYMENT=30018]="NETWORK_ROLLBACK_PAYMENT",a[a.NETWORK_ROLLBACK_ADDRESS=30019]="NETWORK_ROLLBACK_ADDRESS",a[a.STATUS_DELETE=5e4]="STATUS_DELETE",a[a.STATUS_DELETE_CONTENT_PERMISSION=50001]="STATUS_DELETE_CONTENT_PERMISSION",a[a.STATUS_POST_CONTENT_PERMISSION=50002]="STATUS_POST_CONTENT_PERMISSION",a[a.MAIL_MIME=6e4]="MAIL_MIME",a[a.MAIL_NO_SUBJECT=60001]="MAIL_NO_SUBJECT",a[a.MAIL_EMAIL_PARAMETER=60002]="MAIL_EMAIL_PARAMETER",a[a.QUEUE_INVALID_QUEUE_CONTROLLER_NAME=7e4]="QUEUE_INVALID_QUEUE_CONTROLLER_NAME",a[a.QUEUE_PROCESSING=70001]="QUEUE_PROCESSING",a[a.VALIDATION_ERROR=8e4]="VALIDATION_ERROR",a[a.SERVER_BAD_REQUEST=9e4]="SERVER_BAD_REQUEST",a[a.SERVER_UNAUTHORIZED=90001]="SERVER_UNAUTHORIZED",a[a.SERVER_FORBIDDEN=90003]="SERVER_FORBIDDEN",a[a.SERVER_NOT_FOUND=90004]="SERVER_NOT_FOUND",a[a.SERVER_NOT_ALLOWED=90005]="SERVER_NOT_ALLOWED",a[a.SERVER_ERROR=99999]="SERVER_ERROR"}(a.PushUpAPIServiceErrorCode||(a.PushUpAPIServiceErrorCode={}));a.PushUpAPIServiceErrorCode}(a.Services||(a.Services={}));a.Services}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a.Api=function(a,b){var c=function(a,b){FB.api(a,b)};try{c(a,b)}catch(d){this.Login(function(d,e){d||c(a,b)})}},a.Login=function(a,b){"undefined"==typeof b&&(b="email"),FB.login(function(b){switch(b.status){case"connected":a(!1,b);break;case"not_authorized":a(!0,b);break;default:a(!1,null)}},{scope:b})},a.GetLoginStatus=function(a){FB.getLoginStatus(a,!0)},a}();a.PushUpFacebookService=b}(a.Services||(a.Services={}));a.Services}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.UI.ViewModel,e=a.Framework.Routing.HistoryItem,f=(a.Client.Services.PushUpAPIServiceErrorCode,a.Client.Session),g=function(b){function d(a){"undefined"==typeof a&&(a=null),this.redirectUrl=a,this.failedPasswordCount=0,this.FacebookAccessToken=ko.observable(""),this.LoginErrors=ko.observable(""),this.LoginEmail=ko.observable(""),
this.LoginPassword=ko.observable(""),this.LoginForgotPassword=ko.observable(!1),this.DisplayJoinCommunity=ko.observable(!1),this.LoginError=new c.Event(this),this.LoginSuccess=new c.Event(this),this.LoginRequiresApproval=new c.Event(this),this.LoginJoinNetwork=new c.Event(this),this.ForgotPassword=new c.Event(this),b.call(this)}return __extends(d,b),d.prototype.HandleSigninError=function(a){if(null!=a){switch(a.GetCode()){case 2e4:++this.failedPasswordCount>=3?(this.LoginErrors(""),this.LoginForgotPassword(!0)):this.LoginErrors("Your email or password is incorrect. Please try again.");break;case 8e4:this.LoginErrors(a.GetDescription());break;case 20013:case 20009:this.LoginErrors("You have already made a request to join this network. Please wait for approval from the community.");break;case 20011:this.DisplayJoinCommunity(!0);break;case 20007:this.Navigate.Fire(new e("confirm",{userId:a.GetDescription()}));break;default:this.LoginErrors("There was an error processing your request. Please try again.")}return this.LoginError.Fire(a.GetCode()),!1}return!0},d.prototype.ShowForgotPassword=function(){this.ForgotPassword.Fire()},d.prototype.ResetLogin=function(){this.failedPasswordCount=0,this.LoginErrors(""),this.LoginEmail(""),this.LoginPassword(""),this.LoginForgotPassword(!1)},d.prototype.HandleLoginResponse=function(b,c){if(this.HandleSigninError(b)){var d=a.Framework.Data.GlobalProxies.Pushup;!b&&d.Authenticated()&&f.SetData("PDC.API",{AccessToken:d.GetAccessToken(),Expiration:d.GetAccessTokenExpiration()},f.GlobalScope)}},d.prototype.SubmitSignIn=function(b){var c=this,d=this.LoginEmail(),e=this.LoginPassword();return this.LoginErrors(""),""==d||""==e?(this.LoginErrors("You must fill out both the email and password fields"),void this.LoginError.Fire(0)):1==this.DisplayJoinCommunity()?void a.Client.Services.PushUpAPIService.JoinCommunity(d,e,function(a,b){c.HandleSigninError(a)&&c.LoginRequiresApproval.Fire()}):void(this.FacebookAccessToken()?a.Client.Services.PushUpAPIService.FacebookLogin(d,e,this.FacebookAccessToken(),this.HandleLoginResponse.bind(this),this.redirectUrl):a.Client.Services.PushUpAPIService.Login(d,e,this.HandleLoginResponse.bind(this),this.redirectUrl))},d}(d);b.SignInViewModel=g}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Framework.UI.ViewModel,e=(a.Client.Services.PushUpAPIServiceErrorCode,a.Client.Models.Account.RegistrationModel),f=function(b){function d(){this.RegistrationErrors=ko.observable(""),this.ShowLoginButton=ko.observable(!1),this.BirthdateExplanationVisible=ko.observable(!1),this.RegisterRequiresApproval=new c.Event(this),this.RegisterError=new c.Event(this),this.GoToLogin=new c.Event(this),this.FormData=new e,b.call(this)}return __extends(d,b),d.prototype.SubmitRegistration=function(){var b=this;return this.ShowLoginButton(!1),this.RegistrationErrors(""),this.FormData.Legal()?-1!==this.FormData.Email().indexOf(" ")?(this.RegistrationErrors("Your email address must not contain spaces."),void this.RegisterError.Fire()):(this.FormData.Birthday(moment(this.FormData.Birthday()).format("MM/DD/YYYY")),void a.Client.Services.PushUpAPIService.Register(this.FormData,function(a,c){if(a){switch(a.GetCode()){case 8e4:b.RegistrationErrors(a.GetDescription());break;case 20014:case 20015:b.RegistrationErrors("There is an account already associated with that email."),b.ShowLoginButton(!0);break;default:b.RegistrationErrors("There was an error processing your request. Please try again.")}return void b.RegisterError.Fire()}1==c.success&&b.RegisterRequiresApproval.Fire()})):(this.RegistrationErrors("You must agree to the Pushup TOS."),void this.RegisterError.Fire())},d.prototype.OpenBirthdateExplanation=function(){this.BirthdateExplanationVisible(!0)},d.prototype.CloseBirthdateExplanation=function(){this.BirthdateExplanationVisible(!1)},d.prototype.Login=function(){this.GoToLogin.Fire()},d}(d);b.RegisterViewModel=f}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.SlideToPage=function(a){a.addClass("slide-in-page-selected"),a.css("z-index",999)},b.prototype.SlidePage=function(a,c){var d=jQuery(a),e=$("<div>"),f=d.find(".slide-in-page-selected").first();if(e=d.find('[data-slide-in-page-name="'+c+'"]'),d.css("height",e.children()[0].scrollHeight),!e.is(f)&&(d.children().css("z-index",0),d.children().removeClass("slide-in-page-selected"),!e.is(":first-child"))){if(f.length>0)return void setTimeout(function(){b.SlideToPage(e)},600);b.SlideToPage(e)}},b}(a.Framework.UI.Helper);b.SlideInHelper=c}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=(a.Client.Services.PushUpAPIServiceErrorCode,a.Client.Session),d=a.Client.ViewModels.Widgets.SignInViewModel,e=a.Client.ViewModels.Widgets.RegisterViewModel,f=a.Client.Services.PushUpFacebookService,g=a.Client.Helpers.SlideInHelper,h=a.Framework.UI.ViewModel,i=a.Framework.Data.GlobalProxies,j=a.Framework.Events,k=function(b){function h(a,h){"undefined"==typeof a&&(a=!0),"undefined"==typeof h&&(h=null);var k=this;this.redirectUrl=h,this.CloseLogin=new j.Event(this),this.LayoutChanged=new j.Event(this),this.RegistrationEnabled=ko.observable(!1),this.PrivateCommunity=ko.observable(!0),this.RegistrationEnabled=ko.observable(!1),this.LoginEnabled=ko.observable(!1),this.ForgotPasswordEnabled=ko.observable(!1),this.ConfirmRegistrationEnabled=ko.observable(!1),this.Embedded=ko.observable(a),this.RequestPasswordErrors=ko.observable(""),this.RequestPasswordEmail=ko.observable(""),this.JoinCommunity=ko.observable(!1),this.RequestSent=ko.observable(!1),this.Authenticated=ko.observable(i.Pushup.Authenticated()),this.LoginControl=new d(h),this.LoginControl.LoginError.Attach(function(){return k.Page.valueHasMutated()}),this.LoginControl.LoginError.Attach(this.UpdateLayout,this),this.LoginControl.LoginRequiresApproval.Attach(function(){return k.ShowRequiresApproval()}),this.LoginControl.LoginRequiresApproval.Attach(this.UpdateLayout,this),this.LoginControl.ForgotPassword.Attach(function(){return k.ShowForgotPassword()}),this.LoginControl.ForgotPassword.Attach(this.UpdateLayout,this),this.RegisterControl=new e,this.RegisterControl.RegisterError.Attach(function(){return k.Page.valueHasMutated()}),this.RegisterControl.RegisterError.Attach(this.UpdateLayout,this),this.RegisterControl.RegisterRequiresApproval.Attach(function(){return k.ShowRequiresApproval()}),this.RegisterControl.GoToLogin.Attach(function(a){k.LoginControl.LoginEmail(a.FormData.Email()),k.ShowLogin()}),this.showRequestPassword=!1,this.failedPasswordCount=0,this.FacebookFullName=ko.observable(""),this.FacebookFirstName=ko.observable(""),this.FacebookProfilePicture=ko.observable(""),this.FacebookAuthentication=ko.observable(!1),this.facebookLoggedIn=!1,f.GetLoginStatus(function(a){k.facebookLoggedIn=a}),this.SlideInHelper=new g,this.defaultPage="menu",this.Page=ko.observable(this.defaultPage),this.Community=c.GetObservable("PDC.CommunityInfo"),this.CommunityName=c.GetObservable("PDC.CommunityInfo.Name"),this.CommunityLogo=c.GetObservable("PDC.CommunityInfo.Thumbnail"),this.CommunityCoverImage=c.GetObservable("PDC.CommunityInfo.CoverImage"),b.call(this),this.CommunityName.subscribe(function(a){k.Page.valueHasMutated()}),this.Page.extend({notify:"always"}),setTimeout(function(){k.Page.valueHasMutated()},300)}return __extends(h,b),h.prototype.CloseLoginWidget=function(){this.CloseLogin.Fire()},h.prototype.ShowSignIn=function(){this.ShowRegistration()},h.prototype.ShowRequiresApproval=function(){var a=c.GetData("PDC.CommunityInfo");this.PrivateCommunity("private"==a.Privacy.toString()),this.ShowPage("requires-approval")},h.prototype.ResetRequestPassword=function(){this.RequestPasswordErrors(""),this.RequestPasswordEmail("")},h.prototype.DisplayRequiresApproval=function(){this.GetElement().find(".pushup-sign-in-register").animate({"margin-top":"-540px"})},h.prototype.ToggleRequestPassword=function(){var a=this,b=this.LoginControl.LoginEmail();this.LoginControl.ResetLogin(),this.ResetRequestPassword(),this.showRequestPassword?this.GetElement().find(".pushup-sign-in-login").animate({"margin-top":"0px"},function(){return a.showRequestPassword=!1}):(""!=b&&this.RequestPasswordEmail(b),this.GetElement().find(".pushup-sign-in-login").animate({"margin-top":"-600px"},function(){return a.showRequestPassword=!0}))},h.prototype.SubmitRequest=function(b){var c=this,d=b.elements.email.value;return""==d?(this.RequestPasswordErrors("You must fill out a valid email address."),void this.Page.valueHasMutated()):void a.Client.Services.PushUpAPIService.RequestPasswordReset(d,function(a,b){if(a){switch(a.GetCode()){case 30008:c.RequestPasswordErrors(a.GetDescription())}return void c.Page.valueHasMutated()}return b&&1==b.success?void c.RequestSent(!0):(c.RequestPasswordErrors("Something went wrong with the request. Please try again."),void c.Page.valueHasMutated())})},h.prototype.LoginWithFacebook=function(){var a=this;return this.facebookLoggedIn!==!1&&"connected"===this.facebookLoggedIn.status?void this.LoginWithAuthResponse(this.facebookLoggedIn.authResponse):void f.Login(function(b,c){return b?void 0:void a.LoginWithAuthResponse(c.authResponse)})},h.prototype.RegisterWithFacebook=function(){var b=this;a.Client.Services.PushUpAPIService.RegisterWithFacebook(this.LoginControl.FacebookAccessToken(),function(a,c){a||1==c.success&&b.LoginWithFacebook()})},h.prototype.LoginWithAuthResponse=function(b){var d=this,e=b.userID,g=b.accessToken,h=this;f.Api("/me/picture",function(a){d.FacebookProfilePicture(a.data.url)}),a.Client.Services.PushUpAPIService.LoginWithFacebook(e,g,this.redirectUrl,function(b,e){if(b){switch(b.GetCode()){case 20021:case 20023:case 20011:return void d.ShowRequiresApproval()}h.ShowLinkAccount(),d.LoginControl.FacebookAccessToken(g)}var f=a.Framework.Data.GlobalProxies.Pushup;!b&&f.Authenticated()&&c.SetData("PDC.API",{AccessToken:f.GetAccessToken(),Expiration:f.GetAccessTokenExpiration()},c.GlobalScope)})},h.prototype.GoToSocialFeed=function(){this.NavigatePage("socialfeed",{})},h.prototype.ShowMenu=function(){this.ShowPage("menu")},h.prototype.ShowLinkAccount=function(){this.ShowPage("link-account")},h.prototype.ShowLogin=function(){this.ShowPage("login")},h.prototype.HideLogin=function(){this.ShowMenu()},h.prototype.HideFacebook=function(){this.ShowMenu()},h.prototype.ShowRegistration=function(){this.ShowPage("register")},h.prototype.HideRegistration=function(){this.ShowMenu()},h.prototype.ShowForgotPassword=function(){if("undefined"!=typeof this.LoginControl){var a=this.LoginControl.LoginEmail();""!=a&&this.RequestPasswordEmail(a||"")}this.ShowPage("forgot-password")},h.prototype.HideForgotPassword=function(){this.ShowMenu()},h.prototype.ShowConfirmRegistration=function(){this.ShowPage("confrim-registration")},h.prototype.HideConfirmRegistration=function(){this.ShowMenu()},h.prototype.ShowAboutPushup=function(){this.Page("about-pushup")},h.prototype.HideAboutPushup=function(){this.Page(this.defaultPage)},h.prototype.ShowPage=function(a){this.Page(a),this.UpdateLayout()},h.prototype.Update=function(){},h.prototype.UpdateLayout=function(){this.LayoutChanged.Fire()},h}(h);b.LoginViewModel=k}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Session,d=a.Client.Models.Activity.PostModel,e=a.Client.ViewModels.Widgets.PostsViewModel,f=a.Client.ViewModels.Slider.Pages.AbstractTimelineViewModel,g=a.Client.Services.PushUpAPIService,h=a.Client.ViewModels.Widgets.LoginViewModel,i=function(b){function f(f,g){var i=this;if(this.endOfFeed=!1,this.canRequestFeed=!0,b.call(this,f,"ps-slider-socialfeed",".pushup-isotope-container",{itemSelector:"li.pushup-post",layoutMode:"masonry",isInitLayout:!1,transitionDuration:0,masonry:{gutter:23,columnWidth:295,isFitWidth:!0}},null,!1),this.SignInControl=new h(!0),this.SignInControl.CloseLogin.Attach(this.HideLogin,this),this.SignInControl.LayoutChanged.Attach(function(){setTimeout(function(){return i.UpdateLayout()},600)}),this.StickyPostsControl=new e(this.UserId(),this.IsAdmin(),!0,!1),this.InitializePostControl(this.StickyPostsControl),this.CommunityName=c.GetObservable("PDC.CommunityInfo.Name"),this.CommunityLogo=c.GetObservable("PDC.CommunityInfo.Thumbnail"),this.LoginFormOpen=ko.observable(!1),this.Authenticated=ko.observable(a.Framework.Data.GlobalProxies.Pushup.Authenticated()),this.ApplyBindings(),this.StickyPostsControl.SetElement(this.GetElement().find(".pushup-sticky-posts")),this.PostsControl.StarPost=null,this.StickyPostsControl.StarPost=null,this.StickyPostsControl.IsAdmin(c.GetData("PDC.UserProfile.IsAdmin")),this.PostsControl.IsAdmin(c.GetData("PDC.UserProfile.IsAdmin")),this.PostsControl.DisplayLinks(!0),this.PostsControl.PostStickied.Attach(function(a,b){i.PostsControl.RemovePost(b.PostId()),i.PostsControl.RegisterPost(b),i.StickyPostsControl.AddPostModel(b),i.UpdateLayout()}),this.StickyPostsControl.PostUnsticked.Attach(function(a,b){var c=b.PostId();i.StickyPostsControl.RemovePost(c),i.PostsControl.RemovePost(c),i.PostsControl.AddPostModel(b),i.UpdateLayout()}),this.IsAdmin(c.GetData("PDC.UserProfile.IsAdmin")),this.Composer.PhotoComposerEnabled(!0),this.ProfileInformation().Update(c.GetData("PDC.UserProfile")),this.GetScrollWatcher().ScrollLimitReached.Attach(this.OnScrollLimitReached,this),!a.Framework.Data.GlobalProxies.Pushup.Authenticated()){var j=new d;j.CommunityIntroPost(!0),this.StickyPostsControl.AddPostModel(j)}}return __extends(f,b),f.prototype.ShowLogin=function(a){var b=this;this.PostsControl.CloseAllLogins(),this.StickyPostsControl.CloseAllLogins(),"undefined"!=typeof a.ComposerActivated&&(a=this.StickyPostsControl.Posts()[0]),a.ShowLoginForm(!0),this.LoginFormOpen(!0),this.SignInControl.Page(this.SignInControl.Page()),this.UpdateLayout(),setTimeout(function(){return b.UpdateLayout()},150),setTimeout(function(){return b.UpdateLayout()},600)},f.prototype.HideLogin=function(){var a=this;this.PostsControl.CloseAllLogins(),this.StickyPostsControl.CloseAllLogins(),this.LoginFormOpen(!1),this.UpdateLayout(),setTimeout(function(){return a.UpdateLayout()},150)},f.prototype.OnScrollLimitReached=function(){this.GetScrollWatcher().Disable(),this.endOfFeed!==!0&&this.canRequestFeed!==!1&&(this.canRequestFeed=!1,a.Client.Services.PushUpAPIService.GetSocialFeed(this.PostsControl.LastTimestamp,this.ProcessSocialFeed.bind(this)))},f.prototype.ProcessSocialFeed=function(a,b){return this.canRequestFeed=!0,b.length>0&&this.PostsControl.UpdatePosts.call(this.PostsControl,b),b.length<15?(this.endOfFeed=!0,void this.EndOfFeed(!0)):(this.GetScrollWatcher().Enable(),void this.ResizeScrollBar())},f.prototype.Update=function(){var a=this;g.GetSocialFeed(this.PostsControl.LastTimestamp,this.ProcessSocialFeed.bind(this)),g.GetStickyPosts(function(b,c){for(var d=0;d<c.length;d++)a.PostsControl.RemovePost(c[d].PostId(),!0),a.PostsControl.RegisterPost(c[d]);a.StickyPostsControl.UpdatePosts.call(a.StickyPostsControl,c),a.PostsControl.Posts.valueHasMutated(),a.UpdateLayout()})},f}(f);b.SocialFeedViewModel=i}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Client.Session,e=a.Framework.Events,f=function(b){function c(a){b.call(this),this.MemberInformation=ko.observable(a),this.MemberFollowed=new e.Event(this),this.MemberUnfollowed=new e.Event(this)}return __extends(c,b),c.prototype.Follow=function(b){var c=this;b.UserId()!=d.GetData("PDC.UserProfile.UserId")&&a.Client.Services.PushUpAPIService.FollowUser(b.UserId(),function(a,d){1==d.success&&(b.IsFollower(!0),b.Followers(b.Followers()+1),c.MemberFollowed.Fire(b))})},c.prototype.Unfollow=function(b){var c=this;b.UserId()!=d.GetData("PDC.UserProfile.UserId")&&a.Client.Services.PushUpAPIService.UnfollowUser(b.UserId(),function(a,d){if(1==d.success){var e=b.Followers();b.IsFollower(!1),e>0&&b.Followers(e-1),c.MemberUnfollowed.Fire(b)}})},c.prototype.FollowMember=function(a){a.IsFollower()===!0?this.Unfollow(a):this.Follow(a)},c.prototype.Logout=function(){a.Framework.Data.GlobalProxies.Pushup.Deauthenticate(),d.DeleteAuthTokenGlobally()},c}(c);b.MemberTileViewModel=f}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.UserProfileModel,d=a.Client.Session,e=a.Framework.Events.Event,f=a.Client.Models.Media.RecentPhotos,g=a.Client.Widgets.Overlays.Common.AlertOverlayWidget,h=a.Client.ViewModels.Widgets.MemberTileViewModel,i=a.Client.ViewModels.Slider.Pages.AbstractTimelineViewModel,j=function(b){function i(g,i){var j=this;this.maxRecentPages=0,this.recentPhotoPage=1,this.recentPhotos=[],this.endOfFeed=!1,this.canRequestFeed=!0;var k=i.GetPageParams(),l=k.userId?k.userId:d.GetData("PDC.UserProfile.UserId");this.MemberTile=new h(new c),this.MemberTile.Navigate.Attach(function(a,b){j.Navigate.Fire(b)}),this.JoinedDate=ko.computed(function(){if("function"!=typeof this.MemberTile.MemberInformation)return"";var a=new Date(1e3*this.MemberTile.MemberInformation().JoinTs());return["January","February","March","April","May","June","July","August","September","October","November","December"][a.getMonth()]+" "+a.getDate()+", "+a.getFullYear()},this),this.Navigate=new e(this),this.RecentActivityPages=ko.observableArray([]),this.RecentPhotoPage=ko.observable(1),b.call(this,g,"ps-slider-profile",".pushup-page-profile-container > .pushup-isotope-container",{itemSelector:"li.pushup-post",stamp:".pushup-profile-stamp",layoutMode:"masonry",isInitLayout:!1,transitionDuration:0,masonry:{gutter:60,columnWidth:445,isFitWidth:!0}},l),this.Masonry.LayoutComplete.Attach(this.TimelineLayoutComplete,this),this.Inserted.Attach(this.OnVisible.bind(this)),this.Closing.Attach(this.OnClosing.bind(this)),this.PostsControl.PostAdded.Attach(function(a,b){if("feedimage"==b.Type()){var c=new f;c.Image(b.Image()),c.PhotoId(b.PostId()),c.Ts(b.Ts()),j.recentPhotos.unshift(c),j.UpdateRecentPhotos(j.recentPhotos)}}),this.PostsControl.PostRemvoed.Attach(function(a,b){for(var c=0;c<j.recentPhotos.length;c++)if(j.recentPhotos[c].PhotoId()==b.PostId()){j.recentPhotos.splice(c,1);var d=Math.floor(c/6);j.UpdateRecentPhotos(j.recentPhotos.slice(6*d,j.recentPhotos.length+1),d);break}}),this.GetScrollWatcher().ScrollLimitReached.Attach(this.OnScrollLimitReached,this),this.UserId()==d.GetData("PDC.UserProfile.UserId")?a.Client.Session.Subscribe("PDC.UserProfile",function(a,b){return null==b?(j.ProfileInformation(new c),void j.MemberTile.MemberInformation(new c)):(j.ProfileInformation().Update(b),j.MemberTile.MemberInformation().Update(b),void(j.ProfileInformation().UserId()==d.GetData("PDC.UserProfile.UserId")&&(j.MemberTile.MemberInformation().IsUser(!0),j.ProfileInformation().IsUser(!0))))}):this.PostsControl.StarPost=null}return __extends(i,b),i.prototype.OnClosing=function(){this.GetScrollWatcher().Disable(),this.canRequestFeed=!1,this.endOfFeed=!0},i.prototype.OnScrollLimitReached=function(){var b=this;this.GetScrollWatcher().Disable(),this.endOfFeed!==!0&&this.canRequestFeed!==!1&&a.Client.Services.PushUpAPIService.GetWall(this.UserId()?this.UserId():null,this.PostsControl.LastTimestamp,function(a,c){return b.canRequestFeed=!0,c.length>0&&b.UpdatePosts(a,c),c.length<12?(b.endOfFeed=!0,void b.EndOfFeed(!0)):void 0})},i.prototype.NextRecentPhotoPage=function(){var a=this.recentPhotoPage;++a>this.maxRecentPages||(this.maxRecentPages-a<1&&this.GetMoreRecentPhotos(),jQuery(".pushup-profile-recent-photos .pushup-profile-recent-photos-container > div").first().stop().animate({"margin-left":-396*(a-1)+"px"}),this.recentPhotoPage=a,this.RecentPhotoPage(this.recentPhotoPage))},i.prototype.PrevRecentPhotoPage=function(){var a=this.recentPhotoPage;--a<1||(jQuery(".pushup-profile-recent-photos .pushup-profile-recent-photos-container > div").first().stop().animate({"margin-left":-396*(a-1)+"px"}),this.recentPhotoPage=a,this.RecentPhotoPage(this.recentPhotoPage))},i.prototype.TimelineLayoutComplete=function(a,b){if(void 0!==b)for(var c=0;c<b.length;c++){var d=b[c].element;d.className.indexOf("pushup-post-starred")>=0||(d.className="pushup-post "+(b[c].position.x>0?"pushup-wall-post-right":"pushup-wall-post-left"))}},i.prototype.UpdateProfileInformation=function(a,b){b.IsUser(b.UserId()==d.GetData("PDC.UserProfile.UserId")),b.IsUser()===!0&&this.Composer.PhotoComposerEnabled(!0),this.MemberTile.MemberInformation(b),this.ProfileInformation(b),this.ReCreateUploadForms()},i.prototype.OnVisible=function(){this.ReCreateUploadForms(),this.UpdateLayout()},i.prototype.ReCreateUploadForms=function(){var b=this;a.Client.Services.PushUpAPIService.UploadProfilePicture(jQuery(".pushup-member-tile-profile-pic input"),"profilepic",function(a,c){if(!a&&!c)return void g.Show("Application Warning","The profile picture you are attempting to upload is too large.");if(a||!c||!c.success)return void(413===a.GetStatusCode()?g.Show("Application Warning","The profile picture you are attempting to upload is too large."):g.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later."));var d=c.success,e=d.image;b.MemberTile.MemberInformation().ProfilePic(e),b.ProfileInformation().ProfilePic(e),b.ReCreateUploadForms()}),a.Client.Services.PushUpAPIService.UploadCoverImage(jQuery(".pushup-profile-user-cover-image input"),function(a,c){if(!a&&!c)return void g.Show("Application Warning","The cover image you are attempting to upload is too large.");if(a||!c||!c.success)return void(413===a.GetStatusCode()?g.Show("Application Warning","The cover image you are attempting to upload is too large."):g.Show("","Processing is taking longer than expected. Please refresh your browser, or try again later."));var d=c.success,e=d.image;b.MemberTile.MemberInformation().CoverImage(e),b.ProfileInformation().CoverImage(e),b.ReCreateUploadForms()})},i.prototype.OpenAboutMe=function(){},i.prototype.DeleteProfilePic=function(){var b=this;new a.Client.Widgets.Overlays.Registered.DeleteConfirmOverlayWidget(function(){a.Client.Services.PushUpAPIService.DeleteProfilePic(function(a,c){1==c.success&&(b.MemberTile.MemberInformation().ProfilePic(""),b.ProfileInformation().ProfilePic(""))})})},i.prototype.DeleteCoverImage=function(){var b=this;new a.Client.Widgets.Overlays.Registered.DeleteConfirmOverlayWidget(function(){a.Client.Services.PushUpAPIService.DeleteCoverImage(function(a,c){1==c.success&&(b.MemberTile.MemberInformation().CoverImage(""),b.ProfileInformation().CoverImage(""))})})},i.prototype.UpdateRecentPhotos=function(a,b){var c=6,d=Math.ceil(a.length/c),b=b||0,e=this.RecentActivityPages();e.splice(b,e.length);for(var f=0;d>f;f++)for(var g=0;c>g;g++){var h=f*c+g,i=b+f;if(h+1>a.length)break;e[i]instanceof Array||(e[i]=new Array),e[i].push(a[h])}this.RecentActivityPages(e),this.maxRecentPages=this.RecentActivityPages().length,this.UpdateLayout()},i.prototype.GetRecentPhotosCallback=function(a,b){return null!=a?void g.Show("Application Error","Unknown response from server."):(this.recentPhotos=b,void this.UpdateRecentPhotos(this.recentPhotos,this.maxRecentPages))},i.prototype.GetMoreRecentPhotos=function(){var b=0==this.recentPhotos.length?null:this.recentPhotos[this.recentPhotos.length-1],c=null==b?Math.round((new Date).getTime()/1e3):b.Ts();a.Client.Services.PushUpAPIService.GetRecentPhotos(this.UserId(),c,this.GetRecentPhotosCallback.bind(this))},i.prototype.Update=function(){a.Client.Services.PushUpAPIService.GetProfileInformation(this.UserId(),this.UpdateProfileInformation.bind(this)),a.Client.Services.PushUpAPIService.GetWall(this.UserId(),this.PostsControl.LastTimestamp,this.UpdatePosts.bind(this)),this.GetMoreRecentPhotos()},i}(i);b.ProfileViewModel=j}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Services.PushUpAPIService,d=a.Client.Models.SuccessModel,e=function(a){function b(){a.apply(this,arguments),this.OldPassword=ko.observable(""),this.NewPassword=ko.observable(""),this.ConfirmNewPassword=ko.observable("")}return __extends(b,a),b.prototype.Validate=function(){var a=""==this.OldPassword()||""==this.NewPassword()||""==this.ConfirmNewPassword(),b=this.NewPassword()==this.ConfirmNewPassword(),c=this.OldPassword()==this.NewPassword(),d=this.NewPassword().length>5;if(a)throw new Error("Fields empty! Please fill out all required fields");if(!b)throw new Error("Passwords do not match. Please double check passwords.");if(c)throw new Error("New password must be different from old password.");if(!d)throw new Error("Password lenght incorrect. You must have a password with 6 or more characters.");return!0},b.prototype.Save=function(a){this.Validate(),c.GetInstance().MakeRequest("PUT","account/password",this.Serialize(),a,d)},b.prototype.Serialize=function(){return this.ConfirmNewPassword._preventSerialze=!0,a.prototype.Serialize.call(this)},b}(a.Framework.Data.Model);b.ChangePasswordModel=e}(b.Settings||(b.Settings={}));b.Settings}(b.Account||(b.Account={}));b.Account}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Client.Services.PushUpAPIService,e=function(a){function b(){this.LoadSettings(),this.PostsWall=ko.observable(!1),this.PostsWallFrequency=ko.observable(1),this.PostsAdmin=ko.observable(!1),this.PostsAdminFrequency=ko.observable(1),this.PostsStickyPosts=ko.observable(!1),this.PostsStickyPostsFrequency=ko.observable(1),this.PostsFollowing=ko.observable(!1),this.PostsFollowingFrequency=ko.observable(1),this.CommentsMyPost=ko.observable(!1),this.CommentsMyPostFrequency=ko.observable(1),this.CommentsLikedPost=ko.observable(!1),this.CommentsLikedPostFrequency=ko.observable(1),this.CommentsCommentedPost=ko.observable(!1),this.CommentsCommentedPostFrequency=ko.observable(1),this.UsersNewFollower=ko.observable(!1),this.UsersNewFollowerFrequency=ko.observable(1),this.SaveComplete=ko.observable(!1),this.ApplyToAllCommunities=ko.observable(!1),a.call(this)}return __extends(b,a),b.prototype.LoadSettings=function(){var a=this;d.GetAccountSettings(function(b,c){if(!b){a.AccountSettings=c;var d=a.AccountSettings.notifications;a.PostsWall(d.posts.wall.email),a.PostsWallFrequency(d.posts.wall.frequency),a.PostsAdmin(d.posts.admin.email),a.PostsAdminFrequency(d.posts.admin.frequency),a.PostsStickyPosts(d.posts.sticky_post.email),a.PostsStickyPostsFrequency(d.posts.sticky_post.frequency),a.PostsFollowing(d.posts.following.email),a.PostsFollowingFrequency(d.posts.following.frequency),a.CommentsMyPost(d.comments.my_post.email),a.CommentsMyPostFrequency(d.comments.my_post.frequency),a.CommentsLikedPost(d.comments.liked_post.email),a.CommentsLikedPostFrequency(d.comments.liked_post.frequency),a.CommentsCommentedPost(d.comments.commented_post.email),a.CommentsCommentedPostFrequency(d.comments.commented_post.frequency),a.UsersNewFollower(d.users.new_follower.email),a.UsersNewFollowerFrequency(d.users.new_follower.frequency)}})},b.prototype.SaveSettings=function(){var a=this;this.AccountSettings.notifications=JSON.stringify({posts:{wall:{mobile:!1,email:this.PostsWall(),frequency:+this.PostsWallFrequency()},admin:{mobile:!1,email:this.PostsAdmin(),frequency:+this.PostsAdminFrequency()},sticky_post:{mobile:!1,email:this.PostsStickyPosts(),frequency:+this.PostsStickyPostsFrequency()},following:{mobile:!1,email:this.PostsFollowing(),frequency:+this.PostsFollowingFrequency()}},comments:{my_post:{mobile:!1,email:this.CommentsMyPost(),frequency:+this.CommentsMyPostFrequency()},liked_post:{mobile:!1,email:this.CommentsLikedPost(),frequency:+this.CommentsLikedPostFrequency()},commented_post:{mobile:!1,email:this.CommentsCommentedPost(),frequency:+this.CommentsCommentedPostFrequency()}},users:{new_follower:{mobile:!1,email:this.UsersNewFollower(),frequency:+this.UsersNewFollowerFrequency()}}}),this.ApplyToAllCommunities()===!0&&(this.AccountSettings.apply_to_all=!0),d.SaveAccountSettings(this.AccountSettings,function(b,c){a.SaveComplete(!0),setTimeout(function(){a.SaveComplete(!1)},2e3)})},b}(c);b.NotificationSettingsViewModel=e}(b.Widgets||(b.Widgets={}));b.Widgets}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.FullUserProfileModel,d=a.Client.Models.Account.FullSettingsModel,e=a.Client.Models.Account.UserProfileModel,f=a.Client.Services.PushUpAPIService,g=a.Client.Session,h=a.Client.Widgets.Overlays.Common.AlertOverlayWidget,i=a.Client.ViewModels.Widgets.MemberTileViewModel,j=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,k=a.Client.Models.Account.Settings.ChangePasswordModel,l=a.Client.ViewModels.Widgets.NotificationSettingsViewModel,m=function(a){function b(b,f,h){"undefined"==typeof h&&(h=null);var j=this,m=f.GetPageParams().userId||g.GetData("PDC.UserProfile.UserId");this.MemberInformation=new i(new e),this.MemberInformation.Navigate.Attach(function(a,b){j.Navigate.Fire(b)}),this.NotificationSettings=new l,this.ProfileInformation=ko.observable(new c),this.Settings=ko.observable(new d),this.ChangePassword=ko.observable(new k),this.IsNetworkAdmin=g.GetObservable("PDC.UserProfile.IsAdmin"),this.AvailableCountries=ko.observableArray(["United States","Afghanistan","Albania","Algeria","Andorra","Angola","Antigua and Deps","Argentina","Armenia","Australia","Austria","Azerbaijan","Bahamas","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bhutan","Bolivia","Bosnia Herzegovina","Botswana","Brazil","Brunei","Bulgaria","Burkina","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Central African Rep","Chad","Chile","China","Colombia","Comoros","Congo","Congo {Democratic Rep}","Costa Rica","Croatia","Cuba","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","East Timor","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Fiji","Finland","France","Gabon","Gambia","Georgia","Germany","Ghana","Greece","Grenada","Guatemala","Guinea","Guinea-Bissau","Guyana","Haiti","Honduras","Hungary","Iceland","India","Indonesia","Iran","Iraq","Ireland {Republic}","Israel","Italy","Ivory Coast","Jamaica","Japan","Jordan","Kazakhstan","Kenya","Kiribati","Korea North","Korea South","Kosovo","Kuwait","Kyrgyzstan","Laos","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macedonia","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Mauritania","Mauritius","Mexico","Micronesia","Moldova","Monaco","Mongolia","Montenegro","Morocco","Mozambique","Myanmar"," {Burma}","Namibia","Nauru","Nepal","Netherlands","New Zealand","Nicaragua","Niger","Nigeria","Norway","Oman","Pakistan","Palau","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Poland","Portugal","Qatar","Romania","Russian Federation","Rwanda","St Kitts and Nevis","St Lucia","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Sudan","Spain","Sri Lanka","Sudan","Suriname","Swaziland","Sweden","Switzerland","Syria","Taiwan","Tajikistan","Tanzania","Thailand","Togo","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","Uruguay","Uzbekistan","Vanuatu","Vatican City","Venezuela","Vietnam","Yemen","Zambia","Zimbabwe"]),
null===h?this.SelectedSection=ko.observable({section:"Profile",tab:"Basic Info"}):this.SelectedSection=ko.observable({section:"Notifications",tab:"Notifications"}),this.EditingProfile=ko.observable(!1),this.EditingSettings=ko.observable(!1),a.call(this,b,"ps-aboutinfo",m)}return __extends(b,a),b.prototype.ScrollTo=function(a){this.GetElement().getNiceScroll().doScrollPos(0,this.GetElement().scrollTop()+-3.5*a,80)},b.prototype.ResizeScrollBar=function(){this.GetElement().getNiceScroll().resize()},b.prototype.HandlePasswordChange=function(a,b){return a?void h.Show("Error","Could not save changes: "+a.GetDescription()):(this.ChangePassword(new k),void h.Show("Message","Password Successfully Changed!"))},b.prototype.SaveNewPassword=function(){try{this.ChangePassword().Save(this.HandlePasswordChange.bind(this))}catch(a){h.Show("Error","Could not save changes: "+a.message)}},b.prototype.Update=function(){var a=this,b=this.UserId();f.GetFullProfileInformation(b,function(c,d){b==g.GetData("PDC.UserProfile.UserId")&&d.IsUser(!0),a.ProfileInformation(d);var e=a.ProfileInformation().BasicInfo().Birthday(),f=moment(e,"YYYY-MM-DD").format("MM-DD-YYYY");a.ProfileInformation().BasicInfo().Birthday(f)}),f.GetFullAccountSettings(function(b,c){a.Settings(c)}),f.GetProfileInformation(b,function(b,c){a.MemberInformation.MemberInformation(c)}),this.GetElement().niceScroll({cursorcolor:"#264663",cursorwidth:"7px",cursorborderradius:"0",cursorborder:"none",bouncescroll:!1,railoffset:{left:10},background:"#E8E8E8",horizrailenabled:!1,autohidemode:!1}),this.ResizeScrollBar(),setTimeout(function(){return a.ResizeScrollBar()},1e3)},b.prototype.ChangeEditProfileState=function(){var a=this,b=this.EditingProfile();this.EditingProfile(!b),b&&f.SaveFullProfileInformation(this.UserId(),this.ProfileInformation(),function(b){return b?void h.Show("Error","Unable to update profile information."):void f.GetProfileInformation(null,function(b,c){b||(g.SetData("PDC.UserProfile",c.ToObject()),a.MemberInformation.MemberInformation(c))})})},b.prototype.ChangeEditSettingsState=function(){var a=this.EditingSettings();this.EditingSettings(!a),a&&f.SaveFullAccountSettings(this.Settings,function(a){return a?void h.Show("Error","Unable to update account settings."):void 0})},b}(j);b.AboutInfoViewModel=m}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Session,d=a.Client.Widgets.Overlays.Common.AlertOverlayWidget,e=a.Client.ViewModels.Widgets.MemberTileViewModel,f=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,g=function(b){function f(a,c){var d=c.GetPageParams().query;this.Members=ko.observableArray([]),this.MemberSortOption=ko.observableArray([]),this.isVisible=!1,this.queuedItems=[],this.filterName="",this.filterFollowing="everyone",this.MemberSortOption.subscribe(this.SortMembers.bind(this)),b.call(this,a,"ps-slider-members"),this.Inserted.Attach(this.OnVisible.bind(this)),this.masonryInstance=new Isotope(this.GetElement()[0].querySelector(".pushup-member-list"),{itemSelector:"li.pushup-member-tile-container",layoutMode:"masonry",isInitLayout:!1,transitionDuration:0,masonry:{gutter:13,columnWidth:305,isFitWidth:!0},getSortData:{following:".pushup-member-followers>span parseInt",followers:".pushup-member-following>span parseInt",jointime:".pushup-member-join-time>span parseInt",posts:".pushup-member-posts>span parseInt",firstname:function(a){var b=a.querySelector(".pushup-member-tile-name"),c=b.innerText||b.textContent;return c?c.split(" ")[0]:""},lastname:function(a){var b=a.querySelector(".pushup-member-tile-name"),c=b.innerText||b.textContent,d=c?c.split(" "):[];return d[d.length-1]}}}),d&&""!=d&&(this.GetElement()[0].querySelector(".pushup-members-filter").value=d,this.filterName=d,this.FilterMember())}return __extends(f,b),f.prototype.UpdateMemberFollowing=function(a,b){for(var d=this.Members(),e=0;e<d.length;e++)if(d[e].MemberInformation().UserId()==c.GetData("PDC.UserProfile.UserId")){var f=d[e].MemberInformation().Following();d[e].MemberInformation().Following(++f);break}},f.prototype.UpdateMemberUnfollowing=function(a,b){for(var d=this.Members(),e=0;e<d.length;e++)if(d[e].MemberInformation().UserId()==c.GetData("PDC.UserProfile.UserId")){var f=d[e].MemberInformation().Following();f>0&&d[e].MemberInformation().Following(--f);break}},f.prototype.OnOpened=function(){b.prototype.OnOpened.call(this),this.UpdateLayout()},f.prototype.UpdateLayout=function(){this.masonryInstance.layout(),this.ResizeScrollBar()},f.prototype.SortMembers=function(a){this.masonryInstance.arrange({sortBy:a[0],sortAscending:"jointime"!=a[0]&&"following"!=a[0]&&"followers"!=a[0]&&"posts"!=a[0]}),this.ResizeScrollBar()},f.prototype.OnVisible=function(){var a=this;this.isVisible=!0,this.queuedItems.length>0&&this.UpdateElements(this.queuedItems),this.masonryInstance.arrange(),this.UpdateLayout(),setTimeout(function(){return a.ResizeScrollBar()},1e3)},f.prototype.FilterFollowers=function(a,b){this.GetElement().find(".pushup-members-search-btn").removeClass("pushup-members-search-btn-selected"),b.target.className=b.target.className+" pushup-members-search-btn-selected",this.filterFollowing=a,this.FilterMember()},f.prototype.FilterMember=function(){var a=this.filterName.toLowerCase(),b="";switch(this.filterFollowing){case"following":b="pushup-member-is-following";break;case"followers":b="pushup-member-is-follower"}this.masonryInstance.arrange({filter:function(c,d){var e=d.querySelector(".pushup-member-tile-name"),f=e.innerText||e.textContent,g=f?f.toLowerCase().indexOf(a)>=0:!1,h=d.className.indexOf(b)>=0;return g&&h}}),this.ResizeScrollBar()},f.prototype.FilterName=function(a,b){var c=this;clearTimeout(this.filterTimeout),this.filterName=b.target.value.toLowerCase(),this.filterTimeout=setTimeout(function(){return c.FilterMember()},150)},f.prototype.UpdateElements=function(a){if(this.isVisible)this.UpdateLayout(),this.masonryInstance.appended(a),this.UpdateLayout(),imagesLoaded(a,this.UpdateLayout.bind(this)),this.queuedItems=[];else for(var b=0;b<a.length;b++)this.queuedItems.push(a[b])},f.prototype.UpdateCallback=function(a,b){var c=this;if(a)return void d.Show("Application Error","We're sorry, something went wrong. Please try again.");for(var f=b,g=0;g<f.length;g++)f[g]=new e(f[g]),f[g].Navigate.Attach(function(a,b){c.Navigate.Fire(b)});ko.utils.arrayPushAll(this.Members(),f),this.Members.valueHasMutated(),this.UpdateElements(this.GetElement()[0].querySelectorAll(".pushup-member-list > li"))},f.prototype.Update=function(){a.Client.Services.PushUpAPIService.GetNetworkMembers(this.UpdateCallback.bind(this))},f}(f);b.MembersViewModel=g}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Widgets.LoginViewModel,d=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,e=function(a){function b(b,d){var e=d.GetPageParams().redirect;this.SignInControl=new c(!1,e),"forgot-password"===d.pageParams.page&&this.SignInControl.ShowForgotPassword(),a.call(this,b,"ps-slider-sign-in")}return __extends(b,a),b.prototype.Update=function(){},b}(d);b.SignInRegisterViewModel=e}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Services.PushUpAPIService,d=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,e=a.Client.ViewModels.Widgets.PostsViewModel,f=a.Client.ViewModels.Widgets.LoginViewModel,g=function(b){function d(d,g){var h=this,i=g.GetPageParams();this.PostControl=new e("",!1,!1,!1),this.SignInControl=new f(!1),this.Authenticated=ko.observable(a.Framework.Data.GlobalProxies.Pushup.Authenticated()),this.PrivateCommunity=ko.observable(!0),this.SignInControl.Navigate.Attach(function(a,b){h.NavigateToPage(b.GetPageName(),b.GetPageParams())}),c.GetPost(i.post,3,function(a,b){a||(h.PostControl.UpdatePosts([b]),h.Authenticated()||h.GetElement().find(".pushup-post-admin").hide())}),b.call(this,d,"ps-slider-single-post"),this.PostControl.SetElement(this.GetElement().find(".pushup-post"))}return __extends(d,b),d.prototype.OpenOverlay=function(){},d}(d);b.SinglePostViewModel=g}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Slider.Pages.AbstractSliderPageViewModel,d=function(b){function c(c,d,e){this.defaultPage=e,this.Page=ko.observable(this.defaultPage),this.CommunityName=a.Client.Session.GetObservable("PDC.CommunityInfo.Name"),this.CommunityLogo=a.Client.Session.GetObservable("PDC.CommunityInfo.Thumbnail"),this.CommunityCoverImage=a.Client.Session.GetObservable("PDC.CommunityInfo.CoverImage"),b.call(this,c,d)}return __extends(c,b),c.prototype.ShowAboutPushup=function(){this.Page("about-pushup")},c.prototype.HideAboutPushup=function(){this.Page(this.defaultPage)},c.prototype.ShowPage=function(a){this.Page(a)},c.prototype.ShowSignIn=function(){this.NavigateToPage("sign-in",{})},c}(c);b.UnauthenticatedAcessPageViewModel=d}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){!function(b){var c=a.Framework.Events,d=a.Client.ViewModels.Slider.Pages.UnauthenticatedAcessPageViewModel,e=(a.Client.Services.PushUpAPIServiceErrorCode,a.Client.Session),f=function(b){function d(a,d){this.code=d.GetPageParams().code,this.ResetPasswordError=new c.Event(this),this.ResetPasswordErrors=ko.observable(""),this.CommunityCoverImage=e.GetObservable("PDC.CommunityInfo.CoverImage"),this.InvalidCode=ko.observable(!1),b.call(this,a,"ps-slider-reset-password","menu")}return __extends(d,b),d.prototype.GoToForgotPassword=function(){this.NavigatePage("sign-in",{page:"forgot-password"})},d.prototype.SubmitResetPassword=function(b){var c=this,d={email:"",password:"",repassword:""};this.ResetPasswordErrors("");for(var e in d){var f=b.elements[e].value;if(null==f||""==f)return this.ResetPasswordErrors("All fields are required. Please fill out all fields and try again"),void this.ResetPasswordError.Fire();d[e]=f}return d.password!=d.repassword?(this.ResetPasswordErrors("Passwords do not match."),void this.ResetPasswordError.Fire()):(d.code=this.code,void a.Client.Services.PushUpAPIService.ResetPassword(d.email,d.password,d.code,function(b,e){if(c.InvalidCode(!1),b){switch(b.GetCode()){case 8e4:case 30007:c.ResetPasswordErrors(b.GetDescription());break;case 20018:c.InvalidCode(!0);break;default:c.ResetPasswordErrors("Unable to reset your password, please try again.")}return void c.ResetPasswordError.Fire()}return e&&1!=e.success?(c.ResetPasswordErrors("Unable to reset your password, please try again."),void c.ResetPasswordError.Fire()):void a.Client.Services.PushUpAPIService.Login(d.email,d.password,function(a,b){})}))},d}(d);b.ResetPasswordViewModel=f}(b.Unauthenticated||(b.Unauthenticated={}));b.Unauthenticated}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){!function(b){var c=a.Client.ViewModels.Slider.Pages.UnauthenticatedAcessPageViewModel,d=a.Client.Session,e=function(b){function c(c,e){var f=this;this.CommunityCoverImage=d.GetObservable("PDC.CommunityInfo.CoverImage"),this.ConfirmAccountErrors=ko.observable(""),this.ConfirmAccountCode=ko.observable(""),this.ConfirmAccountUserId=ko.observable(""),this.ConfirmationMessageMode=ko.observable("");var g=e.GetPageName(),h=e.GetPageParams(),i=g.split("-");i.length>1&&this.ConfirmationMessageMode(i[1]),this.ConfirmAccountUserId(h.userId||""),this.ConfirmAccountCode(h.code||""),h.auto&&this.ConfirmationMessageMode("success"),""!=this.ConfirmAccountUserId()&&""!=this.ConfirmAccountCode()&&a.Client.Services.PushUpAPIService.ConfirmAccount(this.ConfirmAccountUserId(),this.ConfirmAccountCode(),function(a,b){a||f.ConfirmationMessageMode("success")}),b.call(this,c,"ps-slider-confirm","menu")}return __extends(c,b),c.prototype.SubmitConfirmAccount=function(){var b=this;""!=this.ConfirmAccountCode()&&a.Client.Services.PushUpAPIService.ConfirmAccount(this.ConfirmAccountUserId(),this.ConfirmAccountCode(),function(a,c){a?b.ConfirmationMessageMode("error"):b.ConfirmationMessageMode("success")})},c}(c);b.ConfirmViewModel=e}(b.Unauthenticated||(b.Unauthenticated={}));b.Unauthenticated}(b.Pages||(b.Pages={}));b.Pages}(b.Slider||(b.Slider={}));b.Slider}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(a){this._router=a}return a.prototype.GetRouter=function(){return this._router},a.prototype.GetElement=function(){return this._element},a.prototype.SetElement=function(a){this._element=jQuery(a)},a.prototype.HasPage=function(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&a[c]==b)return!0;return!1},a.prototype.AuthenticationCheck=function(a){return!1},a.prototype.InterceptChange=function(a){return a},a}();a.Component=b}(a.UI||(a.UI={}));a.UI}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Routing.HistoryItem,d=a.Client.Widgets.Overlays.SliderOverlayWidget,e=a.Client.ViewModels.Slider.Pages,f=function(){function a(){}return a.Members="members",a.SocialFeed="socialfeed",a.Profile="profile",a.SignIn="sign-in",a.Confirm="confirm",a.ConfirmSuccess="confirm-success",a.ConfirmAlreadyConfirmed="confirm-already",a.ConfirmError="confirm-error",a.ResetPassword="reset-password",a.AboutInfo="edit-profile",a.Notifications="notifications",a.Post="post",a}();b.SliderPages=f;var g=function(b){function g(a){b.call(this,a),this.GetRouter().PageChange.Attach(this.HandleChangePage,this),this.GetRouter().RegisterPages(f),this.GetRouter().AddInterceptor(this.InterceptChange,this),this.sliderOverlay=new d}return __extends(g,b),g.prototype.OnChangePageRequest=function(a,b){this.GetRouter().ChangePage(b)},g.prototype.SwitchPage=function(b,c){var g=this;try{var h,i=new d;i.ChangePage(b.GetPageName()),i.Navigate.Attach(this.OnChangePageRequest,this);var j=i.GetViewModel().GetElement().find(".pushup-slider-page-content");switch(b.GetPageName()){case f.Members:h=new e.MembersViewModel(j,b);break;case f.Profile:h=new e.ProfileViewModel(j,b);break;case f.SocialFeed:h=new e.SocialFeedViewModel(j,b);break;case f.Post:h=new e.SinglePostViewModel(j,b);break;case f.AboutInfo:h=new e.AboutInfoViewModel(j,b);break;case f.Notifications:h=new e.AboutInfoViewModel(j,b,"notifications");break;case f.Confirm:case f.ConfirmSuccess:case f.ConfirmAlreadyConfirmed:case f.ConfirmError:h=new e.Unauthenticated.ConfirmViewModel(j,b);break;case f.ResetPassword:h=new e.Unauthenticated.ResetPasswordViewModel(j,b);break;case f.SignIn:h=new e.SignInRegisterViewModel(j,b)}h.Navigate.Attach(this.OnChangePageRequest,this),i.GetViewModel().SliderScroll.Attach(function(a,b){return h.ScrollTo(b.deltaY*b.deltaFactor)}),h.Update();var k=this.sliderOverlay.GetViewModel().GetElement().find(".pushup-sliding-overflow-hidden").parent();k.css("overflow","hidden"),this.sliderViewModel&&this.sliderViewModel.Closing.Fire(),this.sliderOverlay.Close(function(b){b&&(g.sliderViewModel.Closed.Fire(),a.Client.Global.Sizer.UnRequestSize(-1)),g.sliderViewModel=h,g.sliderOverlay=i;var d=g.sliderOverlay.GetViewModel().GetElement().find(".pushup-sliding-overflow-hidden").parent();d.css("overflow","hidden"),g.sliderViewModel.Opening.Fire(),i.Open(function(){g.sliderViewModel.Opened.Fire(),d.css("overflow","auto"),c()}),g.sliderViewModel.Inserted.Fire()})}catch(l){}},g.prototype.HandleChangePage=function(b,c){var d=this;if(this.HasPage(f,c.GetPageName()))this.AuthenticationCheck(c.GetPageName())&&(a.Client.Global.Sizer.RequestSize(-1),this.SwitchPage(c,function(){b.ManagerChangedPage(c)}));else{var e=this.sliderOverlay.GetViewModel().GetElement().find(".pushup-sliding-overflow-hidden").parent();e.css("overflow","hidden"),this.sliderOverlay.Close(function(e){e&&(a.Client.Global.Sizer.UnRequestSize(-1),d.sliderViewModel.Destroy()),null!=d.sliderViewModel&&ko.removeNode(d.sliderOverlay.GetViewModel().GetElement()[0]),b.ManagerChangedPage(c)})}},g.prototype.AuthenticationCheck=function(b){var c=a.Framework.Data.GlobalProxies.Pushup.Authenticated(),d=a.Client.Session.GetData("PDC.CommunityInfo.Preview");switch(b){case f.Members:case f.Profile:case f.AboutInfo:case f.Notifications:return c;case f.SignIn:case f.Confirm:case f.ConfirmSuccess:case f.ConfirmAlreadyConfirmed:case f.ConfirmError:case f.ResetPassword:return!c;case f.Post:return!0;case f.SocialFeed:return c||!isNaN(d)&&2==d}return!1},g.prototype.InterceptChange=function(b){return!this.HasPage(f,b.GetPageName())||this.AuthenticationCheck(b.GetPageName())?b:a.Framework.Data.GlobalProxies.Pushup.Authenticated()?new c(f.SocialFeed,{}):new c(f.SignIn,{redirect:b.GetPageName()})},g}(a.Framework.UI.Component);b.Slider=g}(b.Components||(b.Components={}));b.Components}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.ColorLuminance=function(a,b){var c=!1;"#"==a[0]&&(a=a.slice(1),c=!0);var d=parseInt(a,16),e=(d>>16)+b;e>255?e=255:0>e&&(e=0);var f=(d>>8&255)+b;f>255?f=255:0>f&&(f=0);var g=(255&d)+b;return g>255?g=255:0>g&&(g=0),(c?"#":"")+(g|f<<8|e<<16).toString(16)},b.prototype.Lighten=function(a,b){return this.ColorLuminance(a,b)},b.prototype.Darken=function(a,b){return this.ColorLuminance(a,-b)},b}(a.Framework.UI.Helper);b.ColorHelper=c}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Framework.Events,e=function(a){function b(){a.apply(this,arguments),this.element=null,this.isOpen=!1,this.isMobile=function(a){return a===!1?!1:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4))}(navigator.userAgent||navigator.vendor||window.opera||!1),this.Navigate=new d.Event(this),this.HoverOpen=new d.Event(this),this.HoverClose=new d.Event(this),this.HoverName=ko.observable("")}return __extends(b,a),b.prototype.SetElement=function(a){this.element=a},b.prototype.ResetHideTimeout=function(){var a=this;clearTimeout(this.hideTimeout),this.hideTimeout=setTimeout(function(){return jQuery(a.element).parent().find(":hover").length>0?void a.ResetHideTimeout():void a.CloseHover()},500)},b.prototype.OpenHover=function(){this.isMobile||null==this.element||this.isOpen||(this.isOpen=!0,this.element.style.display="block",this.HoverOpen.Fire(),this.ResetHideTimeout())},b.prototype.CloseHover=function(){this.isMobile||null!=this.element&&this.isOpen&&(this.isOpen=!1,this.element.style.display="none",this.HoverClose.Fire())},b}(c);b.AbstractHoverViewModel=e}(b.Hovers||(b.Hovers={}));b.Hovers}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.prototype.CreateHover=function(a,b,c){b.HoverOpen.Attach(function(){return c.HoverOpen.Fire()},c),b.HoverClose.Attach(function(){return c.HoverClose.Fire()},c),b.Navigate.Attach(function(a,b){return c.Navigate.Fire(b)},c),b.SetElement(a)},b}(a.Framework.UI.Helper);b.HoverHelper=c}(b.Helpers||(b.Helpers={}));b.Helpers}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(b){function c(){b.call(this),this.HoverName=ko.observable("members"),this.Members=ko.observableArray([]),this.Members(a.Client.Session.GetData("PDC.NetworkMembers")||[]),a.Client.Session.Subscribe("PDC.NetworkMembers",this.UpdateMembers.bind(this))}return __extends(c,b),c.prototype.UpdateMembers=function(a,b){this.Members.removeAll(),null!=b&&(ko.utils.arrayPushAll(this.Members(),b),this.Members.valueHasMutated())},c}(a.Client.ViewModels.Bar.Hovers.AbstractHoverViewModel);b.MembersHoverViewModel=c}(b.Hovers||(b.Hovers={}));b.Hovers}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=a.Client.Models.Account.UserProfileModel,d=a.Client.Session,e=function(b){function e(){b.call(this),this.HoverName=ko.observable("profile"),this.UserProfile=ko.observable(new c),this.UserProfile().Update(a.Client.Session.GetData("PDC.UserProfile")),a.Client.Session.Subscribe("PDC.UserProfile",this.UpdateUserProfile.bind(this))}return __extends(e,b),e.prototype.UpdateUserProfile=function(a,b){return null==b?void this.UserProfile(new c):void this.UserProfile().Update(b)},e.prototype.Logout=function(){this.Navigate.Fire(new a.Framework.Routing.HistoryItem("default",{})),a.Framework.Data.GlobalProxies.Pushup.Deauthenticate(),d.DeleteAuthTokenGlobally()},e}(a.Client.ViewModels.Bar.Hovers.AbstractHoverViewModel);b.ProfileHoverViewModel=e}(b.Hovers||(b.Hovers={}));b.Hovers}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.HoverName=ko.observable("about-pushup")}return __extends(b,a),b}(a.Client.ViewModels.Bar.Hovers.AbstractHoverViewModel);b.AboutPushupHoverViewModel=c}(b.Hovers||(b.Hovers={}));b.Hovers}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(b){function c(){b.call(this),this.HoverName=ko.observable("socialfeed"),this.Feed=ko.observableArray([]),this.Feed(a.Client.Session.GetData("PDC.SocialFeed")||[]),a.Client.Session.Subscribe("PDC.SocialFeed",this.UpdateSocialFeed.bind(this))}return __extends(c,b),c.prototype.UpdateSocialFeed=function(a,b){this.Feed.removeAll(),null!=b&&(ko.utils.arrayPushAll(this.Feed(),b),this.Feed.valueHasMutated())},c}(a.Client.ViewModels.Bar.Hovers.AbstractHoverViewModel);b.SocialFeedHoverViewModel=c}(b.Hovers||(b.Hovers={}));b.Hovers}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Framework.Events.Event,e=a.Framework.Routing.HistoryItem,f=a.Client.ViewModels.Bar.Hovers.MembersHoverViewModel,g=a.Client.ViewModels.Bar.Hovers.ProfileHoverViewModel,h=a.Client.ViewModels.Bar.Hovers.SocialFeedHoverViewModel,i=a.Client.ViewModels.Bar.Hovers.AboutPushupHoverViewModel,j=a.Client.Session,k=a.Client.Helpers.ColorHelper,l=a.Client.Helpers.HoverHelper,m=function(a){function b(b){this.Navigate=new d(this),this.HoverOpen=new d(this),this.HoverClose=new d(this),this.IsLoggedIn=ko.observable(!1),this.SelectedPage=ko.observable(""),this.WhiteLabelImage=ko.observable(this.GetWhiteLabelImage()),this.WhiteLabelBarColor=ko.observable(this.GetWhiteLabelBarColor()),this.ForegroundColor=ko.observable(this.GetForegroundColor()),this.IsAdmin=j.GetObservable("PDC.UserProfile.IsAdmin"),this.ProfileIsUser=ko.observable(!1),this.MemberHover=new f,this.ProfileHover=new g,this.SocialFeedHover=new h,this.AboutPushupHover=new i,this.ColorHelper=new k,this.HoverHelper=new l,a.call(this,b)}return __extends(b,a),b.prototype.OpenHover=function(a,b,c){this.MemberHover.CloseHover(),this.ProfileHover.CloseHover(),this.SocialFeedHover.CloseHover(),(a.HoverName()!=this.SelectedPage()||"profile"==a.HoverName()&&!this.ProfileIsUser())&&a.OpenHover(a,c)},b.prototype.NavigatePage=function(a,b){("profile"!=a&&a==this.SelectedPage()||"profile"==a&&this.ProfileIsUser())&&(a="default"),b instanceof HTMLElement&&2==b.children.length&&b.children[1].className.indexOf("pushup-hover")>=0&&(b.children[1].style.display="none"),this.Navigate.Fire(new e(a,{}))},b.prototype.GetWhiteLabelBarColor=function(){var a=j.GetData("PDC.CommunityInfo"),b=a.Css;return""==b.PrimaryColor?"#293A4D":b.PrimaryColor},b.prototype.GetForegroundColor=function(){var a=j.GetData("PDC.CommunityInfo"),b=a.Css;return""==b.ForegroundColor?"#FFFFFF":b.ForegroundColor},b.prototype.GetWhiteLabelImage=function(){var a=j.GetData("PDC.CommunityInfo");return""==a.WhiteLabelLogo?"https://8988ae2adffa1e70c1be-11fb47457486c774da6409c1700eb468.ssl.cf2.rackcdn.com/logo2.png":a.WhiteLabelLogo},b}(c);b.Navigation=m}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Client.Session,e=function(b){function c(a){this.isDisplayed=!1,this.isEnabled=!0,this.Community=d.GetObservable("PDC.CommunityInfo"),b.call(this,a)}return __extends(c,b),c.prototype.Show=function(){var b=Date.now(),c=d.GetData("PDC.TeaserDisabled");this.isDisplayed||!this.isEnabled||c&&36e5>c-b||jQuery(window).width()<768||(this.isDisplayed=!0,a.Client.Global.Tracker.Track("preview","Network Preview"),a.Client.Global.Sizer.RequestSize(189),this.GetElement().animate({bottom:"39px"},1e3))},c.prototype.Hide=function(){this.isDisplayed&&(this.isDisplayed=!1,this.GetElement().animate({bottom:"-150px"},1e3,function(){return a.Client.Global.Sizer.UnRequestSize(189)}))},c.prototype.UserDisable=function(){d.SetData("PDC.TeaserDisabled",Date.now()),this.Hide()},c.prototype.Disable=function(){this.isDisplayed&&this.Hide(),this.isEnabled=!1},c.prototype.Enable=function(){this.isEnabled=!0},c.prototype.NavigateToSignup=function(){this.Hide(),this.NavigatePage("sign-in",{})},c}(c);b.TeaserViewModel=e}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Client.Session,e=a.Client.Models.Activity.PostModel,f=a.Client.ViewModels.Widgets.PostsViewModel,g=function(b){function c(a){this.isDisplayed=!1,this.isEnabled=!0,this.height=250,this.CommunityName=d.GetObservable("PDC.CommunityInfo.Name"),this.CommunityLogo=d.GetObservable("PDC.CommunityInfo.Thumbnail"),this.PostsControl=new f("",!1,!0,!1),this.UpdateSocialFeed(null,d.GetData("PDC.SocialFeed")||[]),d.Subscribe("PDC.SocialFeed",this.UpdateSocialFeed.bind(this)),b.call(this,a)}return __extends(c,b),c.prototype.UpdateSocialFeed=function(a,b){var c=d.GetData("PDC.StickyPosts");if(!(b.length<1)){for(var f=0;f<b.length;f++)b[f]=function(a){var c=new e;return c.Deserialize(b[a]),c}(f);for(var f=0;f<c.length;f++)c[f]=function(a){var b=new e;return b.Deserialize(c[a]),b}(f);this.PostsControl.Posts.removeAll(),this.PostsControl.StickyPosts.removeAll(),null!=b&&null!=c&&(ko.utils.arrayPushAll(this.PostsControl.Posts(),b),ko.utils.arrayPushAll(this.PostsControl.StickyPosts(),c),this.PostsControl.Posts.valueHasMutated(),this.PostsControl.StickyPosts.valueHasMutated())}},c.prototype.Show=function(){var b=Date.now(),c=d.GetData("PDC.TeaserDisabled");this.isDisplayed||!this.isEnabled||c&&36e5>c-b||jQuery(window).width()<768||(this.isDisplayed=!0,a.Client.Global.Tracker.Track("preview","Network Preview"),a.Client.Global.Sizer.RequestSize(this.height+39),this.GetElement().animate({bottom:"39px"},1e3))},c.prototype.Hide=function(){var b=this;this.isDisplayed&&(this.isDisplayed=!1,this.GetElement().animate({bottom:"-"+this.height+"px"},1e3,function(){return a.Client.Global.Sizer.UnRequestSize(b.height+39)}))},c.prototype.UserDisable=function(){d.SetData("PDC.TeaserDisabled",Date.now()),this.Hide()},c.prototype.Disable=function(){this.isDisplayed&&this.Hide(),this.isEnabled=!1},c.prototype.Enable=function(){this.isEnabled=!0},c.prototype.NavigateToSignup=function(){this.Hide(),this.NavigatePage("socialfeed",{})},c.prototype.OpenOverlay=function(){},c}(c);b.CommunityPreviewViewModel=g}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Utils.Logger,d=(a.Framework.Utils.LogCategory,a.Client.Session),e=function(b){function e(e){var f=this;b.call(this,e),this.SetElement("#pushup-bar"),c.Info("Reference of #pushup-bar stored in root: ",1),c.Debug(this.GetElement(),1),c.Info("Setting up child ViewModels",1),this.NavigationViewModel=new a.Client.ViewModels.Bar.Navigation("#pushup-bar"),this.TeaserViewModel=new a.Client.ViewModels.Bar.TeaserViewModel("#pushup-teaser"),this.CommunityPreviewViewModel=new a.Client.ViewModels.Bar.CommunityPreviewViewModel("#pushup-community-preview");var g=d.GetData("PDC.CommunityInfo.Preview");(isNaN(g)||0==g)&&this.CommunityPreviewViewModel.Disable(),d.Subscribe("PDC.CommunityInfo.Preview",function(a,b){0==b&&f.CommunityPreviewViewModel.Disable()}),this.NavigationViewModel.IsLoggedIn(a.Framework.Data.GlobalProxies.Pushup.Authenticated()),c.Info("Attaching Bar Component Events",1),this.NavigationViewModel.Navigate.Attach(this.OnChangePageRequest,this),this.TeaserViewModel.Navigate.Attach(this.OnChangePageRequest,this),
this.CommunityPreviewViewModel.Navigate.Attach(this.OnChangePageRequest,this),this.NavigationViewModel.HoverOpen.Attach(this.HoverOpen,this),this.NavigationViewModel.HoverClose.Attach(this.HoverClose,this),this.GetRouter().PageChange.Attach(this.HandlePageChange,this),this.GetRouter().PageChanged.Attach(this.HandlePageChanged,this),a.Framework.Data.GlobalProxies.Pushup.AuthenticationUpdate.Attach(this.HandleAuthenticationChange,this),this.GetElement().removeClass("pushup-hidden"),a.Client.Global.Sizer.RequestSize(45),setTimeout(function(){var b=parseInt(d.GetData("PDC.CommunityInfo.Preview"));if(!a.Framework.Data.GlobalProxies.Pushup.Authenticated())switch(b){case 1:f.TeaserViewModel.Show();break;case 2:f.CommunityPreviewViewModel.Show();break;default:return}},1e3)}return __extends(e,b),e.prototype.HoverOpen=function(){this.GetRouter().AddWidget()},e.prototype.HoverClose=function(){this.GetRouter().RemoveWidget()},e.prototype.HandlePageChange=function(b,c){c.GetPageName()!=a.Client.Components.SliderPages.Profile||c.GetPageParams().userId&&c.GetPageParams().userId!=d.GetData("PDC.UserProfile.UserId")?this.NavigationViewModel.ProfileIsUser(!1):this.NavigationViewModel.ProfileIsUser(!0),this.NavigationViewModel.SelectedPage(c.GetPageName()),b.ManagerChangedPage(c)},e.prototype.HandlePageChanged=function(a,b){"default"!=b.GetPageName()?this.CommunityPreviewViewModel.Disable():d.GetData("PDC.CommunityInfo.Teaser")===!0&&this.CommunityPreviewViewModel.Enable()},e.prototype.HandleAuthenticationChange=function(a){this.NavigationViewModel.IsLoggedIn(a.Authenticated())},e.prototype.OnChangePageRequest=function(a,b){this.GetRouter().ChangePage(b)},e}(a.Framework.UI.Component);b.Bar=e}(b.Components||(b.Components={}));b.Components}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.UI.Component,d=a.Client.Components.SliderPages,e=function(b){function c(d){var e=this;b.call(this,d),this.baseUrl=c.cleanCommunityUrl(a.Client.Session.GetData("PDC.CommunityInfo.Url")),this.isLoggedIn=a.Framework.Data.GlobalProxies.Pushup.Authenticated(),a.Framework.Data.GlobalProxies.Pushup.AuthenticationUpdate.Attach(function(a){e.isLoggedIn=a.Authenticated()},this),this.GetRouter().PageChange.Attach(this.HandleChangePage,this)}return __extends(c,b),c.prototype.HandleChangePage=function(a,b){var c=this.calculatePageLocation(b);""!==c&&this.Track(c,this.calculatePageTitle(b.GetPageName())),a.ManagerChangedPage(b)},c.prototype.Track=function(a,b){var c=this.baseUrl+a;ga("send",{hitType:"pageview",page:c,title:b})},c.prototype.calculatePageLocation=function(a){var b=this.calculatePageName(a.GetPageName());if(""===b)return"";var d="?"+c.convertObjectToQs(a.GetPageParams());return"?"!==d&&(b+=d),b},c.prototype.calculatePageName=function(a){switch(a){case d.Members:return"members";case d.SocialFeed:return this.isLoggedIn?"social_feed":"public_feed";case d.Profile:return"profile";default:return""}},c.prototype.calculatePageTitle=function(a){switch(a){case d.Members:return"Members Page";case d.SocialFeed:return this.isLoggedIn?"Social Feed":"Public Feed";case d.Profile:return"Profile Page";default:return""}},c.convertObjectToQs=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(jQuery.map([c,a[c]],encodeURIComponent).join("="));return b.join("=")},c.cleanCommunityUrl=function(a){return"/"!==a.slice(-1)&&(a+="/"),c.urlHasProtocol(a)||(a="http://"+a),a},c.urlHasProtocol=function(a){var b=a.substring(0,6);return"https:"===b||-1!==b.indexOf("http:")},c}(c);b.GaTracker=e}(b.Components||(b.Components={}));b.Components}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Routing.Messenger,d=a.Framework.Routing.Message,e=a.Framework.Routing.HistoryItem,f=a.Framework.Utils.Logger,g=(a.Framework.Utils.LogCategory,a.Client.Router),h=a.Client.Session,i=a.Framework.UI.Component,j=function(){function a(){}return a.Resize="ResizeFrame",a.Hash="ChangeHash",a}(),k=function(a){function b(b){var i=this;a.call(this,b),this.sizeInterval=-1,this.messenger=new c(h.GetData("PDC.ParentOrigin")),this.GetRouter().PageChange.Attach(this.HandleChangePage,this),this.messenger.Register("InitialHash",function(a,b){f.Info("Recieved initial hash, starting router",0),f.Debug(b.GetData(),0);var c,d=b.GetData().hash;c=""!=d?e.FromString(d):new e(g.DefaultState,{}),i.GetRouter().StartRouting(c),i.messenger.Register("ParentHashChange",function(a,b){i.GetRouter().ChangePage(e.FromString(b.GetData().hash))},i)},this);var j=window.setInterval(function(){i.messenger.IsReady()&&(window.clearInterval(j),jQuery("body").css("display","none"),f.Info("ParentMessenger got proper initial response, letting it know that PushUp is now ready...",0),i.messenger.SendMessage(new d("PushupReady",{})))},70)}return __extends(b,a),b.prototype.HandleChangePage=function(a,b){var c=b.GetPageName()!=g.DefaultState?b.ToString():".";this.messenger.SendMessage(new d(j.Hash,{hash:c})),a.ManagerChangedPage(b)},b.prototype.SetSize=function(a){var b=this;this.messenger.IsReady()&&-1===this.sizeInterval?this.messenger.SendMessage(new d(j.Resize,{size:a})):(-1!==this.sizeInterval&&window.clearInterval(this.sizeInterval),this.sizeInterval=window.setInterval(function(){b.messenger.IsReady()&&(window.clearInterval(b.sizeInterval),b.messenger.SendMessage(new d(j.Resize,{size:a})),b.sizeInterval=-1)},70))},b}(i);b.ParentMessenger=k}(b.Components||(b.Components={}));b.Components}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.UI.Component,d=function(b){function c(a,c){var d=this;b.call(this,a),this.sizes={},this.currentSize=0,this.messenger=c,this.GetRouter().WidgetAdded.Attach(function(){d.RequestSize()}),this.GetRouter().WidgetRemoved.Attach(function(){d.UnRequestSize()})}return __extends(c,b),c.prototype.RequestSize=function(b){"undefined"==typeof b&&(b=-1),a.Framework.Utils.Logger.Info("Size set to "+b,3);var c=""+b;this.sizes.hasOwnProperty(c)?this.sizes[c]++:this.sizes[c]=1,this.ChangeSize()},c.prototype.UnRequestSize=function(a){"undefined"==typeof a&&(a=-1);var b=""+a;this.sizes.hasOwnProperty(b)&&this.sizes[b]--,this.ChangeSize()},c.prototype.calculateSize=function(){var a=0;for(var b in this.sizes){var c=parseInt(b,10);if(this.sizes[b]>0){if(-1===c)return c;c>a&&(a=c)}}return a},c.prototype.ChangeSize=function(){var a=this.calculateSize();a!==this.currentSize&&this.messenger.SetSize(this.currentSize=a)},c}(c);b.PageSizer=d}(b.Components||(b.Components={}));b.Components}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){var b=function(){function a(){}return a}();a.Global=b}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(a){!function(a){var b=function(){function a(){}return a.parseUrl=function(a){var b=document.createElement("a");return b.href=a,{protocol:b.protocol,domain:b.hostname,port:parseInt(b.port)}},a}();a.UrlHandling=b}(a.Utils||(a.Utils={}));a.Utils}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){var c=a.Client.Components.GaTracker,d=a.Client.Components.Slider,e=a.Client.Components.Bar,f=a.Client.Session,g=a.Client.Router,h=a.Framework.Utils.Logger,i=(a.Framework.Utils.LogCategory,a.Client.Components.ParentMessenger),j=a.Client.Components.PageSizer,k=a.Client.Global,l=a.Framework.Data.Proxies.PushUpAPI,m=a.Framework.Data.GlobalProxies,n=a.Client.Services.PushUpAPIService,o=a.Framework.Routing.HistoryItem,p=a.Client.Widgets.Overlays.Common.LoadingIndicatorOverlayWidget,q=function(){function b(){}return b.Run=function(c,d,e,g,i){setTimeout(function(){return has3d()},1e3),jQuery(function(){jQuery("body").css("display","none")}),h.SetLogLevel(0),h.Info("Loader.run called with ("+c+", "+d+", "+e+")",0),a.Framework.Utils.Storage.NativeEnabled()||h.Warn("Persistent storage is not currently enabled",0);var j=new a.Client.Models.Network.CommunityModel;if(j.Update(i),f.SetDefaultScope(c),f.SetData("PDC.CommunityID",c),f.SetData("PDC.ParentOrigin",e),f.SetData("PDC.CommunityInfo",j.ToObject()),m.Pushup=new l(Typertext.Http.HttpUrl.FromUrl(g),null,null),b.validateIfValid(f.GetData("PDC.API"))||!b.validateIfValid(f.GetData("PDC.API",f.GlobalScope)))return void b.startApplication();var k=f.GetData("PDC.MembershipList",f.GlobalScope);return null!=k&&k instanceof Array&&b.isMember(c,k)||!m.Pushup.Authenticated()?void b.startApplication():void n.GetMemberNetworks(b.createHandleNetworkResponse(c))},b.validateIfValid=function(a){p.Disable();try{var b=a.Expiration;if(1e3*b>(new Date).getTime())return m.Pushup.Authenticate(a.AccessToken,b),!0}catch(c){}return!1},b.startApplication=function(){var a=0,c=function(){0===--a&&b.runApplication()};a++,n.GetNetworkMembers(function(a,b){if(null!=b){for(var d=b.slice(0,3),e=0;e<d.length;e++)d[e]=d[e].ToObject();f.SetData("PDC.NetworkMembers",d)}c()}),a++,n.GetSocialFeed(0,function(a,b){if(null!=b){for(var d=b.slice(0,3),e=0;e<d.length;e++)d[e]=d[e].ToObject();f.SetData("PDC.SocialFeed",d)}c()}),a++,n.GetStickyPosts(function(a,b){if(null!=b){for(var d=0;d<b.length;d++)b[d]=b[d].ToObject();f.SetData("PDC.StickyPosts",b)}c()}),m.Pushup.Authenticated()&&(a++,n.GetProfileInformation(null,function(a,b){a||f.SetData("PDC.UserProfile",b.ToObject()),c()}))},b.runApplication=function(){p.Enable();var a=new g,f=new i(a);k.Sizer=new j(a,f);new d(a),new e(a);k.Tracker=new c(a),k.Tracker.Track("bar_load","Bar Load"),n.LoggedIn.Attach(function(b,c){if(c&&""!==c){var d=new o(c,{});a.ChangePage(d)}else a.ChangePage(a.CurrentPage())}),b.authenticatedSessionManager(m.Pushup),m.Pushup.AuthenticationUpdate.Attach(b.authenticatedSessionManager),m.Pushup.AuthenticationUpdate.Attach(function(b){b.Authenticated()||a.ChangePage(new o(g.DefaultState,{}))}),h.Info("Loader.run complete",0),p.Enable()},b.isMember=function(a,b){return b.indexOf(a)>=0},b.createHandleNetworkResponse=function(a){return function(c,d){if(null==d)return m.Pushup.Deauthenticate(),void b.startApplication();for(var e=[],g=0;g<d.length;g++)e.push(d[g].NetworkId());f.SetData("PDC.MembershipList",e,f.GlobalScope),b.isMember(a,e)||m.Pushup.Deauthenticate(),b.startApplication()}},b.authenticatedSessionManager=function(a){try{f.SetData("PDC.API",{AccessToken:a.GetAccessToken(),Expiration:a.GetAccessTokenExpiration()})}catch(b){f.SetData("PDC.API",{}),f.SetData("PDC.UserProfile",null),f.SetData("PDC.MembershipList",{},f.GlobalScope)}},b}();b.Loader=q}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={})),window.RunPushup=PushUp.Client.Loader.Run;var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Title=ko.observable(""),this.Url=ko.observable(""),this.Description=ko.observable(""),this.DisplayImage=ko.observable(""),this.Timestamp=ko.observable(0)}return __extends(b,a),b}(a.Client.Models.Activity.Embeds.EmbedObjectModel);b.LinkEmbedModel=c}(b.Embeds||(b.Embeds={}));b.Embeds}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Id=ko.observable(""),this.Provider=ko.observable(""),this.SrcUrl=ko.observable(""),this.Message=ko.observable("")}return __extends(b,a),b}(a.Client.Models.Activity.Embeds.EmbedObjectModel);b.PhotoEmbedModel=c}(b.Embeds||(b.Embeds={}));b.Embeds}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Id=ko.observable(""),this.Provider=ko.observable(""),this.Message=ko.observable("")}return __extends(b,a),b}(a.Client.Models.Activity.Embeds.EmbedObjectModel);b.StatusEmbedModel=c}(b.Embeds||(b.Embeds={}));b.Embeds}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){!function(b){var c=function(a){function b(){a.apply(this,arguments),this.Provider=ko.observable(""),this.Id=ko.observable(""),this.SrcUrl=ko.observable("")}return __extends(b,a),b}(a.Client.Models.Activity.Embeds.EmbedObjectModel);b.VideoEmbedModel=c}(b.Embeds||(b.Embeds={}));b.Embeds}(b.Activity||(b.Activity={}));b.Activity}(b.Models||(b.Models={}));b.Models}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=a.Framework.Events.Event,e=a.Framework.Routing.HistoryItem,f=function(a){function b(b){this.QuerySubmit=new d(this),this.IsEnabled=ko.observable(!0),a.call(this,b)}return __extends(b,a),b.prototype.Query=function(a){var b,c=jQuery(a).find('input[type="text"]');b=c.val(),c.val(""),this.IsEnabled(!1),this.QuerySubmit.Fire(new e("members",{query:b}))},b}(c);b.Search=f}(b.Bar||(b.Bar={}));b.Bar}(b.ViewModels||(b.ViewModels={}));b.ViewModels}(a.Client||(a.Client={}));a.Client}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){!function(b){var c=a.Framework.UI.ViewModel,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c);b.UploadIndicatorViewModel=d}(b.Registered||(b.Registered={}));b.Registered}(b.Overlays||(b.Overlays={}));b.Overlays}(a.ViewModels||(a.ViewModels={}));a.ViewModels}(PushUp||(PushUp={}));var PushUp;!function(a){!function(b){!function(b){var c=a.Framework.Events,d=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b}(c.Event);b.MessageEvent=d}(b.Routing||(b.Routing={}));b.Routing}(a.Framework||(a.Framework={}));a.Framework}(PushUp||(PushUp={}));